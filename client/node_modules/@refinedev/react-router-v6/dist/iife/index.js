(()=>{var Ho=Object.create;var ia=Object.defineProperty;var Xo=Object.getOwnPropertyDescriptor;var Go=Object.getOwnPropertyNames;var Zo=Object.getPrototypeOf,Yo=Object.prototype.hasOwnProperty;var h=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var cr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Jo=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Go(t))!Yo.call(e,n)&&n!==r&&ia(e,n,{get:()=>t[n],enumerable:!(a=Xo(t,n))||a.enumerable});return e};var fe=(e,t,r)=>(r=e!=null?Ho(Zo(e)):{},Jo(t||!e||!e.__esModule?ia(r,"default",{value:e,enumerable:!0}):r,e));var Wt=cr((Au,pa)=>{var ei=Object.create,Qt=Object.defineProperty,ti=Object.getOwnPropertyDescriptor,ri=Object.getOwnPropertyNames,ai=Object.getPrototypeOf,ni=Object.prototype.hasOwnProperty,oi=(e,t)=>{for(var r in t)Qt(e,r,{get:t[r],enumerable:!0})},sa=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ri(t))!ni.call(e,n)&&n!==r&&Qt(e,n,{get:()=>t[n],enumerable:!(a=ti(t,n))||a.enumerable});return e},ii=(e,t,r)=>(r=e!=null?ei(ai(e)):{},sa(t||!e||!e.__esModule?Qt(r,"default",{value:e,enumerable:!0}):r,e)),si=e=>sa(Qt({},"__esModule",{value:!0}),e),la={};oi(la,{DevToolsContext:()=>va,DevToolsContextProvider:()=>ui,DevtoolsEvent:()=>ua,hooksByScope:()=>li,receive:()=>ma,scopes:()=>da,send:()=>ca});pa.exports=si(la);var ua=(e=>(e.RELOAD="devtools:reload",e.DEVTOOLS_INIT="devtools:init",e.DEVTOOLS_HANDSHAKE="devtools:handshake",e.DEVTOOLS_ALREADY_CONNECTED="devtools:already-connected",e.ACTIVITY="devtools:send-activity",e.DEVTOOLS_ACTIVITY_UPDATE="devtools:activity-update",e.DEVTOOLS_CONNECTED_APP="devtools:connected-app",e.DEVTOOLS_DISCONNECTED_APP="devtools:disconnected-app",e.DEVTOOLS_HIGHLIGHT_IN_MONITOR="devtools:highlight-in-monitor",e.DEVTOOLS_HIGHLIGHT_IN_MONITOR_ACTION="devtools:highlight-in-monitor-action",e.DEVTOOLS_LOGIN_SUCCESS="devtools:login-success",e.DEVTOOLS_RELOAD_AFTER_LOGIN="devtools:reload-after-login",e))(ua||{}),da={useCan:"access-control",useLog:"audit-log",useLogList:"audit-log",useCreate:"data",useCreateMany:"data",useCustom:"data",useCustomMutation:"data",useDelete:"data",useDeleteMany:"data",useInfiniteList:"data",useList:"data",useMany:"data",useOne:"data",useUpdate:"data",useUpdateMany:"data",useForgotPassword:"auth",useGetIdentity:"auth",useIsAuthenticated:"auth",useLogin:"auth",useLogout:"auth",useOnError:"auth",usePermissions:"auth",useRegister:"auth",useUpdatePassword:"auth"},li=Object.entries(da).reduce((e,[t,r])=>(e[r]||(e[r]=[]),e[r].push(t),e),{}),ft=ii(h("react"));async function ca(e,t,r){if(e.readyState!==e.OPEN){await new Promise(a=>{let n=()=>{e.send(JSON.stringify({event:t,payload:r})),a(),e.removeEventListener("open",n)};e.addEventListener("open",n)});return}else{e.send(JSON.stringify({event:t,payload:r}));return}}function ma(e,t,r){let a=n=>{let{event:i,payload:o}=JSON.parse(n.data);t===i&&r(o)};return e.addEventListener("message",a),()=>{e.removeEventListener("message",a)}}var va=ft.default.createContext({__devtools:!1,port:5002,url:"localhost",secure:!1,ws:null}),ui=({__devtools:e,port:t,children:r})=>{let[a,n]=ft.default.useState({__devtools:e??!1,port:t??5002,url:"localhost",secure:!1,ws:null}),[i,o]=ft.default.useState(null);ft.default.useEffect(()=>{let m=new WebSocket(`${a.secure?"wss":"ws"}://localhost:${a.port}`),d=ma(m,"devtools:handshake",c=>{n(v=>({...v,devtoolsUrl:c.url})),d()});return m.addEventListener("open",()=>{a.__devtools||ca(m,"devtools:init",{url:window.location.origin})}),o(m),()=>{d(),m.close(1e3,window.location.origin)}},[]);let l=ft.default.useMemo(()=>({...a,ws:i}),[a,i]);return ft.default.createElement(va.Provider,{value:l},r)}});var G=cr((Uu,ba)=>{var di=Object.create,zt=Object.defineProperty,ci=Object.getOwnPropertyDescriptor,mi=Object.getOwnPropertyNames,vi=Object.getPrototypeOf,pi=Object.prototype.hasOwnProperty,fi=(e,t)=>{for(var r in t)zt(e,r,{get:t[r],enumerable:!0})},fa=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of mi(t))!pi.call(e,n)&&n!==r&&zt(e,n,{get:()=>t[n],enumerable:!(a=ci(t,n))||a.enumerable});return e},ga=(e,t,r)=>(r=e!=null?di(vi(e)):{},fa(t||!e||!e.__esModule?zt(r,"default",{value:e,enumerable:!0}):r,e)),gi=e=>fa(zt({},"__esModule",{value:!0}),e),ya={};fi(ya,{getTrace:()=>Pa,getXRay:()=>Li,useQuerySubscription:()=>wi});ba.exports=gi(ya);var yi=ga(h("error-stack-parser")),hi="renderWithHooks",Pi=e=>{let t=e.findIndex(r=>r.functionName===hi);return t!==-1?e.slice(0,t):e},ha=/node_modules\/refinedev\/(?<name>.*?)\//,bi=e=>e?!!e.match(ha):!1,Ci=e=>{var t;if(!e)return;let r=e.match(ha),a=(t=r==null?void 0:r.groups)==null?void 0:t.name;if(a)return`@refinedev/${a}`};function Pa(){return[];try{let e=new Error,t=yi.default.parse(e);return Pi(t).map(r=>({file:r.fileName,line:r.lineNumber,column:r.columnNumber,function:r.functionName,isRefine:bi(r.fileName),packageName:Ci(r.fileName)})).filter(r=>r.function).slice(1)}catch{return[]}}var mr=Wt(),Ei=(e,t)=>{if(mr.scopes[e]==="auth")return null;if(e==="useCan")return t?"key[1].resource":"key[1]";if(mr.scopes[e]==="audit-log")return e==="useLog"?"variables.resource":"key[1]";if(mr.scopes[e]==="data"){if(e==="useCustom"||e==="useCustomMutation")return null;switch(e){case"useList":case"useInfiniteList":case"useOne":case"useMany":return t?"key[1]":"key[2]";case"useCreate":case"useCreateMany":case"useDelete":case"useDeleteMany":case"useUpdate":case"useUpdateMany":return"variables.resource"}}return null};function Li(e,t){return{hookName:"",trace:[],resourcePath:null,legacyKey:!1}}var Iu=Wt(),$u=ga(h("react")),Fu=Wt(),wi=()=>({})});var mt=cr((Ku,No)=>{var Si=Object.create,Dt=Object.defineProperty,Ni=Object.getOwnPropertyDescriptor,Di=Object.getOwnPropertyNames,xi=Object.getPrototypeOf,qi=Object.prototype.hasOwnProperty,s=(e,t)=>Dt(e,"name",{value:t,configurable:!0}),Mi=(e,t)=>{for(var r in t)Dt(e,r,{get:t[r],enumerable:!0})},yn=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Di(t))!qi.call(e,n)&&n!==r&&Dt(e,n,{get:()=>t[n],enumerable:!(a=Ni(t,n))||a.enumerable});return e},U=(e,t,r)=>(r=e!=null?Si(xi(e)):{},yn(t||!e||!e.__esModule?Dt(r,"default",{value:e,enumerable:!0}):r,e)),ki=e=>yn(Dt({},"__esModule",{value:!0}),e),hn={};Mi(hn,{AccessControlContext:()=>Tt,AuthPage:()=>au,Authenticated:()=>wo,CanAccess:()=>Eu,ErrorComponent:()=>Yl,GitHubBanner:()=>wu,KeyBuilder:()=>Ar,LayoutWrapper:()=>hu,LoginPage:()=>Co,ReadyPage:()=>Eo,Refine:()=>yu,ResourceContext:()=>qt,RouteChangeHandler:()=>So,TranslationContext:()=>dt,UndoableQueue:()=>Lo,WelcomePage:()=>ou,createTreeView:()=>zi,file2Base64:()=>ss,generateDefaultDocumentTitle:()=>_n,getDefaultFilter:()=>is,getDefaultSortOrder:()=>os,getNextPageParam:()=>Fn,getPreviousPageParam:()=>Un,handleUseParams:()=>Ai,importCSVMapper:()=>Cn,keys:()=>Ge,legacyResourceTransform:()=>Kn,matchResourceFromRoute:()=>Wi,parseTableParams:()=>Ur,parseTableParamsFromQuery:()=>ns,pickDataProvider:()=>B,pickNotDeprecated:()=>F,queryKeys:()=>Ii,routeGenerator:()=>On,setInitialFilters:()=>kr,setInitialSorters:()=>Tr,stringifyTableParams:()=>qr,unionFilters:()=>Nt,unionSorters:()=>Mr,useActiveAuthProvider:()=>le,useApiUrl:()=>As,useAuthenticated:()=>vs,useBack:()=>fo,useBreadcrumb:()=>Xl,useCan:()=>ho,useCanWithoutCache:()=>$l,useCancelNotification:()=>Ct,useCheckError:()=>ps,useCreate:()=>Br,useCreateMany:()=>Jn,useCustom:()=>Fs,useCustomMutation:()=>Qs,useDataProvider:()=>pe,useDelete:()=>xs,useDeleteMany:()=>Os,useExport:()=>yl,useForgotPassword:()=>zr,useForm:()=>bl,useGetIdentity:()=>Kr,useGetLocale:()=>pl,useGetToPath:()=>Gr,useGo:()=>ke,useHandleNotification:()=>Se,useImport:()=>Nl,useInfiniteList:()=>Vs,useInvalidate:()=>Ve,useIsAuthenticated:()=>tr,useIsExistAuthentication:()=>Gn,useLink:()=>rr,useList:()=>jr,useLiveMode:()=>co,useLoadingOvertime:()=>de,useLog:()=>ct,useLogList:()=>Vl,useLogin:()=>er,useLogout:()=>Gt,useMany:()=>Zn,useMenu:()=>Zl,useMeta:()=>oe,useModal:()=>Dl,useMutationMode:()=>bt,useNavigation:()=>Te,useNotification:()=>et,useOnError:()=>Pe,useOne:()=>Vr,useParse:()=>lo,useParsed:()=>Ue,usePermissions:()=>Xn,usePublish:()=>ut,useRedirectionAfterSubmission:()=>po,useRefineContext:()=>he,useRegister:()=>Wr,useResource:()=>H,useResourceSubscription:()=>kt,useResourceWithRoute:()=>uo,useRouterContext:()=>Ne,useRouterType:()=>ue,useSelect:()=>Kl,useSetLocale:()=>vl,useShow:()=>Ll,useSubscription:()=>il,useSyncWithLocation:()=>Vn,useTable:()=>Po,useTitle:()=>rs,useToPath:()=>ql,useTranslate:()=>ee,useUpdate:()=>Rr,useUpdateMany:()=>Ts,useUpdatePassword:()=>_r,useUserFriendlyName:()=>Fr,useWarnAboutChange:()=>$r,userFriendlyResourceName:()=>En});No.exports=ki(hn);var nt=U(h("react")),Ca=h("@tanstack/react-query"),Ea=G(),Or=U(h("qs")),Pn=U(h("lodash/unionWith")),bn=U(h("lodash/differenceWith")),Ti=U(h("warn-once")),vr=s(e=>e/1e3,"userFriendlySecond"),Ri=U(h("lodash/zip")),Oi=U(h("lodash/fromPairs")),Cn=s((e,t=r=>r)=>{let[r,...a]=e;return a.map(n=>(0,Oi.default)((0,Ri.default)(r,n))).map((n,i,o)=>t.call(void 0,n,i,o))},"importCSVMapper"),La=U(h("pluralize")),En=s((e="",t)=>{let r=An(e);return t==="singular"?La.default.singular(r):La.default.plural(r)},"userFriendlyResourceName"),Ai=s((e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,"handleUseParams"),F=s((...e)=>e.find(t=>typeof t<"u"),"pickNotDeprecated");function Ke(e,t){return e.findIndex((r,a)=>a<=e.length-t.length&&t.every((n,i)=>e[a+i]===n))}s(Ke,"arrayFindIndex");function Ln(e){if(e[0]==="data"){let t=e.slice(1);if(t[2]==="many")t[2]="getMany";else if(t[2]==="infinite")t[2]="list";else if(t[2]==="one")t[2]="detail";else if(t[1]==="custom"){let r={...t[2]};return delete r.method,delete r.url,[t[0],t[1],t[2].method,t[2].url,r]}return t}if(e[0]==="audit"&&e[2]==="list")return["logList",e[1],e[3]];if(e[0]==="access"&&e.length===4)return["useCan",{resource:e[1],action:e[2],...e[3]}];if(e[0]==="auth"){if(Ke(e,["auth","login"])!==-1)return["useLogin"];if(Ke(e,["auth","logout"])!==-1)return["useLogout"];if(Ke(e,["auth","identity"])!==-1)return["getUserIdentity"];if(Ke(e,["auth","register"])!==-1)return["useRegister"];if(Ke(e,["auth","forgotPassword"])!==-1)return["useForgotPassword"];if(Ke(e,["auth","check"])!==-1)return["useAuthenticated",e[2]];if(Ke(e,["auth","onError"])!==-1)return["useCheckError"];if(Ke(e,["auth","permissions"])!==-1)return["usePermissions"];if(Ke(e,["auth","updatePassword"])!==-1)return["useUpdatePassword"]}return e}s(Ln,"convertToLegacy");var we=class{constructor(e=[]){this.segments=[],this.segments=e}key(){return this.segments}legacy(){return Ln(this.segments)}get(e){return e?this.legacy():this.segments}};s(we,"BaseKeyBuilder");var je=class extends we{constructor(e){super(e)}params(e){return new we([...this.segments,e])}};s(je,"ParamsKeyBuilder");var wn=class extends we{constructor(e){super(e)}id(e){return new je([...this.segments,e?String(e):void 0])}};s(wn,"DataIdRequiringKeyBuilder");var Sn=class extends we{constructor(e){super(e)}ids(...e){return new je([...this.segments,...e.length?[e.map(t=>String(t))]:[]])}};s(Sn,"DataIdsRequiringKeyBuilder");var Nn=class extends we{constructor(e){super(e)}action(e){if(e==="one")return new wn([...this.segments,e]);if(e==="many")return new Sn([...this.segments,e]);if(["list","infinite"].includes(e))return new je([...this.segments,e]);throw new Error("Invalid action type")}};s(Nn,"DataResourceKeyBuilder");var Dn=class extends we{constructor(e){super(e)}resource(e){return new Nn([...this.segments,e])}mutation(e){return new je([...e==="custom"?this.segments:[this.segments[0]],e])}};s(Dn,"DataKeyBuilder");var xn=class extends we{constructor(e){super(e)}action(e){return new je([...this.segments,e])}};s(xn,"AuthKeyBuilder");var qn=class extends we{constructor(e){super(e)}action(e){return new je([...this.segments,e])}};s(qn,"AccessResourceKeyBuilder");var Mn=class extends we{constructor(e){super(e)}resource(e){return new qn([...this.segments,e])}};s(Mn,"AccessKeyBuilder");var kn=class extends we{constructor(e){super(e)}action(e){return new je([...this.segments,e])}};s(kn,"AuditActionKeyBuilder");var Tn=class extends we{constructor(e){super(e)}resource(e){return new kn([...this.segments,e])}action(e){return new je([...this.segments,e])}};s(Tn,"AuditKeyBuilder");var Ar=class extends we{constructor(e){super(e)}data(e){return new Dn(["data",e||"default"])}auth(){return new xn(["auth"])}access(){return new Mn(["access"])}audit(){return new Tn(["audit"])}};s(Ar,"KeyBuilder");var Ge=s(()=>new Ar([]),"keys"),Ii=s((e,t,r,a)=>{let n=t||"default",i={all:[n],resourceAll:[n,e||""],list:o=>[...i.resourceAll,"list",{...o,...F(r,a)||{}}],many:o=>[...i.resourceAll,"getMany",o&&o.map(String),{...F(r,a)||{}}].filter(l=>l!==void 0),detail:o=>[...i.resourceAll,"detail",o==null?void 0:o.toString(),{...F(r,a)||{}}],logList:o=>["logList",e,o,a].filter(l=>l!==void 0)};return i},"queryKeys"),Yt=s(e=>(t,r,a,n)=>{let i=r||"default";return{all:Ge().data(i).get(e),resourceAll:Ge().data(r).resource(t??"").get(e),list:o=>Ge().data(r).resource(t??"").action("list").params({...o,...F(a,n)||{}}).get(e),many:o=>Ge().data(r).resource(t??"").action("many").ids(...o??[]).params({...F(a,n)||{}}).get(e),detail:o=>Ge().data(r).resource(t??"").action("one").id(o??"").params({...F(a,n)||{}}).get(e),logList:o=>[...Ge().audit().resource(t).action("list").params(o).get(e),n].filter(l=>l!==void 0)}},"queryKeysReplacement"),$i=s((e,t)=>!e||!t?!1:!!e.find(r=>r===t),"hasPermission"),Ir=s(e=>e.startsWith(":"),"isParameter"),ht=s(e=>e.split("/").filter(t=>t!==""),"splitToSegments"),Fi=s((e,t)=>{let r=ht(e),a=ht(t);return r.length===a.length},"isSegmentCountsSame"),_e=s(e=>e.replace(/^\/|\/$/g,""),"removeLeadingTrailingSlashes"),Ui=s((e,t)=>{let r=_e(e),a=_e(t);if(!Fi(r,a))return!1;let n=ht(r);return ht(a).every((i,o)=>Ir(i)||i===n[o])},"checkBySegments"),Ki=s((e,t,r)=>{let a=_e(r||""),n=`${a}${a?"/":""}${e}`;return t==="list"?n=`${n}`:t==="create"?n=`${n}/create`:t==="edit"?n=`${n}/edit/:id`:t==="show"?n=`${n}/show/:id`:t==="clone"&&(n=`${n}/clone/:id`),`/${n.replace(/^\//,"")}`},"getDefaultActionPath"),Ye=s((e,t)=>{var r,a;let n=F((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);return n?t.find(i=>(i.identifier??i.name)===n)??{name:n}:void 0},"getParentResource"),Rn=s((e,t,r)=>{let a=[],n=Ye(e,t);for(;n;)a.push(n),n=Ye(n,t);if(a.length!==0)return`/${a.reverse().map(i=>{var o;let l=r?((o=i.options)==null?void 0:o.route)??i.name:i.name;return _e(l)}).join("/")}`},"getParentPrefixForResource"),Ee=s((e,t,r)=>{let a=[],n=["list","show","edit","create","clone"],i=Rn(e,t,r);return n.forEach(o=>{var l,m;let d=r&&o==="clone"?e.create:e[o],c;typeof d=="function"||r?c=Ki(r?((l=e.meta)==null?void 0:l.route)??((m=e.options)==null?void 0:m.route)??e.name:e.name,o,r?i:void 0):typeof d=="string"?c=d:typeof d=="object"&&(c=d.path),c&&a.push({action:o,resource:e,route:`/${c.replace(/^\//,"")}`})}),a},"getActionRoutesFromResource"),Qi=s(e=>{var t;if(e.length===0)return;if(e.length===1)return e[0];let r=e.map(i=>({...i,splitted:ht(_e(i.route))})),a=((t=r[0])==null?void 0:t.splitted.length)??0,n=[...r];for(let i=0;i<a;i++){let o=n.filter(l=>!Ir(l.splitted[i]));if(o.length!==0){if(o.length===1){n=o;break}n=o}}return n[0]},"pickMatchedRoute"),Wi=s((e,t)=>{let r=t.flatMap(n=>Ee(n,t)).filter(n=>Ui(e,n.route)),a=Qi(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},"matchResourceFromRoute"),On=s((e,t)=>{var r;let a,n=Rn(e,t,!0);if(n){let i=F(e.meta,e.options);a=`${n}/${(i==null?void 0:i.route)??e.name}`}else a=((r=e.options)==null?void 0:r.route)??e.name;return`/${a.replace(/^\//,"")}`},"routeGenerator"),zi=s(e=>{var t;let r=[],a={},n={},i,o;for(let l=0;l<e.length;l++){i=e[l];let m=i.route??((t=F(i==null?void 0:i.meta,i.options))==null?void 0:t.route)??"";a[m]=i,a[m].children=[],n[i.name]=i,n[i.name].children=[]}for(let l in a)a.hasOwnProperty(l)&&(o=a[l],o.parentName&&n[o.parentName]?n[o.parentName].children.push(o):r.push(o));return r},"createTreeView"),An=s(e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),"humanizeString"),In=U(h("react")),wa=U(h("pluralize")),_i=U(h("react")),$n=s(({children:e})=>_i.default.createElement("div",null,e),"DefaultLayout"),ye={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"},overtime:{interval:1e3},textTransformers:{humanize:An,plural:wa.default.plural,singular:wa.default.singular},disableServerSideValidation:!1},Je=In.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:$n,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:ye}),ji=s(({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:n,children:i,DashboardPage:o,Title:l,Layout:m=$n,Header:d,Sider:c,Footer:v,OffLayoutArea:L,LoginPage:u=Co,catchAll:p,liveMode:b="off",onLiveEvent:g,options:y})=>In.default.createElement(Je.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:l,undoableTimeout:n,Layout:m,Header:d,Sider:c,Footer:v,OffLayoutArea:L,DashboardPage:o,LoginPage:u,catchAll:p,liveMode:b,onLiveEvent:g,options:y}},i),"RefineContextProvider"),Vi=s(({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:n,reactQueryDevtoolConfig:i,syncWithLocation:o,undoableTimeout:l,warnWhenUnsavedChanges:m}={})=>{var d,c,v,L,u,p,b,g;let y={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(e==null?void 0:e.mutationMode)??a??ye.mutationMode,undoableTimeout:(e==null?void 0:e.undoableTimeout)??l??ye.undoableTimeout,syncWithLocation:(e==null?void 0:e.syncWithLocation)??o??ye.syncWithLocation,warnWhenUnsavedChanges:(e==null?void 0:e.warnWhenUnsavedChanges)??m??ye.warnWhenUnsavedChanges,liveMode:(e==null?void 0:e.liveMode)??r??ye.liveMode,redirect:{afterCreate:((d=e==null?void 0:e.redirect)==null?void 0:d.afterCreate)??ye.redirect.afterCreate,afterClone:((c=e==null?void 0:e.redirect)==null?void 0:c.afterClone)??ye.redirect.afterClone,afterEdit:((v=e==null?void 0:e.redirect)==null?void 0:v.afterEdit)??ye.redirect.afterEdit},overtime:(e==null?void 0:e.overtime)??ye.overtime,textTransformers:{humanize:((L=e==null?void 0:e.textTransformers)==null?void 0:L.humanize)??ye.textTransformers.humanize,plural:((u=e==null?void 0:e.textTransformers)==null?void 0:u.plural)??ye.textTransformers.plural,singular:((p=e==null?void 0:e.textTransformers)==null?void 0:p.singular)??ye.textTransformers.singular},disableServerSideValidation:(e==null?void 0:e.disableServerSideValidation)??ye.disableServerSideValidation,projectId:e==null?void 0:e.projectId,useNewQueryKeys:e==null?void 0:e.useNewQueryKeys},f=(e==null?void 0:e.disableTelemetry)??t??!1,C={clientConfig:((b=e==null?void 0:e.reactQuery)==null?void 0:b.clientConfig)??n??{},devtoolConfig:((g=e==null?void 0:e.reactQuery)==null?void 0:g.devtoolConfig)??i??{}};return{optionsWithDefaults:y,disableTelemetryWithDefault:f,reactQueryWithDefaults:C}},"handleRefineOptions"),Bi=s(({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},"redirectPage"),Sa=s(async(e,t,r)=>{let a=[];for(let[n,i]of e.entries())try{let o=await i();a.push(t(o,n))}catch(o){a.push(r(o,n))}return a},"sequentialPromises"),me=s((e,t=[],r=!1)=>{if(!e)return;if(r)return t.find(i=>_e(i.route??"")===_e(e))||t.find(i=>i.name===e);let a=t.find(n=>n.identifier===e);return a||(a=t.find(n=>n.name===e)),a},"pickResource"),B=s((e,t,r)=>{if(t)return t;let a=me(e,r),n=F(a==null?void 0:a.meta,a==null?void 0:a.options);return n!=null&&n.dataProviderName?n.dataProviderName:"default"},"pickDataProvider"),Jt=s(async e=>({data:(await Promise.all(e)).map(t=>t.data)}),"handleMultiple"),Fn=s(e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,i=Math.ceil((e.total||0)/n);return a<i?Number(a)+1:void 0},"getNextPageParam"),Un=s(e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},"getPreviousPageParam"),Kn=s(e=>{let t=[];return e.forEach(r=>{var a,n;t.push({...r,label:((a=r.meta)==null?void 0:a.label)??((n=r.options)==null?void 0:n.label),route:On(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},"legacyResourceTransform"),Hi=s(e=>ht(_e(e)).flatMap(t=>Ir(t)?[t.slice(1)]:[]),"pickRouteParams"),Xi=s((e,t={})=>e.reduce((r,a)=>{let n=t[a];return typeof n<"u"&&(r[a]=n),r},{}),"prepareRouteParams"),qe=s((e,t={},r={},a={})=>{let n=Hi(e),i=Xi(n,{...t,...typeof(r==null?void 0:r.id)<"u"?{id:r.id}:{},...typeof(r==null?void 0:r.action)<"u"?{action:r.action}:{},...typeof(r==null?void 0:r.resource)<"u"?{resource:r.resource}:{},...r==null?void 0:r.params,...a});return e.replace(/:([^\/]+)/g,(o,l)=>{let m=i[l];return typeof m<"u"?`${m}`:o})},"composeRoute"),Pt=U(h("react")),Qn=Pt.default.createContext({}),Gi=s(({children:e,isProvided:t,...r})=>{let{replace:a}=Te(),n=s(async m=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,m))}catch(c){return Promise.reject(c)}},"loginFunc"),i=s(async m=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,m))}catch(c){return Promise.reject(c)}},"registerFunc"),o=s(async m=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,m))}catch(c){return Promise.reject(c)}},"logoutFunc"),l=s(async m=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,m)),Promise.resolve()}catch(c){return c!=null&&c.redirectPath&&a(c.redirectPath),Promise.reject(c)}},"checkAuthFunc");return Pt.default.createElement(Qn.Provider,{value:{...r,login:n,logout:o,checkAuth:l,register:i,isProvided:t}},e)},"LegacyAuthContextProvider"),Wn=Pt.default.createContext({}),Zi=s(({children:e,isProvided:t,...r})=>{let a=s(async d=>{var c;try{return await((c=r.login)==null?void 0:c.call(r,d))}catch(v){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",v),Promise.reject(v)}},"handleLogin"),n=s(async d=>{var c;try{return await((c=r.register)==null?void 0:c.call(r,d))}catch(v){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",v),Promise.reject(v)}},"handleRegister"),i=s(async d=>{var c;try{return await((c=r.logout)==null?void 0:c.call(r,d))}catch(v){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",v),Promise.reject(v)}},"handleLogout"),o=s(async d=>{var c;try{let v=await((c=r.check)==null?void 0:c.call(r,d));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",v),Promise.reject(v)}},"handleCheck"),l=s(async d=>{var c;try{let v=await((c=r.forgotPassword)==null?void 0:c.call(r,d));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",v),Promise.reject(v)}},"handleForgotPassword"),m=s(async d=>{var c;try{let v=await((c=r.updatePassword)==null?void 0:c.call(r,d));return Promise.resolve(v)}catch(v){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",v),Promise.reject(v)}},"handleUpdatePassword");return Pt.default.createElement(Wn.Provider,{value:{...r,login:a,logout:i,check:o,register:n,forgotPassword:l,updatePassword:m,isProvided:t}},e)},"AuthBindingsContextProvider"),Me=s(()=>Pt.default.useContext(Qn),"useLegacyAuthContext"),Fe=s(()=>Pt.default.useContext(Wn),"useAuthBindingsContext"),le=s(()=>{let e=Me(),t=Fe();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},"useActiveAuthProvider"),zn=s(({hasPagination:e,pagination:t,configPagination:r}={})=>{let a=e===!1?"off":"server",n=(t==null?void 0:t.mode)??a,i=F(t==null?void 0:t.current,r==null?void 0:r.current)??1,o=F(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize)??10;return{current:i,pageSize:o,mode:n}},"handlePaginationParams"),Na=h("react"),Da=s(e=>{let[t,r]=(0,Na.useState)(!1);return(0,Na.useEffect)(()=>{let a=window.matchMedia(e);a.matches!==t&&r(a.matches);let n=s(()=>r(a.matches),"listener");return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t,e]),t},"useMediaQuery"),pr=s((e,t,r,a)=>{let n=a?e(t,a,r):e(t,r);return n===t||typeof n>"u"?r??t:n},"safeTranslate");function _n(e,t,r,a,n){var i;let o={create:"Create new ",clone:`#${a??""} Clone `,edit:`#${a??""} Edit `,show:`#${a??""} Show `,list:""},l=(t==null?void 0:t.identifier)??(t==null?void 0:t.name),m=(t==null?void 0:t.label)??((i=t==null?void 0:t.meta)==null?void 0:i.label)??En(l,r==="list"?"plural":"singular"),d=n??m,c=pr(e,"documentTitle.default","refine"),v=pr(e,"documentTitle.suffix"," | refine"),L=c;return r&&l&&(L=pr(e,`documentTitle.${l}.${r}`,`${o[r]??""}${d}${v}`,{id:a})),L}s(_n,"generateDefaultDocumentTitle");var Yi=h("react"),bt=s(()=>{let{mutationMode:e,undoableTimeout:t}=(0,Yi.useContext)(Je);return{mutationMode:e,undoableTimeout:t}},"useMutationMode"),xa=h("react"),xr=U(h("react")),jn=xr.default.createContext({}),Ji=s(({children:e})=>{let[t,r]=(0,xr.useState)(!1);return xr.default.createElement(jn.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},"UnsavedWarnContextProvider"),$r=s(()=>{let{warnWhenUnsavedChanges:e}=(0,xa.useContext)(Je),{warnWhen:t,setWarnWhen:r}=(0,xa.useContext)(jn);return{warnWhenUnsavedChanges:e,warnWhen:!!t,setWarnWhen:r??(()=>{})}},"useWarnAboutChange"),es=h("react"),Vn=s(()=>{let{syncWithLocation:e}=(0,es.useContext)(Je);return{syncWithLocation:e}},"useSyncWithLocation"),ts=h("react"),rs=s(()=>{let{Title:e}=(0,ts.useContext)(Je);return e},"useTitle"),as=h("react"),he=s(()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:i,hasDashboard:o,mutationMode:l,syncWithLocation:m,undoableTimeout:d,warnWhenUnsavedChanges:c,DashboardPage:v,LoginPage:L,catchAll:u,options:p}=(0,as.useContext)(Je);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:i,hasDashboard:o,mutationMode:l,syncWithLocation:m,undoableTimeout:d,warnWhenUnsavedChanges:c,DashboardPage:v,LoginPage:L,catchAll:u,options:p}},"useRefineContext"),Fr=s(()=>{let{options:{textTransformers:e}}=he();return s((t="",r)=>{let a=e.humanize(t);return r==="singular"?e.singular(a):e.plural(a)},"getFriendlyName")},"useUserFriendlyName"),Ur=s(e=>{let{current:t,pageSize:r,sorter:a,sorters:n,filters:i}=Or.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:F(n,a)??[],parsedFilters:i??[]}},"parseTableParams"),ns=s(e=>{let t=Or.default.stringify(e);return Ur(`/${t}`)},"parseTableParamsFromQuery"),qr=s(e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:n,filters:i,...o}=e;return Or.default.stringify({...o,...r||{},sorters:F(n,a),filters:i},t)},"stringifyTableParams"),Bn=s((e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,"compareFilters"),Hn=s((e,t)=>e.field==t.field,"compareSorters"),Nt=s((e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,Ti.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,Pn.default)(e,t,r,Bn).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),"unionFilters"),Mr=s((e,t)=>(0,Pn.default)(e,t,Hn).filter(r=>r.order!==void 0&&r.order!==null),"unionSorters"),kr=s((e,t)=>[...(0,bn.default)(t,e,Bn),...e],"setInitialFilters"),Tr=s((e,t)=>[...(0,bn.default)(t,e,Hn),...e],"setInitialSorters"),os=s((e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},"getDefaultSortOrder"),is=s((e,t,r="eq")=>{let a=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:i,field:o}=n;return o===e&&i===r}});if(a)return a.value||[]},"getDefaultFilter"),ss=s(e=>new Promise((t,r)=>{let a=new FileReader,n=s(()=>{a.result&&(a.removeEventListener("load",n,!1),t(a.result))},"resultHandler");a.addEventListener("load",n,!1),a.readAsDataURL(e.originFileObj),a.onerror=i=>(a.removeEventListener("load",n,!1),r(i))}),"file2Base64"),Z=s(()=>{let{options:{useNewQueryKeys:e}}=he();return{keys:Ge,preferLegacyKeys:!e}},"useKeys");function Xn({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=Me(),{getPermissions:a}=Fe(),{keys:n,preferLegacyKeys:i}=Z(),o=(0,Ca.useQuery)(n().auth().action("permissions").get(i),a??(()=>Promise.resolve(void 0)),{enabled:!e&&!!a,...e?{}:t,meta:{...e?{}:t==null?void 0:t.meta,...(0,Ea.getXRay)("usePermissions",i)}}),l=(0,Ca.useQuery)([...n().auth().action("permissions").get(i),"v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve(void 0)),{enabled:e&&!!r,...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Ea.getXRay)("usePermissions",i)}});return e?l:o}s(Xn,"usePermissions");var qa=h("@tanstack/react-query"),Ma=G();function Kr({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=Me(),{getIdentity:a}=Fe(),{keys:n,preferLegacyKeys:i}=Z(),o=(0,qa.useQuery)(n().auth().action("identity").get(i),a??(()=>Promise.resolve({})),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Ma.getXRay)("useGetIdentity",i)}}),l=(0,qa.useQuery)([...n().auth().action("identity").get(i),"v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve({})),{enabled:e&&!!r,retry:!1,...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Ma.getXRay)("useGetIdentity",i)}});return e?l:o}s(Kr,"useGetIdentity");var ka=h("@tanstack/react-query"),Ta=G(),ls=h("@tanstack/react-query"),Qr=s(()=>{let e=(0,ls.useQueryClient)(),{keys:t,preferLegacyKeys:r}=Z();return s(async()=>{await Promise.all(["check","identity","permissions"].map(a=>e.invalidateQueries(t().auth().action(a).get(r))))},"invalidate")},"useInvalidateAuthStore");function Gt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Qr(),a=ue(),n=ke(),{push:i}=Te(),{open:o,close:l}=et(),{logout:m}=Me(),{logout:d}=Fe(),{keys:c,preferLegacyKeys:v}=Z(),L=(0,ka.useMutation)(c().auth().action("logout").get(v),d,{onSuccess:async(p,b)=>{let{success:g,error:y,redirectTo:f}=p,{redirectPath:C}=b??{},D=C??f;g&&(l==null||l("useLogout-error")),(y||!g)&&(o==null||o(fr(y))),await r(),D!==!1&&(a==="legacy"?i(D??"/login"):D&&n({to:D}))},onError:p=>{o==null||o(fr(p))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Ta.getXRay)("useLogout",v)}}),u=(0,ka.useMutation)([...c().auth().action("logout").get(v),"v3LegacyAuthProviderCompatible"],m,{onSuccess:async(p,b)=>{let g=(b==null?void 0:b.redirectPath)??p;if(await r(),g!==!1){if(g){a==="legacy"?i(g):n({to:g});return}a==="legacy"?i("/login"):n({to:"/login"})}},onError:p=>{o==null||o(fr(p))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Ta.getXRay)("useLogout",v)}});return e?u:L}s(Gt,"useLogout");var fr=s(e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),"buildNotification"),us=U(h("react")),Ra=h("@tanstack/react-query"),Oa=G(),ds=U(h("qs"));function er({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Qr(),a=ue(),n=ke(),{replace:i}=Te(),o=Ue(),{useLocation:l}=Ne(),{search:m}=l(),{close:d,open:c}=et(),{login:v}=Me(),{login:L}=Fe(),{keys:u,preferLegacyKeys:p}=Z(),b=us.default.useMemo(()=>{var f;return a==="legacy"?ds.default.parse(m,{ignoreQueryPrefix:!0}).to:(f=o.params)==null?void 0:f.to},[a,o.params,m]),g=(0,Ra.useMutation)(u().auth().action("login").get(p),L,{onSuccess:async({success:f,redirectTo:C,error:D})=>{f&&(d==null||d("login-error")),(D||!f)&&(c==null||c(gr(D))),await r(),b&&f?a==="legacy"?i(b):n({to:b,type:"replace"}):C?a==="legacy"?i(C):n({to:C,type:"replace"}):a==="legacy"&&i("/")},onError:f=>{c==null||c(gr(f))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Oa.getXRay)("useLogin",p)}}),y=(0,Ra.useMutation)([...u().auth().action("login").get(p),"v3LegacyAuthProviderCompatible"],v,{onSuccess:async f=>{await r(),b&&i(b),f!==!1&&!b&&(typeof f=="string"?a==="legacy"?i(f):n({to:f,type:"replace"}):a==="legacy"?i("/"):n({to:"/",type:"replace"})),d==null||d("login-error")},onError:f=>{c==null||c(gr(f))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Oa.getXRay)("useLogin",p)}});return e?y:g}s(er,"useLogin");var gr=s(e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),"buildNotification"),Aa=h("@tanstack/react-query"),Ia=G();function Wr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=Qr(),a=ue(),n=ke(),{replace:i}=Te(),{register:o}=Me(),{register:l}=Fe(),{close:m,open:d}=et(),{keys:c,preferLegacyKeys:v}=Z(),L=(0,Aa.useMutation)(c().auth().action("register").get(v),l,{onSuccess:async({success:p,redirectTo:b,error:g})=>{p&&(m==null||m("register-error")),(g||!p)&&(d==null||d(yr(g))),await r(),b?a==="legacy"?i(b):n({to:b,type:"replace"}):a==="legacy"&&i("/")},onError:p=>{d==null||d(yr(p))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Ia.getXRay)("useRegister",v)}}),u=(0,Aa.useMutation)([...c().auth().action("register").get(v),"v3LegacyAuthProviderCompatible"],o,{onSuccess:async p=>{await r(),p!==!1&&(p?a==="legacy"?i(p):n({to:p,type:"replace"}):a==="legacy"?i("/"):n({to:"/",type:"replace"}),m==null||m("register-error"))},onError:p=>{d==null||d(yr(p))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Ia.getXRay)("useRegister",v)}});return e?u:L}s(Wr,"useRegister");var yr=s(e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),"buildNotification"),$a=h("@tanstack/react-query"),Fa=G();function zr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ue(),a=ke(),{replace:n}=Te(),{forgotPassword:i}=Me(),{forgotPassword:o}=Fe(),{close:l,open:m}=et(),{keys:d,preferLegacyKeys:c}=Z(),v=(0,$a.useMutation)(d().auth().action("forgotPassword").get(c),o,{onSuccess:({success:u,redirectTo:p,error:b})=>{u&&(l==null||l("forgot-password-error")),(b||!u)&&(m==null||m(hr(b))),p&&(r==="legacy"?n(p):a({to:p,type:"replace"}))},onError:u=>{m==null||m(hr(u))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Fa.getXRay)("useForgotPassword",c)}}),L=(0,$a.useMutation)([...d().auth().action("forgotPassword").get(c),"v3LegacyAuthProviderCompatible"],i,{onSuccess:u=>{u!==!1&&u&&(r==="legacy"?n(u):a({to:u,type:"replace"})),l==null||l("forgot-password-error")},onError:u=>{m==null||m(hr(u))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Fa.getXRay)("useForgotPassword",c)}});return e?L:v}s(zr,"useForgotPassword");var hr=s(e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),"buildNotification"),cs=U(h("react")),Ua=h("@tanstack/react-query"),Ka=G(),ms=U(h("qs"));function _r({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=ue(),a=ke(),{replace:n}=Te(),{updatePassword:i}=Me(),{updatePassword:o}=Fe(),{close:l,open:m}=et(),{keys:d,preferLegacyKeys:c}=Z(),v=Ue(),{useLocation:L}=Ne(),{search:u}=L(),p=cs.default.useMemo(()=>r==="legacy"?ms.default.parse(u,{ignoreQueryPrefix:!0})??{}:v.params??{},[u,v,r]),b=(0,Ua.useMutation)(d().auth().action("updatePassword").get(c),async y=>o==null?void 0:o({...p,...y}),{onSuccess:({success:y,redirectTo:f,error:C})=>{y&&(l==null||l("update-password-error")),(C||!y)&&(m==null||m(Pr(C))),f&&(r==="legacy"?n(f):a({to:f,type:"replace"}))},onError:y=>{m==null||m(Pr(y))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Ka.getXRay)("useUpdatePassword",c)}}),g=(0,Ua.useMutation)([...d().auth().action("updatePassword").get(c),"v3LegacyAuthProviderCompatible"],async y=>i==null?void 0:i({...p,...y}),{onSuccess:y=>{y!==!1&&y&&(r==="legacy"?n(y):a({to:y,type:"replace"})),l==null||l("update-password-error")},onError:y=>{m==null||m(Pr(y))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Ka.getXRay)("useUpdatePassword",c)}});return e?g:b}s(_r,"useUpdatePassword");var Pr=s(e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),"buildNotification"),Qa=h("@tanstack/react-query"),Wa=G();function tr({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=Me(),{check:a}=Fe(),{keys:n,preferLegacyKeys:i}=Z(),o=(0,Qa.useQuery)(n().auth().action("check").params(t).get(i),async()=>await(a==null?void 0:a(t))??{},{retry:!1,enabled:!e,meta:{...(0,Wa.getXRay)("useIsAuthenticated",i)}}),l=(0,Qa.useQuery)([...n().auth().action("check").params(t).get(i),"v3LegacyAuthProviderCompatible"],async()=>await(r==null?void 0:r(t))??{},{retry:!1,enabled:e,meta:{...(0,Wa.getXRay)("useIsAuthenticated",i)}});return e?l:o}s(tr,"useIsAuthenticated");var vs=tr,za=h("@tanstack/react-query"),_a=G();function Pe({v3LegacyAuthProviderCompatible:e=!1}={}){let t=ue(),r=ke(),{replace:a}=Te(),{checkError:n}=Me(),{onError:i}=Fe(),{keys:o,preferLegacyKeys:l}=Z(),{mutate:m}=Gt({v3LegacyAuthProviderCompatible:!!e}),{mutate:d}=Gt({v3LegacyAuthProviderCompatible:!!e}),c=(0,za.useMutation)(o().auth().action("onError").get(l),i,{onSuccess:({logout:L,redirectTo:u})=>{if(L){d({redirectPath:u});return}if(u){t==="legacy"?a(u):r({to:u,type:"replace"});return}},meta:{...(0,_a.getXRay)("useOnError",l)}}),v=(0,za.useMutation)([...o().auth().action("onError").get(l),"v3LegacyAuthProviderCompatible"],n,{onError:L=>{m({redirectPath:L})},meta:{...(0,_a.getXRay)("useOnError",l)}});return e?v:c}s(Pe,"useOnError");var ps=Pe,Gn=s(()=>{let{isProvided:e}=Me(),{isProvided:t}=Fe();return!!(t||e)},"useIsExistAuthentication"),fs=h("@tanstack/react-query"),gs=G(),br=h("react"),de=s(({isLoading:e,interval:t,onInterval:r})=>{let[a,n]=(0,br.useState)(void 0),{options:i}=he(),{overtime:o}=i,l=t??o.interval,m=r??(o==null?void 0:o.onInterval);return(0,br.useEffect)(()=>{let d;return e&&(d=setInterval(()=>{n(c=>c===void 0?l:c+l)},l)),()=>{clearInterval(d),n(void 0)}},[e,l]),(0,br.useEffect)(()=>{m&&a&&m(a)},[a]),{elapsedTime:a}},"useLoadingOvertime"),jr=s(({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:i,queryOptions:o,successNotification:l,errorNotification:m,meta:d,metaData:c,liveMode:v,onLiveEvent:L,liveParams:u,dataProviderName:p,overtimeOptions:b})=>{let{resources:g,resource:y,identifier:f}=H(e),C=pe(),D=ee(),$=le(),{mutate:E}=Pe({v3LegacyAuthProviderCompatible:!!($!=null&&$.isLegacy)}),P=Se(),x=oe(),{keys:w,preferLegacyKeys:q}=Z(),T=B(f,p,g),N=F(d,c),S=F(r,t==null?void 0:t.filters),R=F(i,t==null?void 0:t.sort),M=F(a,t==null?void 0:t.hasPagination),A=zn({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:M}),k=A.mode==="server",I=x({resource:y,meta:N}),_={meta:I,metaData:I,filters:S,hasPagination:k,pagination:A,sorters:R,config:{...t,sort:R}},O=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,{getList:j}=C(T);kt({resource:f,types:["*"],params:{meta:I,metaData:I,pagination:A,hasPagination:k,sort:R,sorters:R,filters:S,subscriptionType:"useList",...u},channel:`resources/${y==null?void 0:y.name}`,enabled:O,liveMode:v,onLiveEvent:L});let W=(0,fs.useQuery)(w().data(T).resource(f??"").action("list").params({...N||{},filters:S,hasPagination:k,...k&&{pagination:A},...i&&{sorters:i},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}).get(q),({queryKey:K,pageParam:Q,signal:z})=>j({resource:(y==null?void 0:y.name)??"",pagination:A,hasPagination:k,filters:S,sort:R,sorters:R,meta:{...I,queryContext:{queryKey:K,pageParam:Q,signal:z}},metaData:{...I,queryContext:{queryKey:K,pageParam:Q,signal:z}}}),{...o,enabled:typeof(o==null?void 0:o.enabled)<"u"?o==null?void 0:o.enabled:!!(y!=null&&y.name),select:K=>{var Q;let z=K,{current:ce,mode:ve,pageSize:De}=A;return ve==="client"&&(z={...z,data:z.data.slice((ce-1)*De,ce*De),total:z.total}),o!=null&&o.select?(Q=o==null?void 0:o.select)==null?void 0:Q.call(o,z):z},onSuccess:K=>{var Q;(Q=o==null?void 0:o.onSuccess)==null||Q.call(o,K);let z=typeof l=="function"?l(K,_,f):l;P(z)},onError:K=>{var Q;E(K),(Q=o==null?void 0:o.onError)==null||Q.call(o,K);let z=typeof m=="function"?m(K,_,f):m;P(z,{key:`${f}-useList-notification`,message:D("notifications.error",{statusCode:K.statusCode},`Error (status code: ${K.statusCode})`),description:K.message,type:"error"})},meta:{...o==null?void 0:o.meta,...(0,gs.getXRay)("useList",q)}}),{elapsedTime:V}=de({isLoading:W.isFetching,interval:b==null?void 0:b.interval,onInterval:b==null?void 0:b.onInterval});return{...W,overtime:{elapsedTime:V}}},"useList"),ys=h("@tanstack/react-query"),hs=G(),Vr=s(({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:n,meta:i,metaData:o,liveMode:l,onLiveEvent:m,liveParams:d,dataProviderName:c,overtimeOptions:v})=>{let{resources:L,resource:u,identifier:p}=H(e),b=pe(),g=ee(),y=le(),{mutate:f}=Pe({v3LegacyAuthProviderCompatible:!!(y!=null&&y.isLegacy)}),C=Se(),D=oe(),{keys:$,preferLegacyKeys:E}=Z(),P=F(i,o),x=B(p,c,L),{getOne:w}=b(x),q=D({resource:u,meta:P});kt({resource:p,types:["*"],channel:`resources/${u==null?void 0:u.name}`,params:{ids:t?[t]:[],id:t,meta:q,metaData:q,subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof(u==null?void 0:u.name)<"u"&&typeof t<"u",liveMode:l,onLiveEvent:m});let T=(0,ys.useQuery)($().data(x).resource(p??"").action("one").id(t??"").params({...P||{}}).get(E),({queryKey:S,pageParam:R,signal:M})=>w({resource:(u==null?void 0:u.name)??"",id:t,meta:{...q,queryContext:{queryKey:S,pageParam:R,signal:M}},metaData:{...q,queryContext:{queryKey:S,pageParam:R,signal:M}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:S=>{var R;(R=r==null?void 0:r.onSuccess)==null||R.call(r,S);let M=typeof a=="function"?a(S,{id:t,...q},p):a;C(M)},onError:S=>{var R;f(S),(R=r==null?void 0:r.onError)==null||R.call(r,S);let M=typeof n=="function"?n(S,{id:t,...q},p):n;C(M,{key:`${t}-${p}-getOne-notification`,message:g("notifications.error",{statusCode:S.statusCode},`Error (status code: ${S.statusCode})`),description:S.message,type:"error"})},meta:{...r==null?void 0:r.meta,...(0,hs.getXRay)("useOne",E)}}),{elapsedTime:N}=de({isLoading:T.isFetching,interval:v==null?void 0:v.interval,onInterval:v==null?void 0:v.onInterval});return{...T,overtime:{elapsedTime:N}}},"useOne"),Ps=h("@tanstack/react-query"),bs=G(),Zn=s(({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:n,meta:i,metaData:o,liveMode:l,onLiveEvent:m,liveParams:d,dataProviderName:c,overtimeOptions:v})=>{let{resources:L,resource:u,identifier:p}=H(e),b=pe(),g=ee(),y=le(),{mutate:f}=Pe({v3LegacyAuthProviderCompatible:!!(y!=null&&y.isLegacy)}),C=Se(),D=oe(),{keys:$,preferLegacyKeys:E}=Z(),P=F(i,o),x=B(p,c,L),w=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0,{getMany:q,getOne:T}=b(x),N=D({resource:u,meta:P});kt({resource:p,types:["*"],params:{ids:t,meta:N,metaData:N,subscriptionType:"useMany",...d},channel:`resources/${u.name}`,enabled:w,liveMode:l,onLiveEvent:m});let S=(0,Ps.useQuery)($().data(x).resource(p).action("many").ids(...t).params({...P||{}}).get(E),({queryKey:M,pageParam:A,signal:k})=>q?q({resource:u==null?void 0:u.name,ids:t,meta:{...N,queryContext:{queryKey:M,pageParam:A,signal:k}},metaData:{...N,queryContext:{queryKey:M,pageParam:A,signal:k}}}):Jt(t.map(I=>T({resource:u==null?void 0:u.name,id:I,meta:{...N,queryContext:{queryKey:M,pageParam:A,signal:k}},metaData:{...N,queryContext:{queryKey:M,pageParam:A,signal:k}}}))),{...r,onSuccess:M=>{var A;(A=r==null?void 0:r.onSuccess)==null||A.call(r,M);let k=typeof a=="function"?a(M,t,p):a;C(k)},onError:M=>{var A;f(M),(A=r==null?void 0:r.onError)==null||A.call(r,M);let k=typeof n=="function"?n(M,t,p):n;C(k,{key:`${t[0]}-${p}-getMany-notification`,message:g("notifications.error",{statusCode:M.statusCode},`Error (status code: ${M.statusCode})`),description:M.message,type:"error"})},meta:{...r==null?void 0:r.meta,...(0,bs.getXRay)("useMany",E)}}),{elapsedTime:R}=de({isLoading:S.isFetching,interval:v==null?void 0:v.interval,onInterval:v==null?void 0:v.onInterval});return{...S,overtime:{elapsedTime:R}}},"useMany"),ja=h("@tanstack/react-query"),Cs=G(),Ht=U(h("react")),Cr=U(h("lodash/isEqual")),Yn=Ht.default.createContext({notifications:[],notificationDispatch:()=>!1}),Es=[],Ls=s((e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,Cr.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,Cr.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,Cr.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},"undoableQueueReducer"),ws=s(({children:e})=>{let[t,r]=(0,Ht.useReducer)(Ls,Es),a={notifications:t,notificationDispatch:r};return Ht.default.createElement(Yn.Provider,{value:a},e,typeof window<"u"&&t.map(n=>Ht.default.createElement(Lo,{key:`${n.id}-${n.resource}-queue`,notification:n})))},"UndoableQueueContextProvider"),Rr=s(({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:a}=H(),n=(0,ja.useQueryClient)(),i=pe(),{mutationMode:o,undoableTimeout:l}=bt(),m=ee(),d=le(),{mutate:c}=Pe({v3LegacyAuthProviderCompatible:!!(d!=null&&d.isLegacy)}),v=ut(),{log:L}=ct(),{notificationDispatch:u}=Ct(),p=Se(),b=Ve(),g=oe(),{options:{textTransformers:y}}=he(),{keys:f,preferLegacyKeys:C}=Z(),D=(0,ja.useMutation)(({id:E,values:P,resource:x,mutationMode:w,undoableTimeout:q,onCancel:T,meta:N,metaData:S,dataProviderName:R})=>{let{resource:M,identifier:A}=a(x),k=g({resource:M,meta:F(N,S)}),I=w??o,_=q??l;return I!=="undoable"?i(B(A,R,r)).update({resource:M.name,id:E,variables:P,meta:k,metaData:k}):new Promise((O,j)=>{let W=s(()=>{i(B(A,R,r)).update({resource:M.name,id:E,variables:P,meta:k,metaData:k}).then(K=>O(K)).catch(K=>j(K))},"doMutation"),V=s(()=>{j({message:"mutationCancelled"})},"cancelMutation");T&&T(V),u({type:"ADD",payload:{id:E,resource:A,cancelMutation:V,doMutation:W,seconds:_,isSilent:!!T}})})},{onMutate:async({resource:E,id:P,mutationMode:x,values:w,dataProviderName:q,meta:T,metaData:N,optimisticUpdateMap:S={list:!0,many:!0,detail:!0}})=>{let{identifier:R}=a(E),M=F(T,N),A=Yt(C)(R,B(R,q,r),M),k=f().data(B(R,q,r)).resource(R),I=n.getQueriesData(k.get(C)),_=x??o;return await n.cancelQueries(k.get(C),void 0,{silent:!0}),_!=="pessimistic"&&(S.list&&n.setQueriesData(k.action("list").params(M??{}).get(C),O=>{if(typeof S.list=="function")return S.list(O,w,P);if(!O)return null;let j=O.data.map(W=>{var V;return((V=W.id)==null?void 0:V.toString())===(P==null?void 0:P.toString())?{id:P,...W,...w}:W});return{...O,data:j}}),S.many&&n.setQueriesData(k.action("many").get(C),O=>{if(typeof S.many=="function")return S.many(O,w,P);if(!O)return null;let j=O.data.map(W=>{var V;return((V=W.id)==null?void 0:V.toString())===(P==null?void 0:P.toString())&&(W={id:P,...W,...w}),W});return{...O,data:j}}),S.detail&&n.setQueriesData(k.action("one").id(P).params(M??{}).get(C),O=>typeof S.detail=="function"?S.detail(O,w,P):O?{...O,data:{...O.data,...w}}:null)),{previousQueries:I,queryKey:A}},onSettled:(E,P,{id:x,resource:w,dataProviderName:q,invalidates:T=["list","many","detail"]})=>{let{identifier:N}=a(w);b({resource:N,dataProviderName:B(N,q,r),invalidates:T,id:x}),u({type:"REMOVE",payload:{id:x,resource:N}})},onSuccess:(E,{id:P,resource:x,successNotification:w,dataProviderName:q,values:T,meta:N,metaData:S},R)=>{var M;let{resource:A,identifier:k}=a(x),I=y.singular(k),_=typeof w=="function"?w(E,{id:P,values:T},k):w;p(_,{key:`${P}-${k}-notification`,description:m("notifications.success","Successful"),message:m("notifications.editSuccess",{resource:m(`${k}.${k}`,I)},`Successfully updated ${I}`),type:"success"}),v==null||v({channel:`resources/${A.name}`,type:"updated",payload:{ids:(M=E.data)!=null&&M.id?[E.data.id]:void 0},date:new Date});let O;if(R){let Q=n.getQueryData(R.queryKey.detail(P));O=Object.keys(T||{}).reduce((z,ce)=>{var ve;return z[ce]=(ve=Q==null?void 0:Q.data)==null?void 0:ve[ce],z},{})}let{fields:j,operation:W,variables:V,...K}=F(N,S)||{};L==null||L.mutate({action:"update",resource:A.name,data:T,previousData:O,meta:{id:P,dataProviderName:B(k,q,r),...K}})},onError:(E,{id:P,resource:x,errorNotification:w,values:q},T)=>{let{identifier:N}=a(x);if(T)for(let S of T.previousQueries)n.setQueryData(S[0],S[1]);if(E.message!=="mutationCancelled"){c==null||c(E);let S=y.singular(N),R=typeof w=="function"?w(E,{id:P,values:q},N):w;p(R,{key:`${P}-${N}-notification`,message:m("notifications.editError",{resource:m(`${N}.${N}`,S),statusCode:E.statusCode},`Error when updating ${S} (status code: ${E.statusCode})`),description:E.message,type:"error"})}},mutationKey:f().data().mutation("update").get(C),...e,meta:{...e==null?void 0:e.meta,...(0,Cs.getXRay)("useUpdate",C)}}),{elapsedTime:$}=de({isLoading:D.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...D,overtime:{elapsedTime:$}}},"useUpdate"),Ss=h("@tanstack/react-query"),Ns=G(),Br=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=le(),{mutate:a}=Pe({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=pe(),i=Ve(),{resources:o,select:l}=H(),m=ee(),d=ut(),{log:c}=ct(),v=Se(),L=oe(),{options:{textTransformers:u}}=he(),{keys:p,preferLegacyKeys:b}=Z(),g=(0,Ss.useMutation)(({resource:f,values:C,meta:D,metaData:$,dataProviderName:E})=>{let{resource:P,identifier:x}=l(f),w=L({resource:P,meta:F(D,$)});return n(B(x,E,o)).create({resource:P.name,variables:C,meta:w,metaData:w})},{onSuccess:(f,{resource:C,successNotification:D,dataProviderName:$,invalidates:E=["list","many"],values:P,meta:x,metaData:w})=>{var q,T;let{resource:N,identifier:S}=l(C),R=u.singular(S),M=typeof D=="function"?D(f,P,S):D;v(M,{key:`create-${S}-notification`,message:m("notifications.createSuccess",{resource:m(`${S}.${S}`,R)},`Successfully created ${R}`),description:m("notifications.success","Success"),type:"success"}),i({resource:S,dataProviderName:B(S,$,o),invalidates:E}),d==null||d({channel:`resources/${N.name}`,type:"created",payload:{ids:(q=f==null?void 0:f.data)!=null&&q.id?[f.data.id]:void 0},date:new Date});let A=L({resource:N,meta:F(x,w)}),{fields:k,operation:I,variables:_,...O}=A||{};c==null||c.mutate({action:"create",resource:N.name,data:P,meta:{dataProviderName:B(S,$,o),id:((T=f==null?void 0:f.data)==null?void 0:T.id)??void 0,...O}})},onError:(f,{resource:C,errorNotification:D,values:$})=>{a(f);let{identifier:E}=l(C),P=u.singular(E),x=typeof D=="function"?D(f,$,E):D;v(x,{key:`create-${E}-notification`,description:f.message,message:m("notifications.createError",{resource:m(`${E}.${E}`,P),statusCode:f.statusCode},`There was an error creating ${P} (status code: ${f.statusCode})`),type:"error"})},mutationKey:p().data().mutation("create").get(b),...e,meta:{...e==null?void 0:e.meta,...(0,Ns.getXRay)("useCreate",b)}}),{elapsedTime:y}=de({isLoading:g.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...g,overtime:{elapsedTime:y}}},"useCreate"),Va=h("@tanstack/react-query"),Ds=G(),xs=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=le(),{mutate:a}=Pe({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=pe(),{resources:i,select:o}=H(),l=(0,Va.useQueryClient)(),{mutationMode:m,undoableTimeout:d}=bt(),{notificationDispatch:c}=Ct(),v=ee(),L=ut(),{log:u}=ct(),p=Se(),b=Ve(),g=oe(),{options:{textTransformers:y}}=he(),{keys:f,preferLegacyKeys:C}=Z(),D=(0,Va.useMutation)(({id:E,mutationMode:P,undoableTimeout:x,resource:w,onCancel:q,meta:T,metaData:N,dataProviderName:S,values:R})=>{let{resource:M,identifier:A}=o(w),k=g({resource:M,meta:F(T,N)}),I=P??m,_=x??d;return I!=="undoable"?n(B(A,S,i)).deleteOne({resource:M.name,id:E,meta:k,metaData:k,variables:R}):new Promise((O,j)=>{let W=s(()=>{n(B(A,S,i)).deleteOne({resource:M.name,id:E,meta:k,metaData:k,variables:R}).then(K=>O(K)).catch(K=>j(K))},"doMutation"),V=s(()=>{j({message:"mutationCancelled"})},"cancelMutation");q&&q(V),c({type:"ADD",payload:{id:E,resource:A,cancelMutation:V,doMutation:W,seconds:_,isSilent:!!q}})})},{onMutate:async({id:E,resource:P,mutationMode:x,dataProviderName:w,meta:q,metaData:T})=>{let{identifier:N}=o(P),S=F(q,T),R=Yt(C)(N,B(N,w,i),S),M=f().data(B(N,w,i)).resource(N),A=x??m;await l.cancelQueries(M.get(C),void 0,{silent:!0});let k=l.getQueriesData(M.get(C));return A!=="pessimistic"&&(l.setQueriesData(M.action("list").params(S??{}).get(C),I=>I?{data:I.data.filter(_=>{var O;return((O=_.id)==null?void 0:O.toString())!==E.toString()}),total:I.total-1}:null),l.setQueriesData(M.action("many").get(C),I=>{if(!I)return null;let _=I.data.filter(O=>{var j;return((j=O.id)==null?void 0:j.toString())!==(E==null?void 0:E.toString())});return{...I,data:_}})),{previousQueries:k,queryKey:R}},onSettled:(E,P,{id:x,resource:w,dataProviderName:q,invalidates:T=["list","many"]})=>{let{identifier:N}=o(w);b({resource:N,dataProviderName:B(N,q,i),invalidates:T}),c({type:"REMOVE",payload:{id:x,resource:N}})},onSuccess:(E,{id:P,resource:x,successNotification:w,dataProviderName:q,meta:T,metaData:N},S)=>{let{resource:R,identifier:M}=o(x),A=y.singular(M);l.removeQueries(S==null?void 0:S.queryKey.detail(P));let k=typeof w=="function"?w(E,P,M):w;p(k,{key:`${P}-${M}-notification`,description:v("notifications.success","Success"),message:v("notifications.deleteSuccess",{resource:v(`${M}.${M}`,A)},`Successfully deleted a ${A}`),type:"success"}),L==null||L({channel:`resources/${R.name}`,type:"deleted",payload:{ids:[P]},date:new Date});let I=g({resource:R,meta:F(T,N)}),{fields:_,operation:O,variables:j,...W}=I||{};u==null||u.mutate({action:"delete",resource:R.name,meta:{id:P,dataProviderName:B(M,q,i),...W}}),l.removeQueries(S==null?void 0:S.queryKey.detail(P))},onError:(E,{id:P,resource:x,errorNotification:w},q)=>{let{identifier:T}=o(x);if(q)for(let N of q.previousQueries)l.setQueryData(N[0],N[1]);if(E.message!=="mutationCancelled"){a(E);let N=y.singular(T),S=typeof w=="function"?w(E,P,T):w;p(S,{key:`${P}-${T}-notification`,message:v("notifications.deleteError",{resource:N,statusCode:E.statusCode},`Error (status code: ${E.statusCode})`),description:E.message,type:"error"})}},mutationKey:f().data().mutation("delete").get(C),...e,meta:{...e==null?void 0:e.meta,...(0,Ds.getXRay)("useDelete",C)}}),{elapsedTime:$}=de({isLoading:D.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...D,overtime:{elapsedTime:$}}},"useDelete"),qs=h("@tanstack/react-query"),Ms=G(),Jn=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=pe(),{resources:a,select:n}=H(),i=ee(),o=ut(),l=Se(),m=Ve(),{log:d}=ct(),c=oe(),{options:{textTransformers:v}}=he(),{keys:L,preferLegacyKeys:u}=Z(),p=(0,qs.useMutation)(({resource:g,values:y,meta:f,metaData:C,dataProviderName:D})=>{let{resource:$,identifier:E}=n(g),P=c({resource:$,meta:F(f,C)}),x=r(B(E,D,a));return x.createMany?x.createMany({resource:$.name,variables:y,meta:P,metaData:P}):Jt(y.map(w=>x.create({resource:$.name,variables:w,meta:P,metaData:P})))},{onSuccess:(g,{resource:y,successNotification:f,dataProviderName:C,invalidates:D=["list","many"],values:$,meta:E,metaData:P})=>{let{resource:x,identifier:w}=n(y),q=v.plural(w),T=typeof f=="function"?f(g,$,w):f;l(T,{key:`createMany-${w}-notification`,message:i("notifications.createSuccess",{resource:i(`${w}.${w}`,w)},`Successfully created ${q}`),description:i("notifications.success","Success"),type:"success"}),m({resource:w,dataProviderName:B(w,C,a),invalidates:D});let N=g==null?void 0:g.data.filter(I=>(I==null?void 0:I.id)!==void 0).map(I=>I.id);o==null||o({channel:`resources/${x.name}`,type:"created",payload:{ids:N},date:new Date});let S=c({resource:x,meta:F(E,P)}),{fields:R,operation:M,variables:A,...k}=S||{};d==null||d.mutate({action:"createMany",resource:x.name,data:$,meta:{dataProviderName:B(w,C,a),ids:N,...k}})},onError:(g,{resource:y,errorNotification:f,values:C})=>{let{identifier:D}=n(y),$=typeof f=="function"?f(g,C,D):f;l($,{key:`createMany-${D}-notification`,description:g.message,message:i("notifications.createError",{resource:i(`${D}.${D}`,D),statusCode:g.statusCode},`There was an error creating ${D} (status code: ${g.statusCode}`),type:"error"})},mutationKey:L().data().mutation("createMany").get(u),...e,meta:{...e==null?void 0:e.meta,...(0,Ms.getXRay)("useCreateMany",u)}}),{elapsedTime:b}=de({isLoading:p.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...p,overtime:{elapsedTime:b}}},"useCreateMany"),Ba=h("@tanstack/react-query"),ks=G(),Ts=s(({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:a}=H(),n=(0,Ba.useQueryClient)(),i=pe(),o=ee(),{mutationMode:l,undoableTimeout:m}=bt(),d=le(),{mutate:c}=Pe({v3LegacyAuthProviderCompatible:!!(d!=null&&d.isLegacy)}),{notificationDispatch:v}=Ct(),L=ut(),u=Se(),p=Ve(),{log:b}=ct(),g=oe(),{options:{textTransformers:y}}=he(),{keys:f,preferLegacyKeys:C}=Z(),D=(0,Ba.useMutation)(({ids:E,values:P,resource:x,onCancel:w,mutationMode:q,undoableTimeout:T,meta:N,metaData:S,dataProviderName:R})=>{let{resource:M,identifier:A}=a(x),k=g({resource:M,meta:F(N,S)}),I=q??l,_=T??m,O=i(B(A,R,r)),j=s(()=>O.updateMany?O.updateMany({resource:M.name,ids:E,variables:P,meta:k,metaData:k}):Jt(E.map(W=>O.update({resource:M.name,id:W,variables:P,meta:k,metaData:k}))),"mutationFn");return I!=="undoable"?j():new Promise((W,V)=>{let K=s(()=>{j().then(z=>W(z)).catch(z=>V(z))},"doMutation"),Q=s(()=>{V({message:"mutationCancelled"})},"cancelMutation");w&&w(Q),v({type:"ADD",payload:{id:E,resource:A,cancelMutation:Q,doMutation:K,seconds:_,isSilent:!!w}})})},{onMutate:async({resource:E,ids:P,values:x,mutationMode:w,dataProviderName:q,meta:T,metaData:N,optimisticUpdateMap:S={list:!0,many:!0,detail:!0}})=>{let{identifier:R}=a(E),M=F(T,N),A=Yt(C)(R,B(R,q,r),F(T,N)),k=f().data(B(R,q,r)).resource(R),I=w??l;await n.cancelQueries(k.get(C),void 0,{silent:!0});let _=n.getQueriesData(k.get(C));if(I!=="pessimistic"&&(S.list&&n.setQueriesData(k.action("list").params(M??{}).get(C),O=>{if(typeof S.list=="function")return S.list(O,x,P);if(!O)return null;let j=O.data.map(W=>W.id!==void 0&&P.filter(V=>V!==void 0).map(String).includes(W.id.toString())?{...W,...x}:W);return{...O,data:j}}),S.many&&n.setQueriesData(k.action("many").get(C),O=>{if(typeof S.many=="function")return S.many(O,x,P);if(!O)return null;let j=O.data.map(W=>W.id!==void 0&&P.filter(V=>V!==void 0).map(String).includes(W.id.toString())?{...W,...x}:W);return{...O,data:j}}),S.detail))for(let O of P)n.setQueriesData(k.action("one").id(O).params(M??{}).get(C),j=>{if(typeof S.detail=="function")return S.detail(j,x,O);if(!j)return null;let W={...j.data,...x};return{...j,data:W}});return{previousQueries:_,queryKey:A}},onSettled:(E,P,{ids:x,resource:w,dataProviderName:q})=>{let{identifier:T}=a(w);p({resource:T,invalidates:["list","many"],dataProviderName:B(T,q,r)}),x.forEach(N=>p({resource:T,invalidates:["detail"],dataProviderName:B(T,q,r),id:N})),v({type:"REMOVE",payload:{id:x,resource:T}})},onSuccess:(E,{ids:P,resource:x,meta:w,metaData:q,dataProviderName:T,successNotification:N,values:S},R)=>{let{resource:M,identifier:A}=a(x),k=y.singular(A),I=typeof N=="function"?N(E,{ids:P,values:S},A):N;u(I,{key:`${P}-${A}-notification`,description:o("notifications.success","Successful"),message:o("notifications.editSuccess",{resource:o(`${A}.${A}`,A)},`Successfully updated ${k}`),type:"success"}),L==null||L({channel:`resources/${M.name}`,type:"updated",payload:{ids:P.map(String)},date:new Date});let _=[];R&&P.forEach(Q=>{let z=n.getQueryData(R.queryKey.detail(Q));_.push(Object.keys(S||{}).reduce((ce,ve)=>{var De;return ce[ve]=(De=z==null?void 0:z.data)==null?void 0:De[ve],ce},{}))});let O=g({resource:M,meta:F(w,q)}),{fields:j,operation:W,variables:V,...K}=O||{};b==null||b.mutate({action:"updateMany",resource:M.name,data:S,previousData:_,meta:{ids:P,dataProviderName:B(A,T,r),...K}})},onError:(E,{ids:P,resource:x,errorNotification:w,values:q},T)=>{let{identifier:N}=a(x);if(T)for(let S of T.previousQueries)n.setQueryData(S[0],S[1]);if(E.message!=="mutationCancelled"){c==null||c(E);let S=y.singular(N),R=typeof w=="function"?w(E,{ids:P,values:q},N):w;u(R,{key:`${P}-${N}-updateMany-error-notification`,message:o("notifications.editError",{resource:S,statusCode:E.statusCode},`Error when updating ${S} (status code: ${E.statusCode})`),description:E.message,type:"error"})}},mutationKey:f().data().mutation("updateMany").get(C),...e,meta:{...e==null?void 0:e.meta,...(0,ks.getXRay)("useUpdateMany",C)}}),{elapsedTime:$}=de({isLoading:D.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...D,overtime:{elapsedTime:$}}},"useUpdateMany"),Ha=h("@tanstack/react-query"),Rs=G(),Os=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=le(),{mutate:a}=Pe({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),{mutationMode:n,undoableTimeout:i}=bt(),o=pe(),{notificationDispatch:l}=Ct(),m=ee(),d=ut(),c=Se(),v=Ve(),{log:L}=ct(),{resources:u,select:p}=H(),b=(0,Ha.useQueryClient)(),g=oe(),{options:{textTransformers:y}}=he(),{keys:f,preferLegacyKeys:C}=Z(),D=(0,Ha.useMutation)(({resource:E,ids:P,mutationMode:x,undoableTimeout:w,onCancel:q,meta:T,metaData:N,dataProviderName:S,values:R})=>{let{resource:M,identifier:A}=p(E),k=g({resource:M,meta:F(T,N)}),I=x??n,_=w??i,O=o(B(A,S,u)),j=s(()=>O.deleteMany?O.deleteMany({resource:M.name,ids:P,meta:k,metaData:k,variables:R}):Jt(P.map(W=>O.deleteOne({resource:M.name,id:W,meta:k,metaData:k,variables:R}))),"mutationFn");return I!=="undoable"?j():new Promise((W,V)=>{let K=s(()=>{j().then(z=>W(z)).catch(z=>V(z))},"doMutation"),Q=s(()=>{V({message:"mutationCancelled"})},"cancelMutation");q&&q(Q),l({type:"ADD",payload:{id:P,resource:A,cancelMutation:Q,doMutation:K,seconds:_,isSilent:!!q}})})},{onMutate:async({ids:E,resource:P,mutationMode:x,dataProviderName:w,meta:q,metaData:T})=>{let{identifier:N}=p(P),S=F(q,T),R=Yt(C)(N,B(N,w,u),S),M=f().data(B(N,w,u)).resource(N),A=x??n;await b.cancelQueries(M.get(C),void 0,{silent:!0});let k=b.getQueriesData(M.get(C));if(A!=="pessimistic"){b.setQueriesData(M.action("list").params(S??{}).get(C),I=>I?{data:I.data.filter(_=>_.id&&!E.map(String).includes(_.id.toString())),total:I.total-1}:null),b.setQueriesData(M.action("many").get(C),I=>{if(!I)return null;let _=I.data.filter(O=>O.id?!E.map(String).includes(O.id.toString()):!1);return{...I,data:_}});for(let I of E)b.setQueriesData(M.action("one").id(I).params(S).get(C),_=>!_||_.data.id==I?null:{..._})}return{previousQueries:k,queryKey:R}},onSettled:(E,P,{resource:x,ids:w,dataProviderName:q,invalidates:T=["list","many"]})=>{let{identifier:N}=p(x);v({resource:N,dataProviderName:B(N,q,u),invalidates:T}),l({type:"REMOVE",payload:{id:w,resource:N}})},onSuccess:(E,{ids:P,resource:x,meta:w,metaData:q,dataProviderName:T,successNotification:N},S)=>{let{resource:R,identifier:M}=p(x);P.forEach(W=>b.removeQueries(S==null?void 0:S.queryKey.detail(W)));let A=typeof N=="function"?N(E,P,M):N;c(A,{key:`${P}-${M}-notification`,description:m("notifications.success","Success"),message:m("notifications.deleteSuccess",{resource:m(`${M}.${M}`,M)},`Successfully deleted ${M}`),type:"success"}),d==null||d({channel:`resources/${R.name}`,type:"deleted",payload:{ids:P},date:new Date});let k=g({resource:R,meta:F(w,q)}),{fields:I,operation:_,variables:O,...j}=k||{};L==null||L.mutate({action:"deleteMany",resource:R.name,meta:{ids:P,dataProviderName:B(M,T,u),...j}}),P.forEach(W=>b.removeQueries(S==null?void 0:S.queryKey.detail(W)))},onError:(E,{ids:P,resource:x,errorNotification:w},q)=>{let{identifier:T}=p(x);if(q)for(let N of q.previousQueries)b.setQueryData(N[0],N[1]);if(E.message!=="mutationCancelled"){a(E);let N=y.singular(T),S=typeof w=="function"?w(E,P,T):w;c(S,{key:`${P}-${T}-notification`,message:m("notifications.deleteError",{resource:N,statusCode:E.statusCode},`Error (status code: ${E.statusCode})`),description:E.message,type:"error"})}},mutationKey:f().data().mutation("deleteMany").get(C),...e,meta:{...e==null?void 0:e.meta,...(0,Rs.getXRay)("useDeleteMany",C)}}),{elapsedTime:$}=de({isLoading:D.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...D,overtime:{elapsedTime:$}}},"useDeleteMany"),As=s(e=>{var t;let r=pe(),{resource:a}=H(),{getApiUrl:n}=r(e??((t=F(a==null?void 0:a.meta,a==null?void 0:a.options))==null?void 0:t.dataProviderName));return n()},"useApiUrl"),Is=h("@tanstack/react-query"),$s=G(),Fs=s(({url:e,method:t,config:r,queryOptions:a,successNotification:n,errorNotification:i,meta:o,metaData:l,dataProviderName:m,overtimeOptions:d})=>{let c=pe(),v=le(),{mutate:L}=Pe({v3LegacyAuthProviderCompatible:!!(v!=null&&v.isLegacy)}),u=ee(),p=Se(),b=oe(),{keys:g,preferLegacyKeys:y}=Z(),f=F(o,l),{custom:C}=c(m),D=b({meta:f});if(C){let $=(0,Is.useQuery)({queryKey:g().data(m).mutation("custom").params({method:t,url:e,...r,...f||{}}).get(y),queryFn:({queryKey:P,pageParam:x,signal:w})=>C({url:e,method:t,...r,meta:{...D,queryContext:{queryKey:P,pageParam:x,signal:w}},metaData:{...D,queryContext:{queryKey:P,pageParam:x,signal:w}}}),...a,onSuccess:P=>{var x;(x=a==null?void 0:a.onSuccess)==null||x.call(a,P);let w=typeof n=="function"?n(P,{...r,...D}):n;p(w)},onError:P=>{var x;L(P),(x=a==null?void 0:a.onError)==null||x.call(a,P);let w=typeof i=="function"?i(P,{...r,...D}):i;p(w,{key:`${t}-notification`,message:u("notifications.error",{statusCode:P.statusCode},`Error (status code: ${P.statusCode})`),description:P.message,type:"error"})},meta:{...a==null?void 0:a.meta,...(0,$s.getXRay)("useCustom",y)}}),{elapsedTime:E}=de({isLoading:$.isFetching,interval:d==null?void 0:d.interval,onInterval:d==null?void 0:d.onInterval});return{...$,overtime:{elapsedTime:E}}}else throw Error("Not implemented custom on data provider.")},"useCustom"),Us=h("@tanstack/react-query"),Ks=G(),Qs=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=le(),{mutate:a}=Pe({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),n=Se(),i=pe(),o=ee(),l=oe(),{keys:m,preferLegacyKeys:d}=Z(),c=(0,Us.useMutation)(({url:L,method:u,values:p,meta:b,metaData:g,dataProviderName:y,config:f})=>{let C=l({meta:F(b,g)}),{custom:D}=i(y);if(D)return D({url:L,method:u,payload:p,meta:C,metaData:C,headers:{...f==null?void 0:f.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(L,{successNotification:u,config:p,meta:b,metaData:g})=>{let y=typeof u=="function"?u(L,{...p,...F(b,g)||{}}):u;n(y)},onError:(L,{errorNotification:u,method:p,config:b,meta:g,metaData:y})=>{a(L);let f=typeof u=="function"?u(L,{...b,...F(g,y)||{}}):u;n(f,{key:`${p}-notification`,message:o("notifications.error",{statusCode:L.statusCode},`Error (status code: ${L.statusCode})`),description:L.message,type:"error"})},mutationKey:m().data().mutation("customMutation").get(d),...e,meta:{...e==null?void 0:e.meta,...(0,Ks.getXRay)("useCustomMutation",d)}}),{elapsedTime:v}=de({isLoading:c.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...c,overtime:{elapsedTime:v}}},"useCustomMutation"),Xa=h("react"),eo=U(h("react")),Ws=s(()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),"defaultDataProvider"),Hr=eo.default.createContext(Ws()),zs=s(({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},eo.default.createElement(Hr.Provider,{value:r},e)},"DataContextProvider"),pe=s(()=>{let e=(0,Xa.useContext)(Hr);return(0,Xa.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},"useDataProvider"),_s=h("@tanstack/react-query"),js=G(),Vs=s(({resource:e,config:t,filters:r,hasPagination:a,pagination:n,sorters:i,queryOptions:o,successNotification:l,errorNotification:m,meta:d,metaData:c,liveMode:v,onLiveEvent:L,liveParams:u,dataProviderName:p,overtimeOptions:b})=>{let{resources:g,resource:y,identifier:f}=H(e),C=pe(),D=ee(),$=le(),{mutate:E}=Pe({v3LegacyAuthProviderCompatible:!!($!=null&&$.isLegacy)}),P=Se(),x=oe(),{keys:w,preferLegacyKeys:q}=Z(),T=B(f,p,g),N=F(d,c),S=F(r,t==null?void 0:t.filters),R=F(i,t==null?void 0:t.sort),M=F(a,t==null?void 0:t.hasPagination),A=zn({pagination:n,configPagination:t==null?void 0:t.pagination,hasPagination:M}),k=A.mode==="server",I={meta:N,metaData:N,filters:S,hasPagination:k,pagination:A,sorters:R,config:{...t,sort:R}},_=(o==null?void 0:o.enabled)===void 0||(o==null?void 0:o.enabled)===!0,O=x({resource:y,meta:N}),{getList:j}=C(T);kt({resource:f,types:["*"],params:{meta:O,metaData:O,pagination:A,hasPagination:k,sort:R,sorters:R,filters:S,subscriptionType:"useList",...u},channel:`resources/${y.name}`,enabled:_,liveMode:v,onLiveEvent:L});let W=(0,_s.useInfiniteQuery)(w().data(T).resource(f).action("infinite").params({...N||{},filters:S,hasPagination:k,...k&&{pagination:A},...i&&{sorters:i},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}).get(q),({queryKey:K,pageParam:Q,signal:z})=>{let ce={...A,current:Q};return j({resource:y.name,pagination:ce,hasPagination:k,filters:S,sort:R,sorters:R,meta:{...O,queryContext:{queryKey:K,pageParam:Q,signal:z}},metaData:{...O,queryContext:{queryKey:K,pageParam:Q,signal:z}}}).then(({data:ve,total:De,...rt})=>({data:ve,total:De,pagination:ce,...rt}))},{getNextPageParam:K=>Fn(K),getPreviousPageParam:K=>Un(K),...o,onSuccess:K=>{var Q;(Q=o==null?void 0:o.onSuccess)==null||Q.call(o,K);let z=typeof l=="function"?l(K,I,f):l;P(z)},onError:K=>{var Q;E(K),(Q=o==null?void 0:o.onError)==null||Q.call(o,K);let z=typeof m=="function"?m(K,I,f):m;P(z,{key:`${f}-useInfiniteList-notification`,message:D("notifications.error",{statusCode:K.statusCode},`Error (status code: ${K.statusCode})`),description:K.message,type:"error"})},meta:{...o==null?void 0:o.meta,...(0,js.getXRay)("useInfiniteList",q)}}),{elapsedTime:V}=de({isLoading:W.isFetching,interval:b==null?void 0:b.interval,onInterval:b==null?void 0:b.onInterval});return{...W,overtime:{elapsedTime:V}}},"useInfiniteList"),Er=h("react"),to=U(h("react")),xt=to.default.createContext(void 0),Bs=s(({liveProvider:e,children:t})=>to.default.createElement(xt.Provider,{value:e},t),"LiveContextProvider"),Hs=h("react"),ro=U(h("react")),Xs=h("react"),Gs=h("react"),Zs=U(h("lodash/isEqual")),Ys=s(e=>{let t=(0,Gs.useRef)(e);return(0,Zs.default)(t.current,e)||(t.current=e),t.current},"useMemoized"),ao=s((e,t)=>{let r=Ys(t);return(0,Xs.useMemo)(e,r)},"useDeepMemo"),qt=ro.default.createContext({resources:[]}),Js=s(({resources:e,children:t})=>{let r=ao(()=>Kn(e??[]),[e]);return ro.default.createElement(qt.Provider,{value:{resources:r}},t)},"ResourceContextProvider"),no=U(h("react")),oo=no.default.createContext("new"),el=oo.Provider,ue=s(()=>no.default.useContext(oo),"useRouterType"),tl=U(h("react")),io=U(h("react")),so={},Mt=(0,io.createContext)(so),rl=s(({children:e,router:t})=>io.default.createElement(Mt.Provider,{value:t??so},e),"RouterBindingsProvider"),Ga=U(h("react")),lo=s(()=>{let e=(0,Ga.useContext)(Mt);return Ga.default.useMemo(()=>(e==null?void 0:e.parse)??(()=>()=>({})),[e==null?void 0:e.parse])()},"useParse"),Ue=s(()=>{let e=lo();return tl.default.useMemo(()=>e(),[e])},"useParsed");function H(e){let{resources:t}=(0,Hs.useContext)(qt),r=ue(),a=Ue(),n={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},i=s((v,L=!0)=>{let u=me(v,t,r==="legacy");if(u)return{resource:u,identifier:u.identifier??u.name};if(L){let p={name:v,identifier:v},b=p.identifier??p.name;return{resource:p,identifier:b}}},"select"),o=uo(),{useParams:l}=Ne(),m=l();if(r==="legacy"){let v=n.resourceNameOrRouteName?n.resourceNameOrRouteName:m.resource,L=v?o(v):void 0,u=(n==null?void 0:n.recordItemId)??m.id,p=m.action,b=(n==null?void 0:n.resourceName)??(L==null?void 0:L.name),g=(L==null?void 0:L.identifier)??(L==null?void 0:L.name);return{resources:t,resource:L,resourceName:b,id:u,action:p,select:i,identifier:g}}let d,c=typeof e=="string"?e:n==null?void 0:n.resourceNameOrRouteName;if(c){let v=me(c,t);v?d=v:d={name:c}}else a!=null&&a.resource&&(d=a.resource);return{resources:t,resource:d,resourceName:d==null?void 0:d.name,id:a.id,action:a.action,select:i,identifier:(d==null?void 0:d.identifier)??(d==null?void 0:d.name)}}s(H,"useResource");var Za=h("react"),uo=s(()=>{let{resources:e}=(0,Za.useContext)(qt);return(0,Za.useCallback)(t=>me(t,e,!0)||{name:t,route:t},[e])},"useResourceWithRoute"),al=h("react"),nl=h("@tanstack/react-query"),Ve=s(()=>{let{resources:e}=H(),t=(0,nl.useQueryClient)(),{keys:r,preferLegacyKeys:a}=Z();return(0,al.useCallback)(async({resource:n,dataProviderName:i,invalidates:o,id:l,invalidationFilters:m={type:"all",refetchType:"active"},invalidationOptions:d={cancelRefetch:!1}})=>{if(o===!1)return;let c=B(n,i,e),v=r().data(c).resource(n??"");await Promise.all(o.map(L=>{switch(L){case"all":return t.invalidateQueries(r().data(c).get(a),m,d);case"list":return t.invalidateQueries(v.action("list").get(a),m,d);case"many":return t.invalidateQueries(v.action("many").get(a),m,d);case"resourceAll":return t.invalidateQueries(v.get(a),m,d);case"detail":return t.invalidateQueries(v.action("one").id(l||"").get(a),m,d);default:return}}))},[])},"useInvalidate"),kt=s(({resource:e,params:t,channel:r,types:a,enabled:n=!0,liveMode:i,onLiveEvent:o})=>{let{resource:l,identifier:m}=H(e),d=(0,Er.useContext)(xt),{liveMode:c,onLiveEvent:v}=(0,Er.useContext)(Je),L=i??c,u=Ve();(0,Er.useEffect)(()=>{let p,b=s(g=>{var y;L==="auto"&&u({resource:m,dataProviderName:(y=l==null?void 0:l.meta)==null?void 0:y.dataProviderName,invalidates:["resourceAll"],invalidationFilters:{type:"active",refetchType:"active"},invalidationOptions:{cancelRefetch:!1}}),o==null||o(g),v==null||v(g)},"callback");return L&&L!=="off"&&n&&(p=d==null?void 0:d.subscribe({channel:r,params:{resource:l==null?void 0:l.name,...t},types:a,callback:b})),()=>{p&&(d==null||d.unsubscribe(p))}},[n])},"useResourceSubscription"),ol=h("react"),co=s(e=>{let{liveMode:t}=(0,ol.useContext)(Je);return e??t},"useLiveMode"),Ya=h("react"),il=s(({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:n})=>{let i=(0,Ya.useContext)(xt);(0,Ya.useEffect)(()=>{let o;return a&&(o=i==null?void 0:i.subscribe({channel:t,params:e,types:r,callback:n})),()=>{o&&(i==null||i.unsubscribe(o))}},[a])},"useSubscription"),sl=h("react"),ut=s(()=>{let e=(0,sl.useContext)(xt);return e==null?void 0:e.publish},"usePublish"),ll=h("react"),Ct=s(()=>{let{notifications:e,notificationDispatch:t}=(0,ll.useContext)(Yn);return{notifications:e,notificationDispatch:t}},"useCancelNotification"),ul=h("react"),mo=U(h("react")),Xr=(0,mo.createContext)({}),dl=s(({open:e,close:t,children:r})=>mo.default.createElement(Xr.Provider,{value:{open:e,close:t}},r),"NotificationContextProvider"),et=s(()=>{let{open:e,close:t}=(0,ul.useContext)(Xr);return{open:e,close:t}},"useNotification"),cl=h("react"),Se=s(()=>{let{open:e}=et();return(0,cl.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},"useHandleNotification"),Ja=h("react"),vo=U(h("react")),dt=vo.default.createContext({}),ml=s(({children:e,i18nProvider:t})=>vo.default.createElement(dt.Provider,{value:{i18nProvider:t}},e),"TranslationContextProvider"),vl=s(()=>{let{i18nProvider:e}=(0,Ja.useContext)(dt);return(0,Ja.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},"useSetLocale"),en=h("react"),ee=s(()=>{let{i18nProvider:e}=(0,en.useContext)(dt);return(0,en.useMemo)(()=>{function t(r,a,n){return(e==null?void 0:e.translate(r,a,n))??n??(typeof a=="string"&&typeof n>"u"?a:r)}return s(t,"translate"),t},[e])},"useTranslate"),tn=h("react"),pl=s(()=>{let{i18nProvider:e}=(0,tn.useContext)(dt);return(0,tn.useCallback)(()=>e==null?void 0:e.getLocale(),[])},"useGetLocale"),fl=h("react"),gl=h("export-to-csv-fix-source-map"),yl=s(({resourceName:e,resource:t,sorter:r,sorters:a,filters:n,maxItemCount:i,pageSize:o=20,mapData:l=s(u=>u,"mapData"),exportOptions:m,meta:d,metaData:c,dataProviderName:v,onError:L}={})=>{let[u,p]=(0,fl.useState)(!1),b=pe(),g=oe(),{resource:y,resources:f,identifier:C}=H(F(t,e)),D=`${Fr()(C,"plural")}-${new Date().toLocaleString()}`,{getList:$}=b(B(C,v,f)),E=g({resource:y,meta:F(d,c)});return{isLoading:u,triggerExport:s(async()=>{p(!0);let P=[],x=1,w=!0;for(;w;)try{let{data:q,total:T}=await $({resource:(y==null?void 0:y.name)??"",filters:n,sort:F(a,r),sorters:F(a,r),pagination:{current:x,pageSize:o,mode:"server"},meta:E,metaData:E});x++,P.push(...q),i&&P.length>=i&&(P=P.slice(0,i),w=!1),T===P.length&&(w=!1)}catch(q){p(!1),w=!1,L==null||L(q);return}new gl.ExportToCsv({filename:D,useKeysAsHeaders:!0,...m}).generateCsv(P.map(l)),p(!1)},"triggerExport")}},"useExport"),Lr=U(h("react")),hl=U(h("warn-once")),Pl=U(h("lodash/debounce")),bl=s(({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:n,redirect:i,successNotification:o,errorNotification:l,meta:m,metaData:d,queryMeta:c,mutationMeta:v,mutationMode:L,liveMode:u,onLiveEvent:p,liveParams:b,undoableTimeout:g,dataProviderName:y,invalidates:f,queryOptions:C,createMutationOptions:D,updateMutationOptions:$,overtimeOptions:E,autoSave:P,optimisticUpdateMap:x}={})=>{let w=Ve(),{options:q}=he(),T=oe(),{resource:N,id:S,action:R,identifier:M}=H(e),{identifier:A}=H(),k=s(()=>e&&e!==A?r:r??S,"getDefaultId")(),[I,_]=Lr.default.useState(k);Lr.default.useEffect(()=>{_(k)},[k]);let O=s(()=>t||(R==="edit"||R==="clone"?R:"create"),"getAction")(),j=T({resource:N,meta:F(m,d)}),{mutationMode:W}=bt(),V=L??W,K=O==="create",Q=O==="edit",z=O==="clone";(0,hl.default)((z||Q)&&!!e&&!r&&(C==null?void 0:C.enabled)!==!1,`[useForm]: action: "${O}", resource: "${M}", id: ${I} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let ce=Bi({redirectFromProps:i,action:O,redirectOptions:q.redirect}),ve=Vr({resource:M,id:I??"",queryOptions:{enabled:I!==void 0&&(Q||z),...C},liveMode:u,onLiveEvent:p,liveParams:b,meta:{...j,...c},metaData:{...j,...c},dataProviderName:y}),{isFetching:De}=ve,rt=Br({mutationOptions:D}),{mutate:At,isLoading:It}=rt,Oe=Rr({mutationOptions:$}),{mutate:$t,isLoading:Be}=Oe,He=Rr({}),{setWarnWhen:at}=$r(),Xe=po(),vt=s(async te=>{at(!1);let Ae=s(ae=>{Xe({redirect:ce,resource:N,id:ae,meta:F(m,d)})},"onSuccess");return V!=="pessimistic"&&setTimeout(()=>{Ae()}),new Promise((ae,Qe)=>{if(V!=="pessimistic"&&ae(),!!N)return At({values:te,resource:M??N.name,successNotification:o,errorNotification:l,meta:{...j,...v},metaData:{...j,...v},dataProviderName:y,invalidates:f},{onSuccess:(ie,Ie,$e)=>{var We;a&&a(ie,te,$e);let ze=(We=ie==null?void 0:ie.data)==null?void 0:We.id;Ae(ze),ae(ie)},onError:(ie,Ie,$e)=>{if(n)return n(ie,te,$e);Qe()}})})},"onFinishCreate");Lr.default.useEffect(()=>()=>{P!=null&&P.invalidateOnUnmount&&He.status==="success"&&w({id:I,invalidates:f||["list","many","detail"],dataProviderName:y,resource:M})},[P==null?void 0:P.invalidateOnUnmount,He.status]);let pt=s(te=>{if(!N||!Q)return;let Ae={id:I??"",values:te,resource:M??N.name,successNotification:!1,errorNotification:!1,meta:{...j,...v},metaData:{...j,...v},dataProviderName:y,invalidates:[],mutationMode:"pessimistic"};return He.mutate(Ae,{onSuccess:(ae,Qe,ie)=>{a&&a(ae,te,ie,!0)},onError:(ae,Qe,ie)=>{if(n)return n(ae,te,ie,!0)}})},"onFinishAutoSaveMutation"),Ft=(0,Pl.default)(te=>pt(te),(P==null?void 0:P.debounce)||1e3),wt=K||z?{formLoading:De||It,mutationResult:rt,onFinish:vt}:{formLoading:De||Be,mutationResult:Oe,onFinish:s(async te=>{if(at(!1),!N)return;let Ae={id:I??"",values:te,resource:M??N.name,mutationMode:V,undoableTimeout:g,successNotification:o,errorNotification:l,meta:{...j,...v},metaData:{...j,...v},dataProviderName:y,invalidates:f,optimisticUpdateMap:x},ae=s(()=>{Xe({redirect:ce,resource:N,id:I,meta:F(m,d)})},"onSuccess");return V!=="pessimistic"&&setTimeout(()=>{ae()}),new Promise((Qe,ie)=>(V!=="pessimistic"&&Qe(),setTimeout(()=>{$t(Ae,{onSuccess:(Ie,$e,We)=>{a&&a(Ie,te,We),V==="pessimistic"&&ae(),Qe(Ie)},onError:(Ie,$e,We)=>{if(n)return n(Ie,te,We);ie()}})})))},"onFinishUpdate")},{elapsedTime:ur}=de({isLoading:wt.mutationResult.isLoading||ve.isFetching,interval:E==null?void 0:E.interval,onInterval:E==null?void 0:E.onInterval});return{...wt,queryResult:ve,onFinishAutoSave:Ft,autoSaveProps:{status:He.status,data:He.data,error:He.error},id:I,setId:_,redirect:(te,Ae)=>{Xe({redirect:te!==void 0?te:Q?"list":"edit",resource:N,id:Ae??I,meta:F(m,d)})},overtime:{elapsedTime:ur}}},"useForm"),Cl=h("react"),po=s(()=>{let{show:e,edit:t,list:r,create:a}=Te();return(0,Cl.useCallback)(({redirect:n,resource:i,id:o,meta:l={}})=>{if(n&&i)return i.show&&n==="show"&&o?e(i,o,void 0,l):i.edit&&n==="edit"&&o?t(i,o,void 0,l):i.create&&n==="create"?a(i,void 0,l):r(i,"push",l)},[])},"useRedirectionAfterSubmission"),rn=U(h("react")),ke=s(()=>{let e=(0,rn.useContext)(Mt);return rn.default.useMemo(()=>(e==null?void 0:e.go)??(()=>()=>{}),[e==null?void 0:e.go])()},"useGo"),an=U(h("react")),fo=s(()=>{let e=(0,an.useContext)(Mt);return an.default.useMemo(()=>(e==null?void 0:e.back)??(()=>()=>{}),[e==null?void 0:e.back])()},"useBack"),Te=s(()=>{let{resources:e}=H(),t=ue(),{useHistory:r}=Ne(),a=r(),n=Ue(),i=ke(),o=fo(),l=s((u,p="push")=>{t==="legacy"?a[p](u):i({to:u,type:p})},"handleUrl"),m=s((u,p={})=>{var b;if(t==="legacy"){let g=typeof u=="string"?me(u,e,!0)??{name:u,route:u}:u,y=Ee(g,e,!0).find(f=>f.action==="create");return y?qe(y.route,g==null?void 0:g.meta,n,p):""}else{let g=typeof u=="string"?me(u,e)??{name:u}:u,y=(b=Ee(g,e).find(f=>f.action==="create"))==null?void 0:b.route;return y?i({to:qe(y,g==null?void 0:g.meta,n,p),type:"path"}):""}},"createUrl"),d=s((u,p,b={})=>{var g;let y=encodeURIComponent(p);if(t==="legacy"){let f=typeof u=="string"?me(u,e,!0)??{name:u,route:u}:u,C=Ee(f,e,!0).find(D=>D.action==="edit");return C?qe(C.route,f==null?void 0:f.meta,n,{...b,id:y}):""}else{let f=typeof u=="string"?me(u,e)??{name:u}:u,C=(g=Ee(f,e).find(D=>D.action==="edit"))==null?void 0:g.route;return C?i({to:qe(C,f==null?void 0:f.meta,n,{...b,id:y}),type:"path"}):""}},"editUrl"),c=s((u,p,b={})=>{var g;let y=encodeURIComponent(p);if(t==="legacy"){let f=typeof u=="string"?me(u,e,!0)??{name:u,route:u}:u,C=Ee(f,e,!0).find(D=>D.action==="clone");return C?qe(C.route,f==null?void 0:f.meta,n,{...b,id:y}):""}else{let f=typeof u=="string"?me(u,e)??{name:u}:u,C=(g=Ee(f,e).find(D=>D.action==="clone"))==null?void 0:g.route;return C?i({to:qe(C,f==null?void 0:f.meta,n,{...b,id:y}),type:"path"}):""}},"cloneUrl"),v=s((u,p,b={})=>{var g;let y=encodeURIComponent(p);if(t==="legacy"){let f=typeof u=="string"?me(u,e,!0)??{name:u,route:u}:u,C=Ee(f,e,!0).find(D=>D.action==="show");return C?qe(C.route,f==null?void 0:f.meta,n,{...b,id:y}):""}else{let f=typeof u=="string"?me(u,e)??{name:u}:u,C=(g=Ee(f,e).find(D=>D.action==="show"))==null?void 0:g.route;return C?i({to:qe(C,f==null?void 0:f.meta,n,{...b,id:y}),type:"path"}):""}},"showUrl"),L=s((u,p={})=>{var b;if(t==="legacy"){let g=typeof u=="string"?me(u,e,!0)??{name:u,route:u}:u,y=Ee(g,e,!0).find(f=>f.action==="list");return y?qe(y.route,g==null?void 0:g.meta,n,p):""}else{let g=typeof u=="string"?me(u,e)??{name:u}:u,y=(b=Ee(g,e).find(f=>f.action==="list"))==null?void 0:b.route;return y?i({to:qe(y,g==null?void 0:g.meta,n,p),type:"path"}):""}},"listUrl");return{create:s((u,p="push",b={})=>{l(m(u,b),p)},"create"),createUrl:m,edit:s((u,p,b="push",g={})=>{l(d(u,p,g),b)},"edit"),editUrl:d,clone:s((u,p,b="push",g={})=>{l(c(u,p,g),b)},"clone"),cloneUrl:c,show:s((u,p,b="push",g={})=>{l(v(u,p,g),b)},"show"),showUrl:v,list:s((u,p="push",b={})=>{l(L(u,b),p)},"list"),listUrl:L,push:s((u,...p)=>{t==="legacy"?a.push(u,...p):i({to:u,type:"push"})},"push"),replace:s((u,...p)=>{t==="legacy"?a.replace(u,...p):i({to:u,type:"replace"})},"replace"),goBack:s(()=>{t==="legacy"?a.goBack():o()},"goBack")}},"useNavigation"),nn=U(h("react")),El=U(h("warn-once")),Ll=s(({resource:e,id:t,successNotification:r,errorNotification:a,meta:n,metaData:i,liveMode:o,onLiveEvent:l,dataProviderName:m,queryOptions:d,overtimeOptions:c}={})=>{let{resource:v,id:L,identifier:u}=H(e),{identifier:p}=H(),b=oe(),g=s(()=>e&&e!==p?t:t??L,"getDefaultId")(),[y,f]=(0,nn.useState)(g);nn.default.useEffect(()=>{f(g)},[g]);let C=b({resource:v,meta:F(n,i)});(0,El.default)(!!e&&!t,`[useShow]: resource: "${u}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`);let D=Vr({resource:u,id:y??"",queryOptions:{enabled:y!==void 0,...d},successNotification:r,errorNotification:a,meta:C,metaData:C,liveMode:o,onLiveEvent:l,dataProviderName:m}),{elapsedTime:$}=de({isLoading:D.isFetching,interval:c==null?void 0:c.interval,onInterval:c==null?void 0:c.onInterval});return{queryResult:D,showId:y,setShowId:f,overtime:{elapsedTime:$}}},"useShow"),_t=h("react"),wl=h("papaparse"),Sl=U(h("lodash/chunk")),Nl=s(({resourceName:e,resource:t,mapData:r=s(c=>c,"mapData"),paparseOptions:a,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:i,meta:o,metaData:l,onProgress:m,dataProviderName:d}={})=>{let[c,v]=(0,_t.useState)(0),[L,u]=(0,_t.useState)(0),[p,b]=(0,_t.useState)(!1),{resource:g,identifier:y}=H(t??e),f=oe(),C=Jn(),D=Br(),$=f({resource:g,meta:F(o,l)}),E;n===1?E=D:E=C;let P=s(()=>{u(0),v(0),b(!1)},"handleCleanup"),x=s(q=>{let T={succeeded:q.filter(N=>N.type==="success"),errored:q.filter(N=>N.type==="error")};i==null||i(T),b(!1)},"handleFinish");(0,_t.useEffect)(()=>{m==null||m({totalAmount:L,processedAmount:c})},[L,c]);let w=s(({file:q})=>(P(),new Promise(T=>{b(!0),(0,wl.parse)(q,{complete:async({data:N})=>{let S=Cn(N,r);if(u(S.length),n===1){let R=S.map(A=>s(async()=>({response:await D.mutateAsync({resource:y??"",values:A,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:$,metaData:$}),value:A}),"fn")),M=await Sa(R,({response:A,value:k})=>(v(I=>I+1),{response:[A.data],type:"success",request:[k]}),(A,k)=>({response:[A],type:"error",request:[S[k]]}));T(M)}else{let R=(0,Sl.default)(S,n),M=R.map(k=>s(async()=>({response:await C.mutateAsync({resource:y??"",values:k,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:$,metaData:$}),value:k,currentBatchLength:k.length}),"fn")),A=await Sa(M,({response:k,currentBatchLength:I,value:_})=>(v(O=>O+I),{response:k.data,type:"success",request:_}),(k,I)=>({response:[k],type:"error",request:R[I]}));T(A)}},...a})}).then(T=>(x(T),T))),"handleChange");return{inputProps:{type:"file",accept:".csv",onChange:q=>{q.target.files&&q.target.files.length>0&&w({file:q.target.files[0]})}},mutationResult:E,isLoading:p,handleChange:w}},"useImport"),wr=h("react"),Dl=s(({defaultVisible:e=!1}={})=>{let[t,r]=(0,wr.useState)(e),a=(0,wr.useCallback)(()=>r(!0),[t]),n=(0,wr.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:n}},"useModal"),xl=U(h("react")),Gr=s(()=>{let e=ue(),{resource:t,resources:r}=H(),a=Ue();return xl.default.useCallback(({resource:n,action:i,meta:o})=>{var l;let m=n||t;if(!m)return;let d=(l=Ee(m,r,e==="legacy").find(c=>c.action===i))==null?void 0:l.route;return d?qe(d,m==null?void 0:m.meta,a,o):void 0},[r,t,a])},"useGetToPath"),ql=s(({resource:e,action:t,meta:r,legacy:a})=>Gr()({resource:e,action:t,meta:r,legacy:a}),"useToPath"),on=U(h("react")),rr=s(()=>{let e=(0,on.useContext)(Mt);return e!=null&&e.Link?e.Link:s(({to:t,...r})=>on.default.createElement("a",{href:t,...r}),"FallbackLink")},"useLink"),Ml=h("react"),go=U(h("react")),Ze={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},kl=go.default.createContext(Ze),Zr=kl,Tl=s(({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:i,routes:o})=>go.default.createElement(Zr.Provider,{value:{useHistory:t??Ze.useHistory,useLocation:r??Ze.useLocation,useParams:a??Ze.useParams,Prompt:n??Ze.Prompt,Link:i??Ze.Link,routes:o??Ze.routes}},e),"LegacyRouterContextProvider"),Ne=s(()=>{let e=(0,Ml.useContext)(Zr),{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:i,routes:o}=e??Ze;return{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:i,routes:o}},"useRouterContext"),Rl=h("@tanstack/react-query"),Ol=h("react"),yo=U(h("react")),Tt=yo.default.createContext({options:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}),Al=s(({can:e,children:t,options:r})=>yo.default.createElement(Tt.Provider,{value:{can:e,options:r?{...r,buttons:{enableAccessControl:!0,hideIfUnauthorized:!1,...r.buttons}}:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}},t),"AccessControlContextProvider"),Yr=s(e=>{if(!e)return;let{icon:t,list:r,edit:a,create:n,show:i,clone:o,children:l,meta:m,options:d,...c}=e,{icon:v,...L}=m??{},{icon:u,...p}=d??{};return{...c,...m?{meta:L}:{},...d?{options:p}:{}}},"sanitizeResource"),Il=G(),ho=s(({action:e,resource:t,params:r,queryOptions:a})=>{let{can:n}=(0,Ol.useContext)(Tt),{keys:i,preferLegacyKeys:o}=Z(),{resource:l,...m}=r??{},d=Yr(l),c=(0,Rl.useQuery)(i().access().resource(t).action(e).params({params:{...m,resource:d},enabled:a==null?void 0:a.enabled}).get(o),()=>(n==null?void 0:n({action:e,resource:t,params:{...m,resource:d}}))??Promise.resolve({can:!0}),{enabled:typeof n<"u",...a,meta:{...a==null?void 0:a.meta,...(0,Il.getXRay)("useCan",o)},retry:!1});return typeof n>"u"?{data:{can:!0}}:c},"useCan"),sn=U(h("react")),$l=s(()=>{let{can:e}=sn.default.useContext(Tt);return{can:sn.default.useMemo(()=>e?s(async({params:t,...r})=>{let a=t!=null&&t.resource?Yr(t.resource):void 0;return e({...r,...t?{params:{...t,resource:a}}:{}})},"canWithSanitizedResource"):void 0,[e])}},"useCanWithoutCache"),gt=h("react"),Fl=U(h("lodash/uniqBy")),Ul=U(h("lodash/debounce")),jt=U(h("lodash/get")),Kl=s(e=>{let[t,r]=(0,gt.useState)([]),[a,n]=(0,gt.useState)([]),[i,o]=(0,gt.useState)([]),{resource:l,sort:m,sorters:d,filters:c=[],optionLabel:v="title",optionValue:L="id",debounce:u=300,successNotification:p,errorNotification:b,defaultValueQueryOptions:g,queryOptions:y,fetchSize:f,pagination:C,hasPagination:D=!1,liveMode:$,defaultValue:E=[],onLiveEvent:P,onSearch:x,liveParams:w,meta:q,metaData:T,dataProviderName:N,overtimeOptions:S}=e,{resource:R,identifier:M}=H(l),A=oe()({resource:R,meta:F(q,T)}),k=Array.isArray(E)?E:[E],I=(0,gt.useCallback)(Q=>{o(Q.data.map(z=>({label:(0,jt.default)(z,v),value:(0,jt.default)(z,L)})))},[v,L]),_=g??y,O=Zn({resource:M,ids:k,queryOptions:{..._,enabled:k.length>0&&((_==null?void 0:_.enabled)??!0),onSuccess:Q=>{var z;I(Q),(z=_==null?void 0:_.onSuccess)==null||z.call(_,Q)}},meta:A,metaData:A,liveMode:"off",dataProviderName:N}),j=(0,gt.useCallback)(Q=>{n(Q.data.map(z=>({label:(0,jt.default)(z,v),value:(0,jt.default)(z,L)})))},[v,L]),W=jr({resource:M,sorters:F(d,m),filters:c.concat(t),pagination:{current:C==null?void 0:C.current,pageSize:(C==null?void 0:C.pageSize)??f,mode:C==null?void 0:C.mode},hasPagination:D,queryOptions:{...y,onSuccess:Q=>{var z;j(Q),(z=y==null?void 0:y.onSuccess)==null||z.call(y,Q)}},successNotification:p,errorNotification:b,meta:A,metaData:A,liveMode:$,liveParams:w,onLiveEvent:P,dataProviderName:N}),V=s(Q=>{if(x){r(x(Q));return}if(Q)r([{field:v,operator:"contains",value:Q}]);else{r([]);return}},"onSearch"),{elapsedTime:K}=de({isLoading:W.isFetching||O.isFetching,interval:S==null?void 0:S.interval,onInterval:S==null?void 0:S.onInterval});return{queryResult:W,defaultValueQueryResult:O,options:(0,gt.useMemo)(()=>(0,Fl.default)([...a,...i],"value"),[a,i]),onSearch:(0,Ul.default)(V,u),overtime:{elapsedTime:K}}},"useSelect"),ot=U(h("react")),ln=U(h("qs")),Vt=U(h("lodash/differenceWith")),Bt=U(h("lodash/isEqual")),Ql=U(h("warn-once")),un=[],dn=[];function Po({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:n,permanentSorter:i=dn,defaultSetFilterBehavior:o,initialFilter:l,permanentFilter:m=un,filters:d,sorters:c,syncWithLocation:v,resource:L,successNotification:u,errorNotification:p,queryOptions:b,liveMode:g,onLiveEvent:y,liveParams:f,meta:C,metaData:D,dataProviderName:$,overtimeOptions:E}={}){var P,x,w,q,T;let{syncWithLocation:N}=Vn(),S=v??N,R=co(g),M=ue(),{useLocation:A}=Ne(),{search:k,pathname:I}=A(),_=oe(),O=Ue(),j=((d==null?void 0:d.mode)||"server")==="server",W=((c==null?void 0:c.mode)||"server")==="server",V=r===!1?"off":"server",K=((a==null?void 0:a.mode)??V)!=="off",Q=F(a==null?void 0:a.current,e),z=F(a==null?void 0:a.pageSize,t),ce=F(C,D),{parsedCurrent:ve,parsedPageSize:De,parsedSorter:rt,parsedFilters:At}=Ur(k??"?"),It=F(d==null?void 0:d.initial,l),Oe=F(d==null?void 0:d.permanent,m)??un,$t=F(c==null?void 0:c.initial,n),Be=F(c==null?void 0:c.permanent,i)??dn,He=F(d==null?void 0:d.defaultBehavior,o)??"merge",at,Xe,vt,pt;S?(at=((P=O==null?void 0:O.params)==null?void 0:P.current)||ve||Q||1,Xe=((x=O==null?void 0:O.params)==null?void 0:x.pageSize)||De||z||10,vt=((w=O==null?void 0:O.params)==null?void 0:w.sorters)||(rt.length?rt:$t),pt=((q=O==null?void 0:O.params)==null?void 0:q.filters)||(At.length?At:It)):(at=Q||1,Xe=z||10,vt=$t,pt=It);let{replace:Ft}=Te(),wt=ke(),{resource:ur,identifier:te}=H(L),Ae=_({resource:ur,meta:ce});ot.default.useEffect(()=>{(0,Ql.default)(typeof te>"u","useTable: `resource` is not defined.")},[te]);let[ae,Qe]=(0,ot.useState)(Tr(Be,vt??[])),[ie,Ie]=(0,ot.useState)(kr(Oe,pt??[])),[$e,We]=(0,ot.useState)(at),[ze,aa]=(0,ot.useState)(Xe),Qo=s(({pagination:{current:ne,pageSize:xe},sorter:Ut,filters:Kt})=>{if(M==="new")return wt({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...K?{current:ne,pageSize:xe}:{},sorters:Ut,filters:Kt,...na()}})??"";{let St=ln.default.parse(k==null?void 0:k.substring(1)),Bo=qr({pagination:{pageSize:xe,current:ne},sorters:ae??Ut,filters:Kt,...St});return`${I??""}?${Bo??""}`}},"createLinkForSyncWithLocation");(0,ot.useEffect)(()=>{k===""&&(We(at),aa(Xe),Qe(Tr(Be,vt??[])),Ie(kr(Oe,pt??[])))},[k]);let na=s(()=>{if(M==="new"){let{sorters:ne,filters:xe,pageSize:Ut,current:Kt,...St}=(O==null?void 0:O.params)??{};return St}else{let{sorter:ne,filters:xe,pageSize:Ut,current:Kt,...St}=ln.default.parse(k,{ignoreQueryPrefix:!0});return St}},"currentQueryParams");(0,ot.useEffect)(()=>{if(S){let ne=na();if(M==="new")wt({type:"replace",options:{keepQuery:!0},query:{...K?{pageSize:ze,current:$e}:{},sorters:(0,Vt.default)(ae,Be,Bt.default),filters:(0,Vt.default)(ie,Oe,Bt.default)}});else{let xe=qr({...K?{pagination:{pageSize:ze,current:$e}}:{},sorters:(0,Vt.default)(ae,Be,Bt.default),filters:(0,Vt.default)(ie,Oe,Bt.default),...ne});return Ft==null?void 0:Ft(`${I}?${xe}`,void 0,{shallow:!0})}}},[S,$e,ze,ae,ie]);let dr=jr({resource:te,hasPagination:r,pagination:{current:$e,pageSize:ze,mode:a==null?void 0:a.mode},filters:j?Nt(Oe,ie):void 0,sorters:W?Mr(Be,ae):void 0,queryOptions:b,successNotification:u,errorNotification:p,meta:Ae,metaData:Ae,liveMode:R,liveParams:f,onLiveEvent:y,dataProviderName:$}),Wo=s(ne=>{Ie(xe=>Nt(Oe,ne,xe))},"setFiltersAsMerge"),zo=s(ne=>{Ie(Nt(Oe,ne))},"setFiltersAsReplace"),_o=s(ne=>{Ie(xe=>Nt(Oe,ne(xe)))},"setFiltersWithSetter"),jo=s((ne,xe=He)=>{typeof ne=="function"?_o(ne):xe==="replace"?zo(ne):Wo(ne)},"setFiltersFn"),oa=s(ne=>{Qe(()=>Mr(Be,ne))},"setSortWithUnion"),{elapsedTime:Vo}=de({isLoading:dr.isFetching,interval:E==null?void 0:E.interval,onInterval:E==null?void 0:E.onInterval});return{tableQueryResult:dr,sorters:ae,setSorters:oa,sorter:ae,setSorter:oa,filters:ie,setFilters:jo,current:$e,setCurrent:We,pageSize:ze,setPageSize:aa,pageCount:ze?Math.ceil((((T=dr.data)==null?void 0:T.total)??0)/ze):1,createLinkForSyncWithLocation:Qo,overtime:{elapsedTime:Vo}}}s(Po,"useTable");var cn=h("react"),Sr=h("@tanstack/react-query"),bo=U(h("react")),ar=bo.default.createContext({}),Wl=s(({create:e,get:t,update:r,children:a})=>bo.default.createElement(ar.Provider,{value:{create:e,get:t,update:r}},a),"AuditLogContextProvider"),mn=G(),ct=s(({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,Sr.useQueryClient)(),a=(0,cn.useContext)(ar),{keys:n,preferLegacyKeys:i}=Z(),o=le(),{resources:l}=(0,cn.useContext)(qt),{data:m,refetch:d,isLoading:c}=Kr({v3LegacyAuthProviderCompatible:!!(o!=null&&o.isLegacy),queryOptions:{enabled:!!a}}),v=(0,Sr.useMutation)(async u=>{var p,b,g,y,f;let C=me(u.resource,l),D=F((p=C==null?void 0:C.meta)==null?void 0:p.audit,(b=C==null?void 0:C.options)==null?void 0:b.audit,(y=(g=C==null?void 0:C.options)==null?void 0:g.auditLog)==null?void 0:y.permissions);if(D&&!$i(D,u.action))return;let $;return c&&($=await d()),await((f=a.create)==null?void 0:f.call(a,{...u,author:m??($==null?void 0:$.data)}))},{mutationKey:n().audit().action("log").get(),...e,meta:{...e==null?void 0:e.meta,...(0,mn.getXRay)("useLog",i)}}),L=(0,Sr.useMutation)(async u=>{var p;return await((p=a.update)==null?void 0:p.call(a,u))},{onSuccess:u=>{u!=null&&u.resource&&r.invalidateQueries(n().audit().resource((u==null?void 0:u.resource)??"").action("list").get(i))},mutationKey:n().audit().action("rename").get(),...t,meta:{...t==null?void 0:t.meta,...(0,mn.getXRay)("useLog",i)}});return{log:v,rename:L}},"useLog"),zl=h("react"),_l=h("@tanstack/react-query"),jl=G(),Vl=s(({resource:e,action:t,meta:r,author:a,metaData:n,queryOptions:i})=>{let{get:o}=(0,zl.useContext)(ar),{keys:l,preferLegacyKeys:m}=Z();return(0,_l.useQuery)(l().audit().resource(e).action("list").params(r).get(m),()=>(o==null?void 0:o({resource:e,action:t,author:a,meta:r,metaData:n}))??Promise.resolve([]),{enabled:typeof o<"u",...i,retry:!1,meta:{...i==null?void 0:i.meta,...(0,jl.getXRay)("useLogList",m)}})},"useLogList"),Bl=h("react"),Hl=U(h("warn-once")),Xl=s(({meta:e={}}={})=>{let t=ue(),{i18nProvider:r}=(0,Bl.useContext)(dt),a=Ue(),n=ee(),{resources:i,resource:o,action:l}=H(),{options:{textTransformers:m}}=he(),d=[];if(!(o!=null&&o.name))return{breadcrumbs:d};let c=s(v=>{var L,u,p,b,g,y;let f=typeof v=="string"?me(v,i,t==="legacy")??{name:v}:v;if(f){let C=F((L=f==null?void 0:f.meta)==null?void 0:L.parent,f==null?void 0:f.parentName);C&&c(C);let D=Ee(f,i,t==="legacy").find(P=>P.action==="list"),$=(u=D==null?void 0:D.resource)!=null&&u.list?D==null?void 0:D.route:void 0,E=$?t==="legacy"?$:qe($,f==null?void 0:f.meta,a,e):void 0;d.push({label:F((p=f.meta)==null?void 0:p.label,(b=f.options)==null?void 0:b.label)??n(`${f.name}.${f.name}`,m.humanize(f.name)),href:E,icon:F((g=f.meta)==null?void 0:g.icon,(y=f.options)==null?void 0:y.icon,f.icon)})}},"addBreadcrumb");if(c(o),l&&l!=="list"){let v=`actions.${l}`,L=n(v);typeof r<"u"&&L===v?((0,Hl.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${l}" action. Please add "actions.${l}" key to your translation file.
For more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`),d.push({label:n(`buttons.${l}`,m.humanize(l))})):d.push({label:n(v,m.humanize(l))})}return{breadcrumbs:d}},"useBreadcrumb"),Nr=U(h("react")),Xt=s((e,t,r=!1)=>{let a=[],n=Ye(e,t);for(;n;)a.push(n),n=Ye(n,t);return a.reverse(),`/${[...a,e].map(i=>_e((r?i.route:void 0)??i.identifier??i.name)).join("/").replace(/^\//,"")}`},"createResourceKey"),Gl=s((e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(n=>{let i=[],o=Ye(n,e);for(;o;)i.push(o),o=Ye(o,e);i.reverse();let l=r;i.forEach(d=>{let c=(t?d.route:void 0)??d.identifier??d.name;l.children[c]||(l.children[c]={item:d,children:{}}),l=l.children[c]});let m=(t?n.route:void 0)??n.identifier??n.name;l.children[m]||(l.children[m]={item:n,children:{}})});let a=s(n=>{let i=[];return Object.keys(n.children).forEach(o=>{let l=Xt(n.children[o].item,e,t),m={...n.children[o].item,key:l,children:a(n.children[o])};i.push(m)}),i},"flatten");return a(r)},"createTree"),vn=s(e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),"getCleanPath"),Zl=s(({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=ee(),a=Gr(),n=ue(),{resource:i,resources:o}=H(),{pathname:l}=Ue(),{useLocation:m}=Ne(),{pathname:d}=m(),c=Fr(),v=`/${((n==="legacy"?vn(d):l?vn(l):void 0)??"").replace(/^\//,"")}`,L=i?Xt(i,o,n==="legacy"):v??"",u=Nr.default.useMemo(()=>{if(!i)return[];let g=Ye(i,o),y=[Xt(i,o)];for(;g;)y.push(Xt(g,o)),g=Ye(g,o);return y},[]),p=Nr.default.useCallback(g=>{var y,f,C,D,$,E;if((((y=g==null?void 0:g.meta)==null?void 0:y.hide)??((f=g==null?void 0:g.options)==null?void 0:f.hide))||!(g!=null&&g.list)&&g.children.length===0)return;let P=g.list?a({resource:g,action:"list",legacy:n==="legacy",meta:e}):void 0;if(!(t&&P&&P.match(/(\/|^):(.+?)(\/|$){1}/)))return{...g,route:P,icon:F((C=g.meta)==null?void 0:C.icon,(D=g.options)==null?void 0:D.icon,g.icon),label:F(($=g==null?void 0:g.meta)==null?void 0:$.label,(E=g==null?void 0:g.options)==null?void 0:E.label)??r(`${g.name}.${g.name}`,c(g.name,"plural"))}},[n,e,r,t]),b=Nr.default.useMemo(()=>{let g=Gl(o,n==="legacy"),y=s(f=>f.flatMap(C=>{let D=y(C.children),$=p({...C,children:D});return $?[$]:[]}),"prepare");return y(g)},[o,n,p]);return{defaultOpenKeys:u,selectedKey:L,menuItems:b}},"useMenu"),oe=s(()=>{let{params:e}=Ue();return s(({resource:t,meta:r}={})=>{let{meta:a}=Yr(t)??{meta:{}},{filters:n,sorters:i,current:o,pageSize:l,...m}=e??{};return{...a,...m,...r}},"getMetaFn")},"useMeta"),Yl=s(()=>{let[e,t]=(0,nt.useState)(),r=ee(),{push:a}=Te(),n=ke(),i=ue(),{resource:o,action:l}=H();return(0,nt.useEffect)(()=>{o&&l&&t(r("pages.error.info",{action:l,resource:o.name},`You may have forgotten to add the "${l}" component to "${o.name}" resource.`))},[o,l]),nt.default.createElement(nt.default.Fragment,null,nt.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&nt.default.createElement("p",null,e),nt.default.createElement("button",{onClick:()=>{i==="legacy"?a("/"):n({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},"ErrorComponent"),se=U(h("react")),Co=s(()=>{let[e,t]=(0,se.useState)(""),[r,a]=(0,se.useState)(""),n=ee(),i=le(),{mutate:o}=er({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)});return se.default.createElement(se.default.Fragment,null,se.default.createElement("h1",null,n("pages.login.title","Sign in your account")),se.default.createElement("form",{onSubmit:l=>{l.preventDefault(),o({username:e,password:r})}},se.default.createElement("table",null,se.default.createElement("tbody",null,se.default.createElement("tr",null,se.default.createElement("td",null,n("pages.login.username",void 0,"username"),":"),se.default.createElement("td",null,se.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:l=>t(l.target.value)}))),se.default.createElement("tr",null,se.default.createElement("td",null,n("pages.login.password",void 0,"password"),":"),se.default.createElement("td",null,se.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:l=>a(l.target.value)}))))),se.default.createElement("br",null),se.default.createElement("input",{type:"submit",value:"login"})))},"LoginPage"),yt=U(h("react")),Y=U(h("react")),Jl=s(({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:n,wrapperProps:i,renderContent:o,formProps:l,title:m=void 0})=>{let d=ue(),c=rr(),{Link:v}=Ne(),L=d==="legacy"?v:c,[u,p]=(0,Y.useState)(""),[b,g]=(0,Y.useState)(""),[y,f]=(0,Y.useState)(!1),C=ee(),D=le(),{mutate:$}=er({v3LegacyAuthProviderCompatible:!!(D!=null&&D.isLegacy)}),E=s((w,q)=>Y.default.createElement(L,{to:w},q),"renderLink"),P=s(()=>e?e.map(w=>Y.default.createElement("div",{key:w.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},Y.default.createElement("button",{onClick:()=>$({providerName:w.name}),style:{display:"flex",alignItems:"center"}},w==null?void 0:w.icon,w.label??Y.default.createElement("label",null,w.label)))):null,"renderProviders"),x=Y.default.createElement("div",{...n},Y.default.createElement("h1",{style:{textAlign:"center"}},C("pages.login.title","Sign in to your account")),P(),Y.default.createElement("hr",null),Y.default.createElement("form",{onSubmit:w=>{w.preventDefault(),$({email:u,password:b,remember:y})},...l},Y.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Y.default.createElement("label",{htmlFor:"email-input"},C("pages.login.fields.email","Email")),Y.default.createElement("input",{id:"email-input",name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:w=>p(w.target.value)}),Y.default.createElement("label",{htmlFor:"password-input"},C("pages.login.fields.password","Password")),Y.default.createElement("input",{id:"password-input",type:"password",name:"password",required:!0,size:20,value:b,onChange:w=>g(w.target.value)}),a??Y.default.createElement(Y.default.Fragment,null,Y.default.createElement("label",{htmlFor:"remember-me-input"},C("pages.login.buttons.rememberMe","Remember me"),Y.default.createElement("input",{id:"remember-me-input",name:"remember",type:"checkbox",size:20,checked:y,value:y.toString(),onChange:()=>{f(!y)}}))),Y.default.createElement("br",null),r??E("/forgot-password",C("pages.login.buttons.forgotPassword","Forgot password?")),Y.default.createElement("input",{type:"submit",value:C("pages.login.signin","Sign in")}),t??Y.default.createElement("span",null,C("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",E("/register",C("pages.login.register","Sign up"))))));return Y.default.createElement("div",{...i},o?o(x,m):x)},"LoginPage"),re=U(h("react")),eu=s(({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:n,formProps:i,title:o=void 0})=>{let l=ue(),m=rr(),{Link:d}=Ne(),c=l==="legacy"?d:m,[v,L]=(0,re.useState)(""),[u,p]=(0,re.useState)(""),b=ee(),g=le(),{mutate:y,isLoading:f}=Wr({v3LegacyAuthProviderCompatible:!!(g!=null&&g.isLegacy)}),C=s((E,P)=>re.default.createElement(c,{to:E},P),"renderLink"),D=s(()=>e?e.map(E=>re.default.createElement("div",{key:E.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},re.default.createElement("button",{onClick:()=>y({providerName:E.name}),style:{display:"flex",alignItems:"center"}},E==null?void 0:E.icon,E.label??re.default.createElement("label",null,E.label)))):null,"renderProviders"),$=re.default.createElement("div",{...a},re.default.createElement("h1",{style:{textAlign:"center"}},b("pages.register.title","Sign up for your account")),D(),re.default.createElement("hr",null),re.default.createElement("form",{onSubmit:E=>{E.preventDefault(),y({email:v,password:u})},...i},re.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},re.default.createElement("label",{htmlFor:"email-input"},b("pages.register.fields.email","Email")),re.default.createElement("input",{id:"email-input",name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:v,onChange:E=>L(E.target.value)}),re.default.createElement("label",{htmlFor:"password-input"},b("pages.register.fields.password","Password")),re.default.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:u,onChange:E=>p(E.target.value)}),re.default.createElement("input",{type:"submit",value:b("pages.register.buttons.submit","Sign up"),disabled:f}),t??re.default.createElement(re.default.Fragment,null,re.default.createElement("span",null,b("pages.login.buttons.haveAccount","Have an account?")," ",C("/login",b("pages.login.signin","Sign in")))))));return re.default.createElement("div",{...r},n?n($,o):$)},"RegisterPage"),be=U(h("react")),tu=s(({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:n,title:i=void 0})=>{let o=ee(),l=ue(),m=rr(),{Link:d}=Ne(),c=l==="legacy"?d:m,[v,L]=(0,be.useState)(""),{mutate:u,isLoading:p}=zr(),b=s((y,f)=>be.default.createElement(c,{to:y},f),"renderLink"),g=be.default.createElement("div",{...r},be.default.createElement("h1",{style:{textAlign:"center"}},o("pages.forgotPassword.title","Forgot your password?")),be.default.createElement("hr",null),be.default.createElement("form",{onSubmit:y=>{y.preventDefault(),u({email:v})},...n},be.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},be.default.createElement("label",{htmlFor:"email-input"},o("pages.forgotPassword.fields.email","Email")),be.default.createElement("input",{id:"email-input",name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:v,onChange:y=>L(y.target.value)}),be.default.createElement("input",{type:"submit",disabled:p,value:o("pages.forgotPassword.buttons.submit","Send reset instructions")}),be.default.createElement("br",null),e??be.default.createElement("span",null,o("pages.register.buttons.haveAccount","Have an account? ")," ",b("/login",o("pages.login.signin","Sign in"))))));return be.default.createElement("div",{...t},a?a(g,i):g)},"ForgotPasswordPage"),Ce=U(h("react")),ru=s(({wrapperProps:e,contentProps:t,renderContent:r,formProps:a,title:n=void 0})=>{let i=ee(),o=le(),{mutate:l,isLoading:m}=_r({v3LegacyAuthProviderCompatible:!!(o!=null&&o.isLegacy)}),[d,c]=(0,Ce.useState)(""),[v,L]=(0,Ce.useState)(""),u=Ce.default.createElement("div",{...t},Ce.default.createElement("h1",{style:{textAlign:"center"}},i("pages.updatePassword.title","Update Password")),Ce.default.createElement("hr",null),Ce.default.createElement("form",{onSubmit:p=>{p.preventDefault(),l({password:d,confirmPassword:v})},...a},Ce.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Ce.default.createElement("label",{htmlFor:"password-input"},i("pages.updatePassword.fields.password","New Password")),Ce.default.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:d,onChange:p=>c(p.target.value)}),Ce.default.createElement("label",{htmlFor:"confirm-password-input"},i("pages.updatePassword.fields.confirmPassword","Confirm New Password")),Ce.default.createElement("input",{id:"confirm-password-input",name:"confirmPassword",type:"password",required:!0,size:20,value:v,onChange:p=>L(p.target.value)}),Ce.default.createElement("input",{type:"submit",disabled:m,value:i("pages.updatePassword.buttons.submit","Update")}))));return Ce.default.createElement("div",{...e},r?r(u,n):u)},"UpdatePasswordPage"),au=s(e=>{let{type:t}=e;return yt.default.createElement(yt.default.Fragment,null,s(()=>{switch(t){case"register":return yt.default.createElement(eu,{...e});case"forgotPassword":return yt.default.createElement(tu,{...e});case"updatePassword":return yt.default.createElement(ru,{...e});default:return yt.default.createElement(Jl,{...e})}},"renderView")())},"AuthPage"),ge=U(h("react")),Eo=s(()=>ge.default.createElement(ge.default.Fragment,null,ge.default.createElement("h1",null,"Welcome on board"),ge.default.createElement("p",null,"Your configuration is completed."),ge.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",ge.default.createElement("code",null,"`resources`")," property of ",ge.default.createElement("code",null,"`<Refine>`")),ge.default.createElement("div",{style:{display:"flex",gap:8}},ge.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ge.default.createElement("button",null,"Documentation")),ge.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ge.default.createElement("button",null,"Examples")),ge.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ge.default.createElement("button",null,"Community")))),"ReadyPage"),X=U(h("react")),nu=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:X.default.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X.default.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:X.default.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X.default.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),X.default.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:X.default.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),X.default.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:X.default.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},X.default.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],ou=s(()=>{let e=Da("(max-width: 1010px)"),t=Da("(max-width: 650px)"),r=s(()=>t?"1, 280px":e?"2, 280px":"4, 208px","getGridTemplateColumns"),a=s(()=>t?"32px":e?"40px":"48px","getHeaderFontSize"),n=s(()=>t?"16px":e?"20px":"24px","getSubHeaderFontSize");return X.default.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},X.default.createElement("div",{style:{height:"89px"}}),X.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},X.default.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),X.default.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),X.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},X.default.createElement("h1",{style:{fontSize:a(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),X.default.createElement("h4",{style:{fontSize:n(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),X.default.createElement("div",{style:{height:"64px"}}),X.default.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},nu.map(i=>X.default.createElement(iu,{key:`welcome-page-${i.title}`,card:i}))),X.default.createElement("div",{style:{height:"64px"}}))},"WelcomePage"),iu=s(({card:e})=>{let{title:t,description:r,icon:a,link:n}=e,[i,o]=(0,X.useState)(!1);return X.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},X.default.createElement("div",{style:{display:"flex",alignItems:"center"}},X.default.createElement("a",{onPointerEnter:()=>o(!0),onPointerLeave:()=>o(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:n},a,X.default.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),X.default.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...i&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},X.default.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),X.default.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))},"Card"),J=U(h("react")),Dr=h("@tanstack/react-query"),su=G(),pn=U(h("react")),it=h("react"),lu="4.42.4",uu=s(()=>{var e;let t=Gn(),r=(0,it.useContext)(ar),a=(0,it.useContext)(xt),n=(0,it.useContext)(Zr),i=(0,it.useContext)(Hr),{i18nProvider:o}=(0,it.useContext)(dt),l=(0,it.useContext)(Xr),m=(0,it.useContext)(Tt),{resources:d}=H(),c=he(),v=!!r.create||!!r.get||!!r.update,L=!!(a!=null&&a.publish)||!!(a!=null&&a.subscribe)||!!(a!=null&&a.unsubscribe),u=!!n.useHistory||!!n.Link||!!n.Prompt||!!n.useLocation||!!n.useParams,p=!!i,b=!!(o!=null&&o.changeLocale)||!!(o!=null&&o.getLocale)||!!(o!=null&&o.translate),g=!!l.close||!!l.open,y=!!m.can,f=(e=c==null?void 0:c.options)==null?void 0:e.projectId;return{providers:{auth:t,auditLog:v,live:L,router:u,data:p,i18n:b,notification:g,accessControl:y},version:lu,resourceCount:d.length,projectId:f}},"useTelemetryData"),du=s(e=>{try{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")}catch{return}},"encode"),cu=s(e=>{let t=new Image;t.src=e},"throughImage"),mu=s(e=>{fetch(e)},"throughFetch"),vu=s(e=>{typeof Image<"u"?cu(e):typeof fetch<"u"&&mu(e)},"transport"),pu=s(()=>{let e=uu(),t=pn.default.useRef(!1);return pn.default.useEffect(()=>{if(t.current)return;let r=du(e);r&&(vu(`https://telemetry.refine.dev/telemetry?payload=${r}`),t.current=!0)},[]),null},"Telemetry"),fu=s(e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},"checkRouterPropMisuse"),fn=U(h("react")),gu=s(e=>{let t=fn.default.useRef(!1);fn.default.useEffect(()=>{t.current===!1&&e&&fu(e)&&(t.current=!0)},[e])},"useRouterMisuseWarning"),yu=s(({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:n,notificationProvider:i,accessControlProvider:o,auditLogProvider:l,resources:m,DashboardPage:d,ReadyPage:c,LoginPage:v,catchAll:L,children:u,liveProvider:p,i18nProvider:b,Title:g,Layout:y,Sider:f,Header:C,Footer:D,OffLayoutArea:$,onLiveEvent:E,options:P})=>{let{optionsWithDefaults:x,disableTelemetryWithDefault:w,reactQueryWithDefaults:q}=Vi({options:P}),T=ao(()=>{var R;return q.clientConfig instanceof Dr.QueryClient?q.clientConfig:new Dr.QueryClient({...q.clientConfig,defaultOptions:{...q.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(R=q.clientConfig.defaultOptions)==null?void 0:R.queries}}})},[q.clientConfig]);(0,su.useQuerySubscription)(T);let N=J.default.useMemo(()=>typeof i=="function"?i:()=>i??{},[i])();if(gu(n),a&&!n&&(m??[]).length===0)return c?J.default.createElement(c,null):J.default.createElement(Eo,null);let{RouterComponent:S=J.default.Fragment}=n?{}:a??{};return J.default.createElement(Dr.QueryClientProvider,{client:T},J.default.createElement(dl,{...N},J.default.createElement(Gi,{...e??{},isProvided:!!e},J.default.createElement(Zi,{...t??{},isProvided:!!t},J.default.createElement(zs,{...r},J.default.createElement(Bs,{liveProvider:p},J.default.createElement(el,{value:a&&!n?"legacy":"new"},J.default.createElement(rl,{router:n},J.default.createElement(Tl,{...a},J.default.createElement(Js,{resources:m??[]},J.default.createElement(ml,{i18nProvider:b},J.default.createElement(Al,{...o??{}},J.default.createElement(Wl,{...l??{}},J.default.createElement(ws,null,J.default.createElement(ji,{mutationMode:x.mutationMode,warnWhenUnsavedChanges:x.warnWhenUnsavedChanges,syncWithLocation:x.syncWithLocation,Title:g,undoableTimeout:x.undoableTimeout,catchAll:L,DashboardPage:d,LoginPage:v,Layout:y,Sider:f,Footer:D,Header:C,OffLayoutArea:$,hasDashboard:!!d,liveMode:x.liveMode,onLiveEvent:E,options:x},J.default.createElement(Ji,null,J.default.createElement(S,null,u,!w&&J.default.createElement(pu,null),J.default.createElement(So,null))))))))))))))))))},"Refine"),gn=h("react"),Lo=s(({notification:e})=>{let t=ee(),{notificationDispatch:r}=Ct(),{open:a}=et(),[n,i]=(0,gn.useState)(),o=s(()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:vr(e.seconds)},`You have ${vr(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:vr(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let l=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);i(l)}},"cancelNotification");return(0,gn.useEffect)(()=>{o()},[e]),null},"UndoableQueue"),Zt=U(h("react")),hu=s(({children:e,Layout:t,Sider:r,Header:a,Title:n,Footer:i,OffLayoutArea:o})=>{let{Layout:l,Footer:m,Header:d,Sider:c,Title:v,OffLayoutArea:L}=he();return Zt.default.createElement(t??l,{Sider:r??c,Header:a??d,Footer:i??m,Title:n??v,OffLayoutArea:o??L},e,Zt.default.createElement(Pu,null))},"LayoutWrapper"),Pu=s(()=>{let{Prompt:e}=Ne(),t=ee(),{warnWhen:r,setWarnWhen:a}=$r(),n=s(i=>(i.preventDefault(),i.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),i.returnValue),"warnWhenListener");return(0,Zt.useEffect)(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),Zt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},"UnsavedPrompt"),Le=U(h("react")),bu=s(()=>{let e=ke(),[t,r]=Le.default.useState(void 0);return Le.default.useEffect(()=>{t&&e(t)},[t]),Le.default.useCallback(a=>{t||r(a)},[t])},"useDeferredGo");function wo({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:n}){var i;let o=le(),l=ue(),m=!!(o!=null&&o.isProvided),d=!!(o!=null&&o.isLegacy),c=l==="legacy",v=Ue(),L=ke(),u=bu(),{replace:p}=Te(),{useLocation:b}=Ne(),g=b(),{isLoading:y,isFetching:f,isSuccess:C,data:{authenticated:D,redirectTo:$}={},refetch:E}=tr({v3LegacyAuthProviderCompatible:d});Le.default.useEffect(()=>{E()},[r,a]);let P=Le.default.useRef({status:y?"initial":"pending",content:n??null});f?P.current.status="pending":f||(P.current.status="settled");let x=m?d?C:D:!0;if(P.current.status==="settled")if(x)P.current.content=Le.default.createElement(Le.default.Fragment,null,r??null);else if(typeof a<"u")P.current.content=Le.default.createElement(Le.default.Fragment,null,a);else{let w=`${c?g==null?void 0:g.pathname:v.pathname}`.replace(/(\?.*|#.*)$/,""),q=d?typeof e=="string"?e:"/login":typeof e=="string"?e:$;if(q)if(c){let T=t?`?to=${encodeURIComponent(w)}`:"";p(`${q}${T}`)}else u({to:q,query:t?{to:(i=v.params)!=null&&i.to?v.params.to:L({to:w,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return m?Le.default.createElement(Le.default.Fragment,null,P.current.content):Le.default.createElement(Le.default.Fragment,null,r??null)}s(wo,"Authenticated");var Cu=h("react"),So=s(()=>{let{useLocation:e}=Ne(),{checkAuth:t}=Me(),r=e();return(0,Cu.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},"RouteChangeHandler"),st=U(h("react")),Eu=s(({resource:e,action:t,params:r,fallback:a,onUnauthorized:n,children:i,...o})=>{let{resource:l,id:m,action:d}=H(e),{identifier:c}=H(),v=s(()=>{let g=(r==null?void 0:r.id)??m;return e&&e!==c?r==null?void 0:r.id:g},"getDefaultId")(),L=e??(l==null?void 0:l.name),u=t??d??"",p=r??{id:v,resource:l},{data:b}=ho({resource:L,action:u,params:p});return(0,st.useEffect)(()=>{n&&(b==null?void 0:b.can)===!1&&n({resource:L,action:u,reason:b==null?void 0:b.reason,params:p})},[b==null?void 0:b.can]),b!=null&&b.can?st.default.isValidElement(i)?st.default.cloneElement(i,o):st.default.createElement(st.default.Fragment,null,i):(b==null?void 0:b.can)===!1?st.default.createElement(st.default.Fragment,null,a??null):null},"CanAccess"),lt=U(h("react")),Lu=[`
    .banner {
        display: flex;
        @media (max-width: 1000px) {
            display: none;
        }
    }`,`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],wu=s(()=>((0,lt.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),Lu.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),lt.default.createElement("div",{className:"banner",style:{flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},lt.default.createElement("div",{style:{width:"200px"}}),lt.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},lt.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},lt.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),lt.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going."))))),"GitHubBanner")});var nr=fe(h("react")),or=fe(mt()),Et=h("react"),Rt=h("qs"),Re=h("react-router-dom");var Jr=e=>{if(typeof e>"u")return e;let t=Number(e);return`${t}`===e?t:e};var Do={addQueryPrefix:!0,skipNulls:!0,arrayFormat:"indices",encode:!1,encodeValuesOnly:!0},Su={go:()=>{let{search:e,hash:t}=(0,Re.useLocation)(),r=(0,Re.useNavigate)();return(0,Et.useCallback)(({to:n,type:i,query:o,hash:l,options:{keepQuery:m,keepHash:d}={}})=>{let c={...m&&e&&(0,Rt.parse)(e,{ignoreQueryPrefix:!0}),...o};c.to&&(c.to=encodeURIComponent(`${c.to}`));let v=Object.keys(c).length>0,L=`#${(l||d&&t||"").replace(/^#/,"")}`,u=L.length>1,b=`${n||""}${v?(0,Rt.stringify)(c,Do):""}${u?L:""}`;return i==="path"?b:r(b,{replace:i==="replace"})},[t,e,r])},back:()=>{let e=(0,Re.useNavigate)();return(0,Et.useCallback)(()=>{e(-1)},[e])},parse:()=>{var m;let e=(0,Re.useParams)(),{pathname:t,search:r}=(0,Re.useLocation)(),{resources:a}=(0,Et.useContext)(or.ResourceContext),{resource:n,action:i,matchedRoute:o}=nr.default.useMemo(()=>(0,or.matchResourceFromRoute)(t,a),[a,t]);return Object.entries(e).length===0&&o&&(e=((m=(0,Re.matchPath)(o,t))==null?void 0:m.params)||{}),(0,Et.useCallback)(()=>{let d=(0,Rt.parse)(r,{ignoreQueryPrefix:!0}),c={...e,...d};return{...n&&{resource:n},...i&&{action:i},...(e==null?void 0:e.id)&&{id:decodeURIComponent(e.id)},pathname:t,params:{...c,current:Jr(c.current),pageSize:Jr(c.pageSize),to:c.to?decodeURIComponent(c.to):void 0}}},[t,r,e,n,i])},Link:nr.default.forwardRef(function(t,r){return nr.default.createElement(Re.Link,{...t,ref:r})})};var ta=fe(h("react")),Mo=fe(mt());var ea=fe(h("react")),xo=h("react-router-dom"),Nu=(e,t)=>{let{name:r,list:a,create:n,show:i,edit:o}=e;if(typeof a=="string"&&t==="list")return a;if(typeof a=="object"&&t==="list")return a.path;if(typeof n=="string"&&t==="create")return n;if(typeof n=="object"&&t==="create")return n.path;if(typeof i=="string"&&t==="show")return i;if(typeof i=="object"&&t==="show")return i.path;if(typeof o=="string"&&t==="edit")return o;if(typeof o=="object"&&t==="edit")return o.path;let l=`/${r}`,m=`${["edit","create","clone","show"].includes(t)?t:""}`,d=`${["edit","show","clone"].includes(t)?":id":""}`;return[l,m,d].filter(Boolean).join("/")},qo=e=>e.flatMap(r=>{let a=[];return["list","show","edit","create"].forEach(n=>{let i=r[n];if(typeof i<"u"&&typeof i!="string"){let o=typeof i=="function"?i:i.component,l=Nu(r,n);a.push({action:n,element:o,path:l}),n==="create"&&a.push({action:"clone",element:o,path:l})}}),a.map(({action:n,element:i,path:o})=>{let l=ea.default.createElement(i,null);return ea.default.createElement(xo.Route,{key:`${n}-${o}`,path:o,element:l})})});var ko=h("react-router-dom"),Du=({children:e})=>{let{resources:t}=(0,Mo.useResource)(),r=ta.default.useMemo(()=>qo(t),[t]);return e?e(r):ta.default.createElement(ko.Routes,null,r)};var ir=fe(mt()),To=fe(h("react")),Ro=h("react-router-dom"),xu=({resource:e,meta:t})=>{let r=(0,ir.useGetToPath)(),{resource:a,resources:n}=(0,ir.useResource)(e),i=a||n.find(o=>o.list);if(i){let o=r({resource:i,action:"list",meta:t});return o?To.default.createElement(Ro.Navigate,{to:o}):(console.warn("No resource is found to navigate to."),null)}else return console.warn("No resource is found to navigate to."),null};var ra=fe(h("react")),sr=fe(mt());var Lt=fe(h("react")),Oo=h("react-router-dom");function qu(e,t=!0){let{navigator:r}=Lt.default.useContext(Oo.UNSAFE_NavigationContext);Lt.default.useEffect(()=>{if(!t)return;let a=r.go,n=r.push;return r.push=(...i)=>{e()!==!1&&n(...i)},r.go=(...i)=>{e()!==!1&&a(...i)},()=>{r.push=n,r.go=a}},[r,e,t])}function Ao(e,t=!0,r,a=!1){let n=Lt.default.useCallback(o=>(o.preventDefault(),o.returnValue=e,o.returnValue),[e]);Lt.default.useEffect(()=>(t&&!a&&window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}),[n,t,a]);let i=Lt.default.useCallback(()=>{let o=window.confirm(e);return o&&r&&r(),o},[e]);qu(i,t)}var Io=h("react-router-dom"),Mu=({translationKey:e="warnWhenUnsavedChanges",message:t="Are you sure you want to leave? You have unsaved changes."})=>{let r=(0,sr.useTranslate)(),{pathname:a}=(0,Io.useLocation)(),{warnWhen:n,setWarnWhen:i}=(0,sr.useWarnAboutChange)();ra.default.useEffect(()=>()=>i==null?void 0:i(!1),[a]);let o=ra.default.useMemo(()=>r(e,t),[e,t,r]);return Ao(o,n,()=>{i==null||i(!1)}),null};var $o=fe(h("react")),lr=h("react-router-dom"),ku=({to:e})=>{let{pathname:t,search:r}=(0,lr.useLocation)(),a=`${t}${r}`,n=a.length>1?`?to=${encodeURIComponent(a)}`:"";return $o.default.createElement(lr.Navigate,{to:`${e}${n}`})};var tt=fe(mt()),Ot=fe(h("react")),Fo=h("react-router-dom");function Tu({handler:e}){var v;let t=(0,Fo.useLocation)(),{action:r,id:a,params:n,pathname:i,resource:o}=(0,tt.useParsed)(),l=(0,tt.useTranslate)(),m=(0,tt.useUserFriendlyName)(),d=(o==null?void 0:o.identifier)??(o==null?void 0:o.name),c=(o==null?void 0:o.label)??((v=o==null?void 0:o.meta)==null?void 0:v.label)??m(d,r==="list"?"plural":"singular");return(0,Ot.useLayoutEffect)(()=>{let L=(0,tt.generateDefaultDocumentTitle)(l,o,r,a+"",c);e?document.title=e({action:r,resource:o,params:n,pathname:i,autoGeneratedTitle:L}):document.title=L},[t]),Ot.default.createElement(Ot.default.Fragment,null)}var Uo=fe(mt()),Ko=h("react"),Ru=e=>{let t=(0,Uo.useTranslate)();return(0,Ko.useEffect)(()=>{e&&(typeof e=="string"?document.title=t(e):document.title=t(e.i18nKey))},[e]),r=>{typeof r=="string"?document.title=t(r):document.title=t(r.i18nKey)}};})();
//# sourceMappingURL=index.js.map