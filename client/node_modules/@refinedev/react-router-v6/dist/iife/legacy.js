(()=>{var Tn=Object.create;var ea=Object.defineProperty;var On=Object.getOwnPropertyDescriptor;var An=Object.getOwnPropertyNames;var In=Object.getPrototypeOf,Fn=Object.prototype.hasOwnProperty;var E=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var ur=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var $n=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of An(t))!Fn.call(e,o)&&o!==r&&ea(e,o,{get:()=>t[o],enumerable:!(a=On(t,o))||a.enumerable});return e};var qt=(e,t,r)=>(r=e!=null?Tn(In(e)):{},$n(t||!e||!e.__esModule?ea(r,"default",{value:e,enumerable:!0}):r,e));var zt=ur((fl,ua)=>{var Un=Object.create,Qt=Object.defineProperty,Kn=Object.getOwnPropertyDescriptor,Qn=Object.getOwnPropertyNames,zn=Object.getPrototypeOf,Wn=Object.prototype.hasOwnProperty,_n=(e,t)=>{for(var r in t)Qt(e,r,{get:t[r],enumerable:!0})},ta=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Qn(t))!Wn.call(e,o)&&o!==r&&Qt(e,o,{get:()=>t[o],enumerable:!(a=Kn(t,o))||a.enumerable});return e},jn=(e,t,r)=>(r=e!=null?Un(zn(e)):{},ta(t||!e||!e.__esModule?Qt(r,"default",{value:e,enumerable:!0}):r,e)),Vn=e=>ta(Qt({},"__esModule",{value:!0}),e),ra={};_n(ra,{DevToolsContext:()=>sa,DevToolsContextProvider:()=>Xn,DevtoolsEvent:()=>aa,hooksByScope:()=>Bn,receive:()=>ia,scopes:()=>oa,send:()=>na});ua.exports=Vn(ra);var aa=(e=>(e.RELOAD="devtools:reload",e.DEVTOOLS_INIT="devtools:init",e.DEVTOOLS_HANDSHAKE="devtools:handshake",e.DEVTOOLS_ALREADY_CONNECTED="devtools:already-connected",e.ACTIVITY="devtools:send-activity",e.DEVTOOLS_ACTIVITY_UPDATE="devtools:activity-update",e.DEVTOOLS_CONNECTED_APP="devtools:connected-app",e.DEVTOOLS_DISCONNECTED_APP="devtools:disconnected-app",e.DEVTOOLS_HIGHLIGHT_IN_MONITOR="devtools:highlight-in-monitor",e.DEVTOOLS_HIGHLIGHT_IN_MONITOR_ACTION="devtools:highlight-in-monitor-action",e.DEVTOOLS_LOGIN_SUCCESS="devtools:login-success",e.DEVTOOLS_RELOAD_AFTER_LOGIN="devtools:reload-after-login",e))(aa||{}),oa={useCan:"access-control",useLog:"audit-log",useLogList:"audit-log",useCreate:"data",useCreateMany:"data",useCustom:"data",useCustomMutation:"data",useDelete:"data",useDeleteMany:"data",useInfiniteList:"data",useList:"data",useMany:"data",useOne:"data",useUpdate:"data",useUpdateMany:"data",useForgotPassword:"auth",useGetIdentity:"auth",useIsAuthenticated:"auth",useLogin:"auth",useLogout:"auth",useOnError:"auth",usePermissions:"auth",useRegister:"auth",useUpdatePassword:"auth"},Bn=Object.entries(oa).reduce((e,[t,r])=>(e[r]||(e[r]=[]),e[r].push(t),e),{}),gt=jn(E("react"));async function na(e,t,r){if(e.readyState!==e.OPEN){await new Promise(a=>{let o=()=>{e.send(JSON.stringify({event:t,payload:r})),a(),e.removeEventListener("open",o)};e.addEventListener("open",o)});return}else{e.send(JSON.stringify({event:t,payload:r}));return}}function ia(e,t,r){let a=o=>{let{event:i,payload:n}=JSON.parse(o.data);t===i&&r(n)};return e.addEventListener("message",a),()=>{e.removeEventListener("message",a)}}var sa=gt.default.createContext({__devtools:!1,port:5002,url:"localhost",secure:!1,ws:null}),Xn=({__devtools:e,port:t,children:r})=>{let[a,o]=gt.default.useState({__devtools:e??!1,port:t??5002,url:"localhost",secure:!1,ws:null}),[i,n]=gt.default.useState(null);gt.default.useEffect(()=>{let c=new WebSocket(`${a.secure?"wss":"ws"}://localhost:${a.port}`),d=ia(c,"devtools:handshake",v=>{o(p=>({...p,devtoolsUrl:v.url})),d()});return c.addEventListener("open",()=>{a.__devtools||na(c,"devtools:init",{url:window.location.origin})}),n(c),()=>{d(),c.close(1e3,window.location.origin)}},[]);let l=gt.default.useMemo(()=>({...a,ws:i}),[a,i]);return gt.default.createElement(sa.Provider,{value:l},r)}});var Y=ur((Pl,pa)=>{var Hn=Object.create,Wt=Object.defineProperty,Gn=Object.getOwnPropertyDescriptor,Zn=Object.getOwnPropertyNames,Yn=Object.getPrototypeOf,Jn=Object.prototype.hasOwnProperty,ei=(e,t)=>{for(var r in t)Wt(e,r,{get:t[r],enumerable:!0})},la=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Zn(t))!Jn.call(e,o)&&o!==r&&Wt(e,o,{get:()=>t[o],enumerable:!(a=Gn(t,o))||a.enumerable});return e},da=(e,t,r)=>(r=e!=null?Hn(Yn(e)):{},la(t||!e||!e.__esModule?Wt(r,"default",{value:e,enumerable:!0}):r,e)),ti=e=>la(Wt({},"__esModule",{value:!0}),e),ca={};ei(ca,{getTrace:()=>va,getXRay:()=>ui,useQuerySubscription:()=>li});pa.exports=ti(ca);var ri=da(E("error-stack-parser")),ai="renderWithHooks",oi=e=>{let t=e.findIndex(r=>r.functionName===ai);return t!==-1?e.slice(0,t):e},ma=/node_modules\/refinedev\/(?<name>.*?)\//,ni=e=>e?!!e.match(ma):!1,ii=e=>{var t;if(!e)return;let r=e.match(ma),a=(t=r==null?void 0:r.groups)==null?void 0:t.name;if(a)return`@refinedev/${a}`};function va(){return[];try{let e=new Error,t=ri.default.parse(e);return oi(t).map(r=>({file:r.fileName,line:r.lineNumber,column:r.columnNumber,function:r.functionName,isRefine:ni(r.fileName),packageName:ii(r.fileName)})).filter(r=>r.function).slice(1)}catch{return[]}}var lr=zt(),si=(e,t)=>{if(lr.scopes[e]==="auth")return null;if(e==="useCan")return t?"key[1].resource":"key[1]";if(lr.scopes[e]==="audit-log")return e==="useLog"?"variables.resource":"key[1]";if(lr.scopes[e]==="data"){if(e==="useCustom"||e==="useCustomMutation")return null;switch(e){case"useList":case"useInfiniteList":case"useOne":case"useMany":return t?"key[1]":"key[2]";case"useCreate":case"useCreateMany":case"useDelete":case"useDeleteMany":case"useUpdate":case"useUpdateMany":return"variables.resource"}}return null};function ui(e,t){return{hookName:"",trace:[],resourcePath:null,legacyKey:!1}}var gl=zt(),yl=da(E("react")),hl=zt(),li=()=>({})});var Gr=ur((bl,bn)=>{var di=Object.create,Mt=Object.defineProperty,ci=Object.getOwnPropertyDescriptor,mi=Object.getOwnPropertyNames,vi=Object.getPrototypeOf,pi=Object.prototype.hasOwnProperty,s=(e,t)=>Mt(e,"name",{value:t,configurable:!0}),fi=(e,t)=>{for(var r in t)Mt(e,r,{get:t[r],enumerable:!0})},co=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of mi(t))!pi.call(e,o)&&o!==r&&Mt(e,o,{get:()=>t[o],enumerable:!(a=ci(t,o))||a.enumerable});return e},U=(e,t,r)=>(r=e!=null?di(vi(e)):{},co(t||!e||!e.__esModule?Mt(r,"default",{value:e,enumerable:!0}):r,e)),gi=e=>co(Mt({},"__esModule",{value:!0}),e),mo={};fi(mo,{AccessControlContext:()=>Ot,AuthPage:()=>zu,Authenticated:()=>hn,CanAccess:()=>sl,ErrorComponent:()=>Fu,GitHubBanner:()=>ll,KeyBuilder:()=>Rr,LayoutWrapper:()=>al,LoginPage:()=>fn,ReadyPage:()=>gn,Refine:()=>rl,ResourceContext:()=>xt,RouteChangeHandler:()=>Pn,TranslationContext:()=>ct,UndoableQueue:()=>yn,WelcomePage:()=>_u,createTreeView:()=>ki,file2Base64:()=>Vi,generateDefaultDocumentTitle:()=>$o,getDefaultFilter:()=>ji,getDefaultSortOrder:()=>_i,getNextPageParam:()=>Ro,getPreviousPageParam:()=>To,handleUseParams:()=>bi,importCSVMapper:()=>fo,keys:()=>Ye,legacyResourceTransform:()=>Oo,matchResourceFromRoute:()=>qi,parseTableParams:()=>Ir,parseTableParamsFromQuery:()=>Wi,pickDataProvider:()=>X,pickNotDeprecated:()=>$,queryKeys:()=>Ci,routeGenerator:()=>ko,setInitialFilters:()=>kr,setInitialSorters:()=>Mr,stringifyTableParams:()=>Dr,unionFilters:()=>kt,unionSorters:()=>qr,useActiveAuthProvider:()=>ce,useApiUrl:()=>bs,useAuthenticated:()=>Yi,useBack:()=>ln,useBreadcrumb:()=>Ou,useCan:()=>mn,useCanWithoutCache:()=>Eu,useCancelNotification:()=>Et,useCheckError:()=>Ji,useCreate:()=>_r,useCreateMany:()=>Bo,useCustom:()=>Ls,useCustomMutation:()=>Ds,useDataProvider:()=>ye,useDelete:()=>vs,useDeleteMany:()=>Ps,useExport:()=>ru,useForgotPassword:()=>Kr,useForm:()=>nu,useGetIdentity:()=>Fr,useGetLocale:()=>Js,useGetToPath:()=>Br,useGo:()=>Te,useHandleNotification:()=>qe,useImport:()=>cu,useInfiniteList:()=>xs,useInvalidate:()=>Be,useIsAuthenticated:()=>tr,useIsExistAuthentication:()=>_o,useLink:()=>rr,useList:()=>zr,useLiveMode:()=>on,useLoadingOvertime:()=>ve,useLog:()=>mt,useLogList:()=>xu,useLogin:()=>er,useLogout:()=>Gt,useMany:()=>jo,useMenu:()=>Iu,useMeta:()=>ue,useModal:()=>mu,useMutationMode:()=>Ct,useNavigation:()=>Oe,useNotification:()=>rt,useOnError:()=>Ce,useOne:()=>Wr,useParse:()=>rn,useParsed:()=>Ke,usePermissions:()=>Wo,usePublish:()=>dt,useRedirectionAfterSubmission:()=>un,useRefineContext:()=>be,useRegister:()=>Ur,useResource:()=>G,useResourceSubscription:()=>Tt,useResourceWithRoute:()=>an,useRouterContext:()=>ke,useRouterType:()=>me,useSelect:()=>Su,useSetLocale:()=>Ys,useShow:()=>uu,useSubscription:()=>js,useSyncWithLocation:()=>Ko,useTable:()=>vn,useTitle:()=>Qi,useToPath:()=>pu,useTranslate:()=>ae,useUpdate:()=>Nr,useUpdateMany:()=>ys,useUpdatePassword:()=>Qr,useUserFriendlyName:()=>Ar,useWarnAboutChange:()=>Or,userFriendlyResourceName:()=>go});bn.exports=gi(mo);var nt=U(E("react")),fa=E("@tanstack/react-query"),ga=Y(),xr=U(E("qs")),vo=U(E("lodash/unionWith")),po=U(E("lodash/differenceWith")),yi=U(E("warn-once")),dr=s(e=>e/1e3,"userFriendlySecond"),hi=U(E("lodash/zip")),Pi=U(E("lodash/fromPairs")),fo=s((e,t=r=>r)=>{let[r,...a]=e;return a.map(o=>(0,Pi.default)((0,hi.default)(r,o))).map((o,i,n)=>t.call(void 0,o,i,n))},"importCSVMapper"),ya=U(E("pluralize")),go=s((e="",t)=>{let r=Mo(e);return t==="singular"?ya.default.singular(r):ya.default.plural(r)},"userFriendlyResourceName"),bi=s((e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,"handleUseParams"),$=s((...e)=>e.find(t=>typeof t<"u"),"pickNotDeprecated");function Qe(e,t){return e.findIndex((r,a)=>a<=e.length-t.length&&t.every((o,i)=>e[a+i]===o))}s(Qe,"arrayFindIndex");function yo(e){if(e[0]==="data"){let t=e.slice(1);if(t[2]==="many")t[2]="getMany";else if(t[2]==="infinite")t[2]="list";else if(t[2]==="one")t[2]="detail";else if(t[1]==="custom"){let r={...t[2]};return delete r.method,delete r.url,[t[0],t[1],t[2].method,t[2].url,r]}return t}if(e[0]==="audit"&&e[2]==="list")return["logList",e[1],e[3]];if(e[0]==="access"&&e.length===4)return["useCan",{resource:e[1],action:e[2],...e[3]}];if(e[0]==="auth"){if(Qe(e,["auth","login"])!==-1)return["useLogin"];if(Qe(e,["auth","logout"])!==-1)return["useLogout"];if(Qe(e,["auth","identity"])!==-1)return["getUserIdentity"];if(Qe(e,["auth","register"])!==-1)return["useRegister"];if(Qe(e,["auth","forgotPassword"])!==-1)return["useForgotPassword"];if(Qe(e,["auth","check"])!==-1)return["useAuthenticated",e[2]];if(Qe(e,["auth","onError"])!==-1)return["useCheckError"];if(Qe(e,["auth","permissions"])!==-1)return["usePermissions"];if(Qe(e,["auth","updatePassword"])!==-1)return["useUpdatePassword"]}return e}s(yo,"convertToLegacy");var De=class{constructor(e=[]){this.segments=[],this.segments=e}key(){return this.segments}legacy(){return yo(this.segments)}get(e){return e?this.legacy():this.segments}};s(De,"BaseKeyBuilder");var Ve=class extends De{constructor(e){super(e)}params(e){return new De([...this.segments,e])}};s(Ve,"ParamsKeyBuilder");var ho=class extends De{constructor(e){super(e)}id(e){return new Ve([...this.segments,e?String(e):void 0])}};s(ho,"DataIdRequiringKeyBuilder");var Po=class extends De{constructor(e){super(e)}ids(...e){return new Ve([...this.segments,...e.length?[e.map(t=>String(t))]:[]])}};s(Po,"DataIdsRequiringKeyBuilder");var bo=class extends De{constructor(e){super(e)}action(e){if(e==="one")return new ho([...this.segments,e]);if(e==="many")return new Po([...this.segments,e]);if(["list","infinite"].includes(e))return new Ve([...this.segments,e]);throw new Error("Invalid action type")}};s(bo,"DataResourceKeyBuilder");var Co=class extends De{constructor(e){super(e)}resource(e){return new bo([...this.segments,e])}mutation(e){return new Ve([...e==="custom"?this.segments:[this.segments[0]],e])}};s(Co,"DataKeyBuilder");var Eo=class extends De{constructor(e){super(e)}action(e){return new Ve([...this.segments,e])}};s(Eo,"AuthKeyBuilder");var Lo=class extends De{constructor(e){super(e)}action(e){return new Ve([...this.segments,e])}};s(Lo,"AccessResourceKeyBuilder");var wo=class extends De{constructor(e){super(e)}resource(e){return new Lo([...this.segments,e])}};s(wo,"AccessKeyBuilder");var So=class extends De{constructor(e){super(e)}action(e){return new Ve([...this.segments,e])}};s(So,"AuditActionKeyBuilder");var Do=class extends De{constructor(e){super(e)}resource(e){return new So([...this.segments,e])}action(e){return new Ve([...this.segments,e])}};s(Do,"AuditKeyBuilder");var Rr=class extends De{constructor(e){super(e)}data(e){return new Co(["data",e||"default"])}auth(){return new Eo(["auth"])}access(){return new wo(["access"])}audit(){return new Do(["audit"])}};s(Rr,"KeyBuilder");var Ye=s(()=>new Rr([]),"keys"),Ci=s((e,t,r,a)=>{let o=t||"default",i={all:[o],resourceAll:[o,e||""],list:n=>[...i.resourceAll,"list",{...n,...$(r,a)||{}}],many:n=>[...i.resourceAll,"getMany",n&&n.map(String),{...$(r,a)||{}}].filter(l=>l!==void 0),detail:n=>[...i.resourceAll,"detail",n==null?void 0:n.toString(),{...$(r,a)||{}}],logList:n=>["logList",e,n,a].filter(l=>l!==void 0)};return i},"queryKeys"),Yt=s(e=>(t,r,a,o)=>{let i=r||"default";return{all:Ye().data(i).get(e),resourceAll:Ye().data(r).resource(t??"").get(e),list:n=>Ye().data(r).resource(t??"").action("list").params({...n,...$(a,o)||{}}).get(e),many:n=>Ye().data(r).resource(t??"").action("many").ids(...n??[]).params({...$(a,o)||{}}).get(e),detail:n=>Ye().data(r).resource(t??"").action("one").id(n??"").params({...$(a,o)||{}}).get(e),logList:n=>[...Ye().audit().resource(t).action("list").params(n).get(e),o].filter(l=>l!==void 0)}},"queryKeysReplacement"),Ei=s((e,t)=>!e||!t?!1:!!e.find(r=>r===t),"hasPermission"),Tr=s(e=>e.startsWith(":"),"isParameter"),Pt=s(e=>e.split("/").filter(t=>t!==""),"splitToSegments"),Li=s((e,t)=>{let r=Pt(e),a=Pt(t);return r.length===a.length},"isSegmentCountsSame"),je=s(e=>e.replace(/^\/|\/$/g,""),"removeLeadingTrailingSlashes"),wi=s((e,t)=>{let r=je(e),a=je(t);if(!Li(r,a))return!1;let o=Pt(r);return Pt(a).every((i,n)=>Tr(i)||i===o[n])},"checkBySegments"),Si=s((e,t,r)=>{let a=je(r||""),o=`${a}${a?"/":""}${e}`;return t==="list"?o=`${o}`:t==="create"?o=`${o}/create`:t==="edit"?o=`${o}/edit/:id`:t==="show"?o=`${o}/show/:id`:t==="clone"&&(o=`${o}/clone/:id`),`/${o.replace(/^\//,"")}`},"getDefaultActionPath"),et=s((e,t)=>{var r,a;let o=$((r=e.meta)==null?void 0:r.parent,(a=e.options)==null?void 0:a.parent,e.parentName);return o?t.find(i=>(i.identifier??i.name)===o)??{name:o}:void 0},"getParentResource"),qo=s((e,t,r)=>{let a=[],o=et(e,t);for(;o;)a.push(o),o=et(o,t);if(a.length!==0)return`/${a.reverse().map(i=>{var n;let l=r?((n=i.options)==null?void 0:n.route)??i.name:i.name;return je(l)}).join("/")}`},"getParentPrefixForResource"),we=s((e,t,r)=>{let a=[],o=["list","show","edit","create","clone"],i=qo(e,t,r);return o.forEach(n=>{var l,c;let d=r&&n==="clone"?e.create:e[n],v;typeof d=="function"||r?v=Si(r?((l=e.meta)==null?void 0:l.route)??((c=e.options)==null?void 0:c.route)??e.name:e.name,n,r?i:void 0):typeof d=="string"?v=d:typeof d=="object"&&(v=d.path),v&&a.push({action:n,resource:e,route:`/${v.replace(/^\//,"")}`})}),a},"getActionRoutesFromResource"),Di=s(e=>{var t;if(e.length===0)return;if(e.length===1)return e[0];let r=e.map(i=>({...i,splitted:Pt(je(i.route))})),a=((t=r[0])==null?void 0:t.splitted.length)??0,o=[...r];for(let i=0;i<a;i++){let n=o.filter(l=>!Tr(l.splitted[i]));if(n.length!==0){if(n.length===1){o=n;break}o=n}}return o[0]},"pickMatchedRoute"),qi=s((e,t)=>{let r=t.flatMap(o=>we(o,t)).filter(o=>wi(e,o.route)),a=Di(r);return{found:!!a,resource:a==null?void 0:a.resource,action:a==null?void 0:a.action,matchedRoute:a==null?void 0:a.route}},"matchResourceFromRoute"),ko=s((e,t)=>{var r;let a,o=qo(e,t,!0);if(o){let i=$(e.meta,e.options);a=`${o}/${(i==null?void 0:i.route)??e.name}`}else a=((r=e.options)==null?void 0:r.route)??e.name;return`/${a.replace(/^\//,"")}`},"routeGenerator"),ki=s(e=>{var t;let r=[],a={},o={},i,n;for(let l=0;l<e.length;l++){i=e[l];let c=i.route??((t=$(i==null?void 0:i.meta,i.options))==null?void 0:t.route)??"";a[c]=i,a[c].children=[],o[i.name]=i,o[i.name].children=[]}for(let l in a)a.hasOwnProperty(l)&&(n=a[l],n.parentName&&o[n.parentName]?o[n.parentName].children.push(n):r.push(n));return r},"createTreeView"),Mo=s(e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),"humanizeString"),No=U(E("react")),ha=U(E("pluralize")),Mi=U(E("react")),xo=s(({children:e})=>Mi.default.createElement("div",null,e),"DefaultLayout"),Pe={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"},overtime:{interval:1e3},textTransformers:{humanize:Mo,plural:ha.default.plural,singular:ha.default.singular},disableServerSideValidation:!1},tt=No.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:xo,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Pe}),Ni=s(({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:o,children:i,DashboardPage:n,Title:l,Layout:c=xo,Header:d,Sider:v,Footer:p,OffLayoutArea:L,LoginPage:u=fn,catchAll:f,liveMode:h="off",onLiveEvent:g,options:y})=>No.default.createElement(tt.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:l,undoableTimeout:o,Layout:c,Header:d,Sider:v,Footer:p,OffLayoutArea:L,DashboardPage:n,LoginPage:u,catchAll:f,liveMode:h,onLiveEvent:g,options:y}},i),"RefineContextProvider"),xi=s(({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:o,reactQueryDevtoolConfig:i,syncWithLocation:n,undoableTimeout:l,warnWhenUnsavedChanges:c}={})=>{var d,v,p,L,u,f,h,g;let y={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(e==null?void 0:e.mutationMode)??a??Pe.mutationMode,undoableTimeout:(e==null?void 0:e.undoableTimeout)??l??Pe.undoableTimeout,syncWithLocation:(e==null?void 0:e.syncWithLocation)??n??Pe.syncWithLocation,warnWhenUnsavedChanges:(e==null?void 0:e.warnWhenUnsavedChanges)??c??Pe.warnWhenUnsavedChanges,liveMode:(e==null?void 0:e.liveMode)??r??Pe.liveMode,redirect:{afterCreate:((d=e==null?void 0:e.redirect)==null?void 0:d.afterCreate)??Pe.redirect.afterCreate,afterClone:((v=e==null?void 0:e.redirect)==null?void 0:v.afterClone)??Pe.redirect.afterClone,afterEdit:((p=e==null?void 0:e.redirect)==null?void 0:p.afterEdit)??Pe.redirect.afterEdit},overtime:(e==null?void 0:e.overtime)??Pe.overtime,textTransformers:{humanize:((L=e==null?void 0:e.textTransformers)==null?void 0:L.humanize)??Pe.textTransformers.humanize,plural:((u=e==null?void 0:e.textTransformers)==null?void 0:u.plural)??Pe.textTransformers.plural,singular:((f=e==null?void 0:e.textTransformers)==null?void 0:f.singular)??Pe.textTransformers.singular},disableServerSideValidation:(e==null?void 0:e.disableServerSideValidation)??Pe.disableServerSideValidation,projectId:e==null?void 0:e.projectId,useNewQueryKeys:e==null?void 0:e.useNewQueryKeys},m=(e==null?void 0:e.disableTelemetry)??t??!1,b={clientConfig:((h=e==null?void 0:e.reactQuery)==null?void 0:h.clientConfig)??o??{},devtoolConfig:((g=e==null?void 0:e.reactQuery)==null?void 0:g.devtoolConfig)??i??{}};return{optionsWithDefaults:y,disableTelemetryWithDefault:m,reactQueryWithDefaults:b}},"handleRefineOptions"),Ri=s(({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit;default:return!1}},"redirectPage"),Pa=s(async(e,t,r)=>{let a=[];for(let[o,i]of e.entries())try{let n=await i();a.push(t(n,o))}catch(n){a.push(r(n,o))}return a},"sequentialPromises"),fe=s((e,t=[],r=!1)=>{if(!e)return;if(r)return t.find(i=>je(i.route??"")===je(e))||t.find(i=>i.name===e);let a=t.find(o=>o.identifier===e);return a||(a=t.find(o=>o.name===e)),a},"pickResource"),X=s((e,t,r)=>{if(t)return t;let a=fe(e,r),o=$(a==null?void 0:a.meta,a==null?void 0:a.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"},"pickDataProvider"),Jt=s(async e=>({data:(await Promise.all(e)).map(t=>t.data)}),"handleMultiple"),Ro=s(e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,o=(t==null?void 0:t.pageSize)||10,i=Math.ceil((e.total||0)/o);return a<i?Number(a)+1:void 0},"getNextPageParam"),To=s(e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},"getPreviousPageParam"),Oo=s(e=>{let t=[];return e.forEach(r=>{var a,o;t.push({...r,label:((a=r.meta)==null?void 0:a.label)??((o=r.options)==null?void 0:o.label),route:ko(r,e),canCreate:!!r.create,canEdit:!!r.edit,canShow:!!r.show,canDelete:r.canDelete})}),t},"legacyResourceTransform"),Ti=s(e=>Pt(je(e)).flatMap(t=>Tr(t)?[t.slice(1)]:[]),"pickRouteParams"),Oi=s((e,t={})=>e.reduce((r,a)=>{let o=t[a];return typeof o<"u"&&(r[a]=o),r},{}),"prepareRouteParams"),xe=s((e,t={},r={},a={})=>{let o=Ti(e),i=Oi(o,{...t,...typeof(r==null?void 0:r.id)<"u"?{id:r.id}:{},...typeof(r==null?void 0:r.action)<"u"?{action:r.action}:{},...typeof(r==null?void 0:r.resource)<"u"?{resource:r.resource}:{},...r==null?void 0:r.params,...a});return e.replace(/:([^\/]+)/g,(n,l)=>{let c=i[l];return typeof c<"u"?`${c}`:n})},"composeRoute"),bt=U(E("react")),Ao=bt.default.createContext({}),Ai=s(({children:e,isProvided:t,...r})=>{let{replace:a}=Oe(),o=s(async c=>{var d;try{return await((d=r.login)==null?void 0:d.call(r,c))}catch(v){return Promise.reject(v)}},"loginFunc"),i=s(async c=>{var d;try{return await((d=r.register)==null?void 0:d.call(r,c))}catch(v){return Promise.reject(v)}},"registerFunc"),n=s(async c=>{var d;try{return await((d=r.logout)==null?void 0:d.call(r,c))}catch(v){return Promise.reject(v)}},"logoutFunc"),l=s(async c=>{var d;try{return await((d=r.checkAuth)==null?void 0:d.call(r,c)),Promise.resolve()}catch(v){return v!=null&&v.redirectPath&&a(v.redirectPath),Promise.reject(v)}},"checkAuthFunc");return bt.default.createElement(Ao.Provider,{value:{...r,login:o,logout:n,checkAuth:l,register:i,isProvided:t}},e)},"LegacyAuthContextProvider"),Io=bt.default.createContext({}),Ii=s(({children:e,isProvided:t,...r})=>{let a=s(async d=>{var v;try{return await((v=r.login)==null?void 0:v.call(r,d))}catch(p){return console.warn("Unhandled Error in login: refine always expects a resolved promise.",p),Promise.reject(p)}},"handleLogin"),o=s(async d=>{var v;try{return await((v=r.register)==null?void 0:v.call(r,d))}catch(p){return console.warn("Unhandled Error in register: refine always expects a resolved promise.",p),Promise.reject(p)}},"handleRegister"),i=s(async d=>{var v;try{return await((v=r.logout)==null?void 0:v.call(r,d))}catch(p){return console.warn("Unhandled Error in logout: refine always expects a resolved promise.",p),Promise.reject(p)}},"handleLogout"),n=s(async d=>{var v;try{let p=await((v=r.check)==null?void 0:v.call(r,d));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in check: refine always expects a resolved promise.",p),Promise.reject(p)}},"handleCheck"),l=s(async d=>{var v;try{let p=await((v=r.forgotPassword)==null?void 0:v.call(r,d));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in forgotPassword: refine always expects a resolved promise.",p),Promise.reject(p)}},"handleForgotPassword"),c=s(async d=>{var v;try{let p=await((v=r.updatePassword)==null?void 0:v.call(r,d));return Promise.resolve(p)}catch(p){return console.warn("Unhandled Error in updatePassword: refine always expects a resolved promise.",p),Promise.reject(p)}},"handleUpdatePassword");return bt.default.createElement(Io.Provider,{value:{...r,login:a,logout:i,check:n,register:o,forgotPassword:l,updatePassword:c,isProvided:t}},e)},"AuthBindingsContextProvider"),Re=s(()=>bt.default.useContext(Ao),"useLegacyAuthContext"),Ue=s(()=>bt.default.useContext(Io),"useAuthBindingsContext"),ce=s(()=>{let e=Re(),t=Ue();return t.isProvided?{isLegacy:!1,...t}:e.isProvided?{isLegacy:!0,...e,check:e.checkAuth,onError:e.checkError,getIdentity:e.getUserIdentity}:null},"useActiveAuthProvider"),Fo=s(({hasPagination:e,pagination:t,configPagination:r}={})=>{let a=e===!1?"off":"server",o=(t==null?void 0:t.mode)??a,i=$(t==null?void 0:t.current,r==null?void 0:r.current)??1,n=$(t==null?void 0:t.pageSize,r==null?void 0:r.pageSize)??10;return{current:i,pageSize:n,mode:o}},"handlePaginationParams"),ba=E("react"),Ca=s(e=>{let[t,r]=(0,ba.useState)(!1);return(0,ba.useEffect)(()=>{let a=window.matchMedia(e);a.matches!==t&&r(a.matches);let o=s(()=>r(a.matches),"listener");return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[t,e]),t},"useMediaQuery"),cr=s((e,t,r,a)=>{let o=a?e(t,a,r):e(t,r);return o===t||typeof o>"u"?r??t:o},"safeTranslate");function $o(e,t,r,a,o){var i;let n={create:"Create new ",clone:`#${a??""} Clone `,edit:`#${a??""} Edit `,show:`#${a??""} Show `,list:""},l=(t==null?void 0:t.identifier)??(t==null?void 0:t.name),c=(t==null?void 0:t.label)??((i=t==null?void 0:t.meta)==null?void 0:i.label)??go(l,r==="list"?"plural":"singular"),d=o??c,v=cr(e,"documentTitle.default","refine"),p=cr(e,"documentTitle.suffix"," | refine"),L=v;return r&&l&&(L=cr(e,`documentTitle.${l}.${r}`,`${n[r]??""}${d}${p}`,{id:a})),L}s($o,"generateDefaultDocumentTitle");var Fi=E("react"),Ct=s(()=>{let{mutationMode:e,undoableTimeout:t}=(0,Fi.useContext)(tt);return{mutationMode:e,undoableTimeout:t}},"useMutationMode"),Ea=E("react"),Sr=U(E("react")),Uo=Sr.default.createContext({}),$i=s(({children:e})=>{let[t,r]=(0,Sr.useState)(!1);return Sr.default.createElement(Uo.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},"UnsavedWarnContextProvider"),Or=s(()=>{let{warnWhenUnsavedChanges:e}=(0,Ea.useContext)(tt),{warnWhen:t,setWarnWhen:r}=(0,Ea.useContext)(Uo);return{warnWhenUnsavedChanges:e,warnWhen:!!t,setWarnWhen:r??(()=>{})}},"useWarnAboutChange"),Ui=E("react"),Ko=s(()=>{let{syncWithLocation:e}=(0,Ui.useContext)(tt);return{syncWithLocation:e}},"useSyncWithLocation"),Ki=E("react"),Qi=s(()=>{let{Title:e}=(0,Ki.useContext)(tt);return e},"useTitle"),zi=E("react"),be=s(()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:i,hasDashboard:n,mutationMode:l,syncWithLocation:c,undoableTimeout:d,warnWhenUnsavedChanges:v,DashboardPage:p,LoginPage:L,catchAll:u,options:f}=(0,zi.useContext)(tt);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:i,hasDashboard:n,mutationMode:l,syncWithLocation:c,undoableTimeout:d,warnWhenUnsavedChanges:v,DashboardPage:p,LoginPage:L,catchAll:u,options:f}},"useRefineContext"),Ar=s(()=>{let{options:{textTransformers:e}}=be();return s((t="",r)=>{let a=e.humanize(t);return r==="singular"?e.singular(a):e.plural(a)},"getFriendlyName")},"useUserFriendlyName"),Ir=s(e=>{let{current:t,pageSize:r,sorter:a,sorters:o,filters:i}=xr.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:$(o,a)??[],parsedFilters:i??[]}},"parseTableParams"),Wi=s(e=>{let t=xr.default.stringify(e);return Ir(`/${t}`)},"parseTableParamsFromQuery"),Dr=s(e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,sorters:o,filters:i,...n}=e;return xr.default.stringify({...n,...r||{},sorters:$(o,a),filters:i},t)},"stringifyTableParams"),Qo=s((e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,"compareFilters"),zo=s((e,t)=>e.field==t.field,"compareSorters"),kt=s((e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,yi.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,vo.default)(e,t,r,Qo).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),"unionFilters"),qr=s((e,t)=>(0,vo.default)(e,t,zo).filter(r=>r.order!==void 0&&r.order!==null),"unionSorters"),kr=s((e,t)=>[...(0,po.default)(t,e,Qo),...e],"setInitialFilters"),Mr=s((e,t)=>[...(0,po.default)(t,e,zo),...e],"setInitialSorters"),_i=s((e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},"getDefaultSortOrder"),ji=s((e,t,r="eq")=>{let a=t==null?void 0:t.find(o=>{if(o.operator!=="or"&&o.operator!=="and"&&"field"in o){let{operator:i,field:n}=o;return n===e&&i===r}});if(a)return a.value||[]},"getDefaultFilter"),Vi=s(e=>new Promise((t,r)=>{let a=new FileReader,o=s(()=>{a.result&&(a.removeEventListener("load",o,!1),t(a.result))},"resultHandler");a.addEventListener("load",o,!1),a.readAsDataURL(e.originFileObj),a.onerror=i=>(a.removeEventListener("load",o,!1),r(i))}),"file2Base64"),J=s(()=>{let{options:{useNewQueryKeys:e}}=be();return{keys:Ye,preferLegacyKeys:!e}},"useKeys");function Wo({v3LegacyAuthProviderCompatible:e=!1,options:t}={}){let{getPermissions:r}=Re(),{getPermissions:a}=Ue(),{keys:o,preferLegacyKeys:i}=J(),n=(0,fa.useQuery)(o().auth().action("permissions").get(i),a??(()=>Promise.resolve(void 0)),{enabled:!e&&!!a,...e?{}:t,meta:{...e?{}:t==null?void 0:t.meta,...(0,ga.getXRay)("usePermissions",i)}}),l=(0,fa.useQuery)([...o().auth().action("permissions").get(i),"v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve(void 0)),{enabled:e&&!!r,...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,ga.getXRay)("usePermissions",i)}});return e?l:n}s(Wo,"usePermissions");var La=E("@tanstack/react-query"),wa=Y();function Fr({v3LegacyAuthProviderCompatible:e=!1,queryOptions:t}={}){let{getUserIdentity:r}=Re(),{getIdentity:a}=Ue(),{keys:o,preferLegacyKeys:i}=J(),n=(0,La.useQuery)(o().auth().action("identity").get(i),a??(()=>Promise.resolve({})),{enabled:!e&&!!a,retry:!1,...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,wa.getXRay)("useGetIdentity",i)}}),l=(0,La.useQuery)([...o().auth().action("identity").get(i),"v3LegacyAuthProviderCompatible"],r??(()=>Promise.resolve({})),{enabled:e&&!!r,retry:!1,...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,wa.getXRay)("useGetIdentity",i)}});return e?l:n}s(Fr,"useGetIdentity");var Sa=E("@tanstack/react-query"),Da=Y(),Bi=E("@tanstack/react-query"),$r=s(()=>{let e=(0,Bi.useQueryClient)(),{keys:t,preferLegacyKeys:r}=J();return s(async()=>{await Promise.all(["check","identity","permissions"].map(a=>e.invalidateQueries(t().auth().action(a).get(r))))},"invalidate")},"useInvalidateAuthStore");function Gt({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=$r(),a=me(),o=Te(),{push:i}=Oe(),{open:n,close:l}=rt(),{logout:c}=Re(),{logout:d}=Ue(),{keys:v,preferLegacyKeys:p}=J(),L=(0,Sa.useMutation)(v().auth().action("logout").get(p),d,{onSuccess:async(f,h)=>{let{success:g,error:y,redirectTo:m}=f,{redirectPath:b}=h??{},q=b??m;g&&(l==null||l("useLogout-error")),(y||!g)&&(n==null||n(mr(y))),await r(),q!==!1&&(a==="legacy"?i(q??"/login"):q&&o({to:q}))},onError:f=>{n==null||n(mr(f))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Da.getXRay)("useLogout",p)}}),u=(0,Sa.useMutation)([...v().auth().action("logout").get(p),"v3LegacyAuthProviderCompatible"],c,{onSuccess:async(f,h)=>{let g=(h==null?void 0:h.redirectPath)??f;if(await r(),g!==!1){if(g){a==="legacy"?i(g):o({to:g});return}a==="legacy"?i("/login"):o({to:"/login"})}},onError:f=>{n==null||n(mr(f))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Da.getXRay)("useLogout",p)}});return e?u:L}s(Gt,"useLogout");var mr=s(e=>({key:"useLogout-error",type:"error",message:(e==null?void 0:e.name)||"Logout Error",description:(e==null?void 0:e.message)||"Something went wrong during logout"}),"buildNotification"),Xi=U(E("react")),qa=E("@tanstack/react-query"),ka=Y(),Hi=U(E("qs"));function er({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=$r(),a=me(),o=Te(),{replace:i}=Oe(),n=Ke(),{useLocation:l}=ke(),{search:c}=l(),{close:d,open:v}=rt(),{login:p}=Re(),{login:L}=Ue(),{keys:u,preferLegacyKeys:f}=J(),h=Xi.default.useMemo(()=>{var m;return a==="legacy"?Hi.default.parse(c,{ignoreQueryPrefix:!0}).to:(m=n.params)==null?void 0:m.to},[a,n.params,c]),g=(0,qa.useMutation)(u().auth().action("login").get(f),L,{onSuccess:async({success:m,redirectTo:b,error:q})=>{m&&(d==null||d("login-error")),(q||!m)&&(v==null||v(vr(q))),await r(),h&&m?a==="legacy"?i(h):o({to:h,type:"replace"}):b?a==="legacy"?i(b):o({to:b,type:"replace"}):a==="legacy"&&i("/")},onError:m=>{v==null||v(vr(m))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,ka.getXRay)("useLogin",f)}}),y=(0,qa.useMutation)([...u().auth().action("login").get(f),"v3LegacyAuthProviderCompatible"],p,{onSuccess:async m=>{await r(),h&&i(h),m!==!1&&!h&&(typeof m=="string"?a==="legacy"?i(m):o({to:m,type:"replace"}):a==="legacy"?i("/"):o({to:"/",type:"replace"})),d==null||d("login-error")},onError:m=>{v==null||v(vr(m))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,ka.getXRay)("useLogin",f)}});return e?y:g}s(er,"useLogin");var vr=s(e=>({message:(e==null?void 0:e.name)||"Login Error",description:(e==null?void 0:e.message)||"Invalid credentials",key:"login-error",type:"error"}),"buildNotification"),Ma=E("@tanstack/react-query"),Na=Y();function Ur({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=$r(),a=me(),o=Te(),{replace:i}=Oe(),{register:n}=Re(),{register:l}=Ue(),{close:c,open:d}=rt(),{keys:v,preferLegacyKeys:p}=J(),L=(0,Ma.useMutation)(v().auth().action("register").get(p),l,{onSuccess:async({success:f,redirectTo:h,error:g})=>{f&&(c==null||c("register-error")),(g||!f)&&(d==null||d(pr(g))),await r(),h?a==="legacy"?i(h):o({to:h,type:"replace"}):a==="legacy"&&i("/")},onError:f=>{d==null||d(pr(f))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Na.getXRay)("useRegister",p)}}),u=(0,Ma.useMutation)([...v().auth().action("register").get(p),"v3LegacyAuthProviderCompatible"],n,{onSuccess:async f=>{await r(),f!==!1&&(f?a==="legacy"?i(f):o({to:f,type:"replace"}):a==="legacy"?i("/"):o({to:"/",type:"replace"}),c==null||c("register-error"))},onError:f=>{d==null||d(pr(f))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Na.getXRay)("useRegister",p)}});return e?u:L}s(Ur,"useRegister");var pr=s(e=>({message:(e==null?void 0:e.name)||"Register Error",description:(e==null?void 0:e.message)||"Error while registering",key:"register-error",type:"error"}),"buildNotification"),xa=E("@tanstack/react-query"),Ra=Y();function Kr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=me(),a=Te(),{replace:o}=Oe(),{forgotPassword:i}=Re(),{forgotPassword:n}=Ue(),{close:l,open:c}=rt(),{keys:d,preferLegacyKeys:v}=J(),p=(0,xa.useMutation)(d().auth().action("forgotPassword").get(v),n,{onSuccess:({success:u,redirectTo:f,error:h})=>{u&&(l==null||l("forgot-password-error")),(h||!u)&&(c==null||c(fr(h))),f&&(r==="legacy"?o(f):a({to:f,type:"replace"}))},onError:u=>{c==null||c(fr(u))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Ra.getXRay)("useForgotPassword",v)}}),L=(0,xa.useMutation)([...d().auth().action("forgotPassword").get(v),"v3LegacyAuthProviderCompatible"],i,{onSuccess:u=>{u!==!1&&u&&(r==="legacy"?o(u):a({to:u,type:"replace"})),l==null||l("forgot-password-error")},onError:u=>{c==null||c(fr(u))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Ra.getXRay)("useForgotPassword",v)}});return e?L:p}s(Kr,"useForgotPassword");var fr=s(e=>({message:(e==null?void 0:e.name)||"Forgot Password Error",description:(e==null?void 0:e.message)||"Error while resetting password",key:"forgot-password-error",type:"error"}),"buildNotification"),Gi=U(E("react")),Ta=E("@tanstack/react-query"),Oa=Y(),Zi=U(E("qs"));function Qr({v3LegacyAuthProviderCompatible:e,mutationOptions:t}={}){let r=me(),a=Te(),{replace:o}=Oe(),{updatePassword:i}=Re(),{updatePassword:n}=Ue(),{close:l,open:c}=rt(),{keys:d,preferLegacyKeys:v}=J(),p=Ke(),{useLocation:L}=ke(),{search:u}=L(),f=Gi.default.useMemo(()=>r==="legacy"?Zi.default.parse(u,{ignoreQueryPrefix:!0})??{}:p.params??{},[u,p,r]),h=(0,Ta.useMutation)(d().auth().action("updatePassword").get(v),async y=>n==null?void 0:n({...f,...y}),{onSuccess:({success:y,redirectTo:m,error:b})=>{y&&(l==null||l("update-password-error")),(b||!y)&&(c==null||c(gr(b))),m&&(r==="legacy"?o(m):a({to:m,type:"replace"}))},onError:y=>{c==null||c(gr(y))},...e===!0?{}:t,meta:{...e===!0?{}:t==null?void 0:t.meta,...(0,Oa.getXRay)("useUpdatePassword",v)}}),g=(0,Ta.useMutation)([...d().auth().action("updatePassword").get(v),"v3LegacyAuthProviderCompatible"],async y=>i==null?void 0:i({...f,...y}),{onSuccess:y=>{y!==!1&&y&&(r==="legacy"?o(y):a({to:y,type:"replace"})),l==null||l("update-password-error")},onError:y=>{c==null||c(gr(y))},...e?t:{},meta:{...e?t==null?void 0:t.meta:{},...(0,Oa.getXRay)("useUpdatePassword",v)}});return e?g:h}s(Qr,"useUpdatePassword");var gr=s(e=>({message:(e==null?void 0:e.name)||"Update Password Error",description:(e==null?void 0:e.message)||"Error while updating password",key:"update-password-error",type:"error"}),"buildNotification"),Aa=E("@tanstack/react-query"),Ia=Y();function tr({v3LegacyAuthProviderCompatible:e=!1,params:t}={}){let{checkAuth:r}=Re(),{check:a}=Ue(),{keys:o,preferLegacyKeys:i}=J(),n=(0,Aa.useQuery)(o().auth().action("check").params(t).get(i),async()=>await(a==null?void 0:a(t))??{},{retry:!1,enabled:!e,meta:{...(0,Ia.getXRay)("useIsAuthenticated",i)}}),l=(0,Aa.useQuery)([...o().auth().action("check").params(t).get(i),"v3LegacyAuthProviderCompatible"],async()=>await(r==null?void 0:r(t))??{},{retry:!1,enabled:e,meta:{...(0,Ia.getXRay)("useIsAuthenticated",i)}});return e?l:n}s(tr,"useIsAuthenticated");var Yi=tr,Fa=E("@tanstack/react-query"),$a=Y();function Ce({v3LegacyAuthProviderCompatible:e=!1}={}){let t=me(),r=Te(),{replace:a}=Oe(),{checkError:o}=Re(),{onError:i}=Ue(),{keys:n,preferLegacyKeys:l}=J(),{mutate:c}=Gt({v3LegacyAuthProviderCompatible:!!e}),{mutate:d}=Gt({v3LegacyAuthProviderCompatible:!!e}),v=(0,Fa.useMutation)(n().auth().action("onError").get(l),i,{onSuccess:({logout:L,redirectTo:u})=>{if(L){d({redirectPath:u});return}if(u){t==="legacy"?a(u):r({to:u,type:"replace"});return}},meta:{...(0,$a.getXRay)("useOnError",l)}}),p=(0,Fa.useMutation)([...n().auth().action("onError").get(l),"v3LegacyAuthProviderCompatible"],o,{onError:L=>{c({redirectPath:L})},meta:{...(0,$a.getXRay)("useOnError",l)}});return e?p:v}s(Ce,"useOnError");var Ji=Ce,_o=s(()=>{let{isProvided:e}=Re(),{isProvided:t}=Ue();return!!(t||e)},"useIsExistAuthentication"),es=E("@tanstack/react-query"),ts=Y(),yr=E("react"),ve=s(({isLoading:e,interval:t,onInterval:r})=>{let[a,o]=(0,yr.useState)(void 0),{options:i}=be(),{overtime:n}=i,l=t??n.interval,c=r??(n==null?void 0:n.onInterval);return(0,yr.useEffect)(()=>{let d;return e&&(d=setInterval(()=>{o(v=>v===void 0?l:v+l)},l)),()=>{clearInterval(d),o(void 0)}},[e,l]),(0,yr.useEffect)(()=>{c&&a&&c(a)},[a]),{elapsedTime:a}},"useLoadingOvertime"),zr=s(({resource:e,config:t,filters:r,hasPagination:a,pagination:o,sorters:i,queryOptions:n,successNotification:l,errorNotification:c,meta:d,metaData:v,liveMode:p,onLiveEvent:L,liveParams:u,dataProviderName:f,overtimeOptions:h})=>{let{resources:g,resource:y,identifier:m}=G(e),b=ye(),q=ae(),I=ce(),{mutate:C}=Ce({v3LegacyAuthProviderCompatible:!!(I!=null&&I.isLegacy)}),P=qe(),k=ue(),{keys:w,preferLegacyKeys:M}=J(),R=X(m,f,g),D=$(d,v),S=$(r,t==null?void 0:t.filters),T=$(i,t==null?void 0:t.sort),N=$(a,t==null?void 0:t.hasPagination),A=Fo({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:N}),x=A.mode==="server",F=k({resource:y,meta:D}),j={meta:F,metaData:F,filters:S,hasPagination:x,pagination:A,sorters:T,config:{...t,sort:T}},O=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,{getList:V}=b(R);Tt({resource:m,types:["*"],params:{meta:F,metaData:F,pagination:A,hasPagination:x,sort:T,sorters:T,filters:S,subscriptionType:"useList",...u},channel:`resources/${y==null?void 0:y.name}`,enabled:O,liveMode:p,onLiveEvent:L});let W=(0,es.useQuery)(w().data(R).resource(m??"").action("list").params({...D||{},filters:S,hasPagination:x,...x&&{pagination:A},...i&&{sorters:i},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}).get(M),({queryKey:Q,pageParam:z,signal:_})=>V({resource:(y==null?void 0:y.name)??"",pagination:A,hasPagination:x,filters:S,sort:T,sorters:T,meta:{...F,queryContext:{queryKey:Q,pageParam:z,signal:_}},metaData:{...F,queryContext:{queryKey:Q,pageParam:z,signal:_}}}),{...n,enabled:typeof(n==null?void 0:n.enabled)<"u"?n==null?void 0:n.enabled:!!(y!=null&&y.name),select:Q=>{var z;let _=Q,{current:pe,mode:ge,pageSize:Me}=A;return ge==="client"&&(_={..._,data:_.data.slice((pe-1)*Me,pe*Me),total:_.total}),n!=null&&n.select?(z=n==null?void 0:n.select)==null?void 0:z.call(n,_):_},onSuccess:Q=>{var z;(z=n==null?void 0:n.onSuccess)==null||z.call(n,Q);let _=typeof l=="function"?l(Q,j,m):l;P(_)},onError:Q=>{var z;C(Q),(z=n==null?void 0:n.onError)==null||z.call(n,Q);let _=typeof c=="function"?c(Q,j,m):c;P(_,{key:`${m}-useList-notification`,message:q("notifications.error",{statusCode:Q.statusCode},`Error (status code: ${Q.statusCode})`),description:Q.message,type:"error"})},meta:{...n==null?void 0:n.meta,...(0,ts.getXRay)("useList",M)}}),{elapsedTime:B}=ve({isLoading:W.isFetching,interval:h==null?void 0:h.interval,onInterval:h==null?void 0:h.onInterval});return{...W,overtime:{elapsedTime:B}}},"useList"),rs=E("@tanstack/react-query"),as=Y(),Wr=s(({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:o,meta:i,metaData:n,liveMode:l,onLiveEvent:c,liveParams:d,dataProviderName:v,overtimeOptions:p})=>{let{resources:L,resource:u,identifier:f}=G(e),h=ye(),g=ae(),y=ce(),{mutate:m}=Ce({v3LegacyAuthProviderCompatible:!!(y!=null&&y.isLegacy)}),b=qe(),q=ue(),{keys:I,preferLegacyKeys:C}=J(),P=$(i,n),k=X(f,v,L),{getOne:w}=h(k),M=q({resource:u,meta:P});Tt({resource:f,types:["*"],channel:`resources/${u==null?void 0:u.name}`,params:{ids:t?[t]:[],id:t,meta:M,metaData:M,subscriptionType:"useOne",...d},enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof(u==null?void 0:u.name)<"u"&&typeof t<"u",liveMode:l,onLiveEvent:c});let R=(0,rs.useQuery)(I().data(k).resource(f??"").action("one").id(t??"").params({...P||{}}).get(C),({queryKey:S,pageParam:T,signal:N})=>w({resource:(u==null?void 0:u.name)??"",id:t,meta:{...M,queryContext:{queryKey:S,pageParam:T,signal:N}},metaData:{...M,queryContext:{queryKey:S,pageParam:T,signal:N}}}),{...r,enabled:typeof(r==null?void 0:r.enabled)<"u"?r==null?void 0:r.enabled:typeof t<"u",onSuccess:S=>{var T;(T=r==null?void 0:r.onSuccess)==null||T.call(r,S);let N=typeof a=="function"?a(S,{id:t,...M},f):a;b(N)},onError:S=>{var T;m(S),(T=r==null?void 0:r.onError)==null||T.call(r,S);let N=typeof o=="function"?o(S,{id:t,...M},f):o;b(N,{key:`${t}-${f}-getOne-notification`,message:g("notifications.error",{statusCode:S.statusCode},`Error (status code: ${S.statusCode})`),description:S.message,type:"error"})},meta:{...r==null?void 0:r.meta,...(0,as.getXRay)("useOne",C)}}),{elapsedTime:D}=ve({isLoading:R.isFetching,interval:p==null?void 0:p.interval,onInterval:p==null?void 0:p.onInterval});return{...R,overtime:{elapsedTime:D}}},"useOne"),os=E("@tanstack/react-query"),ns=Y(),jo=s(({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:o,meta:i,metaData:n,liveMode:l,onLiveEvent:c,liveParams:d,dataProviderName:v,overtimeOptions:p})=>{let{resources:L,resource:u,identifier:f}=G(e),h=ye(),g=ae(),y=ce(),{mutate:m}=Ce({v3LegacyAuthProviderCompatible:!!(y!=null&&y.isLegacy)}),b=qe(),q=ue(),{keys:I,preferLegacyKeys:C}=J(),P=$(i,n),k=X(f,v,L),w=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0,{getMany:M,getOne:R}=h(k),D=q({resource:u,meta:P});Tt({resource:f,types:["*"],params:{ids:t,meta:D,metaData:D,subscriptionType:"useMany",...d},channel:`resources/${u.name}`,enabled:w,liveMode:l,onLiveEvent:c});let S=(0,os.useQuery)(I().data(k).resource(f).action("many").ids(...t).params({...P||{}}).get(C),({queryKey:N,pageParam:A,signal:x})=>M?M({resource:u==null?void 0:u.name,ids:t,meta:{...D,queryContext:{queryKey:N,pageParam:A,signal:x}},metaData:{...D,queryContext:{queryKey:N,pageParam:A,signal:x}}}):Jt(t.map(F=>R({resource:u==null?void 0:u.name,id:F,meta:{...D,queryContext:{queryKey:N,pageParam:A,signal:x}},metaData:{...D,queryContext:{queryKey:N,pageParam:A,signal:x}}}))),{...r,onSuccess:N=>{var A;(A=r==null?void 0:r.onSuccess)==null||A.call(r,N);let x=typeof a=="function"?a(N,t,f):a;b(x)},onError:N=>{var A;m(N),(A=r==null?void 0:r.onError)==null||A.call(r,N);let x=typeof o=="function"?o(N,t,f):o;b(x,{key:`${t[0]}-${f}-getMany-notification`,message:g("notifications.error",{statusCode:N.statusCode},`Error (status code: ${N.statusCode})`),description:N.message,type:"error"})},meta:{...r==null?void 0:r.meta,...(0,ns.getXRay)("useMany",C)}}),{elapsedTime:T}=ve({isLoading:S.isFetching,interval:p==null?void 0:p.interval,onInterval:p==null?void 0:p.onInterval});return{...S,overtime:{elapsedTime:T}}},"useMany"),Ua=E("@tanstack/react-query"),is=Y(),Xt=U(E("react")),hr=U(E("lodash/isEqual")),Vo=Xt.default.createContext({notifications:[],notificationDispatch:()=>!1}),ss=[],us=s((e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,hr.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,hr.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,hr.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},"undoableQueueReducer"),ls=s(({children:e})=>{let[t,r]=(0,Xt.useReducer)(us,ss),a={notifications:t,notificationDispatch:r};return Xt.default.createElement(Vo.Provider,{value:a},e,typeof window<"u"&&t.map(o=>Xt.default.createElement(yn,{key:`${o.id}-${o.resource}-queue`,notification:o})))},"UndoableQueueContextProvider"),Nr=s(({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:a}=G(),o=(0,Ua.useQueryClient)(),i=ye(),{mutationMode:n,undoableTimeout:l}=Ct(),c=ae(),d=ce(),{mutate:v}=Ce({v3LegacyAuthProviderCompatible:!!(d!=null&&d.isLegacy)}),p=dt(),{log:L}=mt(),{notificationDispatch:u}=Et(),f=qe(),h=Be(),g=ue(),{options:{textTransformers:y}}=be(),{keys:m,preferLegacyKeys:b}=J(),q=(0,Ua.useMutation)(({id:C,values:P,resource:k,mutationMode:w,undoableTimeout:M,onCancel:R,meta:D,metaData:S,dataProviderName:T})=>{let{resource:N,identifier:A}=a(k),x=g({resource:N,meta:$(D,S)}),F=w??n,j=M??l;return F!=="undoable"?i(X(A,T,r)).update({resource:N.name,id:C,variables:P,meta:x,metaData:x}):new Promise((O,V)=>{let W=s(()=>{i(X(A,T,r)).update({resource:N.name,id:C,variables:P,meta:x,metaData:x}).then(Q=>O(Q)).catch(Q=>V(Q))},"doMutation"),B=s(()=>{V({message:"mutationCancelled"})},"cancelMutation");R&&R(B),u({type:"ADD",payload:{id:C,resource:A,cancelMutation:B,doMutation:W,seconds:j,isSilent:!!R}})})},{onMutate:async({resource:C,id:P,mutationMode:k,values:w,dataProviderName:M,meta:R,metaData:D,optimisticUpdateMap:S={list:!0,many:!0,detail:!0}})=>{let{identifier:T}=a(C),N=$(R,D),A=Yt(b)(T,X(T,M,r),N),x=m().data(X(T,M,r)).resource(T),F=o.getQueriesData(x.get(b)),j=k??n;return await o.cancelQueries(x.get(b),void 0,{silent:!0}),j!=="pessimistic"&&(S.list&&o.setQueriesData(x.action("list").params(N??{}).get(b),O=>{if(typeof S.list=="function")return S.list(O,w,P);if(!O)return null;let V=O.data.map(W=>{var B;return((B=W.id)==null?void 0:B.toString())===(P==null?void 0:P.toString())?{id:P,...W,...w}:W});return{...O,data:V}}),S.many&&o.setQueriesData(x.action("many").get(b),O=>{if(typeof S.many=="function")return S.many(O,w,P);if(!O)return null;let V=O.data.map(W=>{var B;return((B=W.id)==null?void 0:B.toString())===(P==null?void 0:P.toString())&&(W={id:P,...W,...w}),W});return{...O,data:V}}),S.detail&&o.setQueriesData(x.action("one").id(P).params(N??{}).get(b),O=>typeof S.detail=="function"?S.detail(O,w,P):O?{...O,data:{...O.data,...w}}:null)),{previousQueries:F,queryKey:A}},onSettled:(C,P,{id:k,resource:w,dataProviderName:M,invalidates:R=["list","many","detail"]})=>{let{identifier:D}=a(w);h({resource:D,dataProviderName:X(D,M,r),invalidates:R,id:k}),u({type:"REMOVE",payload:{id:k,resource:D}})},onSuccess:(C,{id:P,resource:k,successNotification:w,dataProviderName:M,values:R,meta:D,metaData:S},T)=>{var N;let{resource:A,identifier:x}=a(k),F=y.singular(x),j=typeof w=="function"?w(C,{id:P,values:R},x):w;f(j,{key:`${P}-${x}-notification`,description:c("notifications.success","Successful"),message:c("notifications.editSuccess",{resource:c(`${x}.${x}`,F)},`Successfully updated ${F}`),type:"success"}),p==null||p({channel:`resources/${A.name}`,type:"updated",payload:{ids:(N=C.data)!=null&&N.id?[C.data.id]:void 0},date:new Date});let O;if(T){let z=o.getQueryData(T.queryKey.detail(P));O=Object.keys(R||{}).reduce((_,pe)=>{var ge;return _[pe]=(ge=z==null?void 0:z.data)==null?void 0:ge[pe],_},{})}let{fields:V,operation:W,variables:B,...Q}=$(D,S)||{};L==null||L.mutate({action:"update",resource:A.name,data:R,previousData:O,meta:{id:P,dataProviderName:X(x,M,r),...Q}})},onError:(C,{id:P,resource:k,errorNotification:w,values:M},R)=>{let{identifier:D}=a(k);if(R)for(let S of R.previousQueries)o.setQueryData(S[0],S[1]);if(C.message!=="mutationCancelled"){v==null||v(C);let S=y.singular(D),T=typeof w=="function"?w(C,{id:P,values:M},D):w;f(T,{key:`${P}-${D}-notification`,message:c("notifications.editError",{resource:c(`${D}.${D}`,S),statusCode:C.statusCode},`Error when updating ${S} (status code: ${C.statusCode})`),description:C.message,type:"error"})}},mutationKey:m().data().mutation("update").get(b),...e,meta:{...e==null?void 0:e.meta,...(0,is.getXRay)("useUpdate",b)}}),{elapsedTime:I}=ve({isLoading:q.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...q,overtime:{elapsedTime:I}}},"useUpdate"),ds=E("@tanstack/react-query"),cs=Y(),_r=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=ce(),{mutate:a}=Ce({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=ye(),i=Be(),{resources:n,select:l}=G(),c=ae(),d=dt(),{log:v}=mt(),p=qe(),L=ue(),{options:{textTransformers:u}}=be(),{keys:f,preferLegacyKeys:h}=J(),g=(0,ds.useMutation)(({resource:m,values:b,meta:q,metaData:I,dataProviderName:C})=>{let{resource:P,identifier:k}=l(m),w=L({resource:P,meta:$(q,I)});return o(X(k,C,n)).create({resource:P.name,variables:b,meta:w,metaData:w})},{onSuccess:(m,{resource:b,successNotification:q,dataProviderName:I,invalidates:C=["list","many"],values:P,meta:k,metaData:w})=>{var M,R;let{resource:D,identifier:S}=l(b),T=u.singular(S),N=typeof q=="function"?q(m,P,S):q;p(N,{key:`create-${S}-notification`,message:c("notifications.createSuccess",{resource:c(`${S}.${S}`,T)},`Successfully created ${T}`),description:c("notifications.success","Success"),type:"success"}),i({resource:S,dataProviderName:X(S,I,n),invalidates:C}),d==null||d({channel:`resources/${D.name}`,type:"created",payload:{ids:(M=m==null?void 0:m.data)!=null&&M.id?[m.data.id]:void 0},date:new Date});let A=L({resource:D,meta:$(k,w)}),{fields:x,operation:F,variables:j,...O}=A||{};v==null||v.mutate({action:"create",resource:D.name,data:P,meta:{dataProviderName:X(S,I,n),id:((R=m==null?void 0:m.data)==null?void 0:R.id)??void 0,...O}})},onError:(m,{resource:b,errorNotification:q,values:I})=>{a(m);let{identifier:C}=l(b),P=u.singular(C),k=typeof q=="function"?q(m,I,C):q;p(k,{key:`create-${C}-notification`,description:m.message,message:c("notifications.createError",{resource:c(`${C}.${C}`,P),statusCode:m.statusCode},`There was an error creating ${P} (status code: ${m.statusCode})`),type:"error"})},mutationKey:f().data().mutation("create").get(h),...e,meta:{...e==null?void 0:e.meta,...(0,cs.getXRay)("useCreate",h)}}),{elapsedTime:y}=ve({isLoading:g.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...g,overtime:{elapsedTime:y}}},"useCreate"),Ka=E("@tanstack/react-query"),ms=Y(),vs=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=ce(),{mutate:a}=Ce({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=ye(),{resources:i,select:n}=G(),l=(0,Ka.useQueryClient)(),{mutationMode:c,undoableTimeout:d}=Ct(),{notificationDispatch:v}=Et(),p=ae(),L=dt(),{log:u}=mt(),f=qe(),h=Be(),g=ue(),{options:{textTransformers:y}}=be(),{keys:m,preferLegacyKeys:b}=J(),q=(0,Ka.useMutation)(({id:C,mutationMode:P,undoableTimeout:k,resource:w,onCancel:M,meta:R,metaData:D,dataProviderName:S,values:T})=>{let{resource:N,identifier:A}=n(w),x=g({resource:N,meta:$(R,D)}),F=P??c,j=k??d;return F!=="undoable"?o(X(A,S,i)).deleteOne({resource:N.name,id:C,meta:x,metaData:x,variables:T}):new Promise((O,V)=>{let W=s(()=>{o(X(A,S,i)).deleteOne({resource:N.name,id:C,meta:x,metaData:x,variables:T}).then(Q=>O(Q)).catch(Q=>V(Q))},"doMutation"),B=s(()=>{V({message:"mutationCancelled"})},"cancelMutation");M&&M(B),v({type:"ADD",payload:{id:C,resource:A,cancelMutation:B,doMutation:W,seconds:j,isSilent:!!M}})})},{onMutate:async({id:C,resource:P,mutationMode:k,dataProviderName:w,meta:M,metaData:R})=>{let{identifier:D}=n(P),S=$(M,R),T=Yt(b)(D,X(D,w,i),S),N=m().data(X(D,w,i)).resource(D),A=k??c;await l.cancelQueries(N.get(b),void 0,{silent:!0});let x=l.getQueriesData(N.get(b));return A!=="pessimistic"&&(l.setQueriesData(N.action("list").params(S??{}).get(b),F=>F?{data:F.data.filter(j=>{var O;return((O=j.id)==null?void 0:O.toString())!==C.toString()}),total:F.total-1}:null),l.setQueriesData(N.action("many").get(b),F=>{if(!F)return null;let j=F.data.filter(O=>{var V;return((V=O.id)==null?void 0:V.toString())!==(C==null?void 0:C.toString())});return{...F,data:j}})),{previousQueries:x,queryKey:T}},onSettled:(C,P,{id:k,resource:w,dataProviderName:M,invalidates:R=["list","many"]})=>{let{identifier:D}=n(w);h({resource:D,dataProviderName:X(D,M,i),invalidates:R}),v({type:"REMOVE",payload:{id:k,resource:D}})},onSuccess:(C,{id:P,resource:k,successNotification:w,dataProviderName:M,meta:R,metaData:D},S)=>{let{resource:T,identifier:N}=n(k),A=y.singular(N);l.removeQueries(S==null?void 0:S.queryKey.detail(P));let x=typeof w=="function"?w(C,P,N):w;f(x,{key:`${P}-${N}-notification`,description:p("notifications.success","Success"),message:p("notifications.deleteSuccess",{resource:p(`${N}.${N}`,A)},`Successfully deleted a ${A}`),type:"success"}),L==null||L({channel:`resources/${T.name}`,type:"deleted",payload:{ids:[P]},date:new Date});let F=g({resource:T,meta:$(R,D)}),{fields:j,operation:O,variables:V,...W}=F||{};u==null||u.mutate({action:"delete",resource:T.name,meta:{id:P,dataProviderName:X(N,M,i),...W}}),l.removeQueries(S==null?void 0:S.queryKey.detail(P))},onError:(C,{id:P,resource:k,errorNotification:w},M)=>{let{identifier:R}=n(k);if(M)for(let D of M.previousQueries)l.setQueryData(D[0],D[1]);if(C.message!=="mutationCancelled"){a(C);let D=y.singular(R),S=typeof w=="function"?w(C,P,R):w;f(S,{key:`${P}-${R}-notification`,message:p("notifications.deleteError",{resource:D,statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}},mutationKey:m().data().mutation("delete").get(b),...e,meta:{...e==null?void 0:e.meta,...(0,ms.getXRay)("useDelete",b)}}),{elapsedTime:I}=ve({isLoading:q.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...q,overtime:{elapsedTime:I}}},"useDelete"),ps=E("@tanstack/react-query"),fs=Y(),Bo=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=ye(),{resources:a,select:o}=G(),i=ae(),n=dt(),l=qe(),c=Be(),{log:d}=mt(),v=ue(),{options:{textTransformers:p}}=be(),{keys:L,preferLegacyKeys:u}=J(),f=(0,ps.useMutation)(({resource:g,values:y,meta:m,metaData:b,dataProviderName:q})=>{let{resource:I,identifier:C}=o(g),P=v({resource:I,meta:$(m,b)}),k=r(X(C,q,a));return k.createMany?k.createMany({resource:I.name,variables:y,meta:P,metaData:P}):Jt(y.map(w=>k.create({resource:I.name,variables:w,meta:P,metaData:P})))},{onSuccess:(g,{resource:y,successNotification:m,dataProviderName:b,invalidates:q=["list","many"],values:I,meta:C,metaData:P})=>{let{resource:k,identifier:w}=o(y),M=p.plural(w),R=typeof m=="function"?m(g,I,w):m;l(R,{key:`createMany-${w}-notification`,message:i("notifications.createSuccess",{resource:i(`${w}.${w}`,w)},`Successfully created ${M}`),description:i("notifications.success","Success"),type:"success"}),c({resource:w,dataProviderName:X(w,b,a),invalidates:q});let D=g==null?void 0:g.data.filter(F=>(F==null?void 0:F.id)!==void 0).map(F=>F.id);n==null||n({channel:`resources/${k.name}`,type:"created",payload:{ids:D},date:new Date});let S=v({resource:k,meta:$(C,P)}),{fields:T,operation:N,variables:A,...x}=S||{};d==null||d.mutate({action:"createMany",resource:k.name,data:I,meta:{dataProviderName:X(w,b,a),ids:D,...x}})},onError:(g,{resource:y,errorNotification:m,values:b})=>{let{identifier:q}=o(y),I=typeof m=="function"?m(g,b,q):m;l(I,{key:`createMany-${q}-notification`,description:g.message,message:i("notifications.createError",{resource:i(`${q}.${q}`,q),statusCode:g.statusCode},`There was an error creating ${q} (status code: ${g.statusCode}`),type:"error"})},mutationKey:L().data().mutation("createMany").get(u),...e,meta:{...e==null?void 0:e.meta,...(0,fs.getXRay)("useCreateMany",u)}}),{elapsedTime:h}=ve({isLoading:f.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...f,overtime:{elapsedTime:h}}},"useCreateMany"),Qa=E("@tanstack/react-query"),gs=Y(),ys=s(({mutationOptions:e,overtimeOptions:t}={})=>{let{resources:r,select:a}=G(),o=(0,Qa.useQueryClient)(),i=ye(),n=ae(),{mutationMode:l,undoableTimeout:c}=Ct(),d=ce(),{mutate:v}=Ce({v3LegacyAuthProviderCompatible:!!(d!=null&&d.isLegacy)}),{notificationDispatch:p}=Et(),L=dt(),u=qe(),f=Be(),{log:h}=mt(),g=ue(),{options:{textTransformers:y}}=be(),{keys:m,preferLegacyKeys:b}=J(),q=(0,Qa.useMutation)(({ids:C,values:P,resource:k,onCancel:w,mutationMode:M,undoableTimeout:R,meta:D,metaData:S,dataProviderName:T})=>{let{resource:N,identifier:A}=a(k),x=g({resource:N,meta:$(D,S)}),F=M??l,j=R??c,O=i(X(A,T,r)),V=s(()=>O.updateMany?O.updateMany({resource:N.name,ids:C,variables:P,meta:x,metaData:x}):Jt(C.map(W=>O.update({resource:N.name,id:W,variables:P,meta:x,metaData:x}))),"mutationFn");return F!=="undoable"?V():new Promise((W,B)=>{let Q=s(()=>{V().then(_=>W(_)).catch(_=>B(_))},"doMutation"),z=s(()=>{B({message:"mutationCancelled"})},"cancelMutation");w&&w(z),p({type:"ADD",payload:{id:C,resource:A,cancelMutation:z,doMutation:Q,seconds:j,isSilent:!!w}})})},{onMutate:async({resource:C,ids:P,values:k,mutationMode:w,dataProviderName:M,meta:R,metaData:D,optimisticUpdateMap:S={list:!0,many:!0,detail:!0}})=>{let{identifier:T}=a(C),N=$(R,D),A=Yt(b)(T,X(T,M,r),$(R,D)),x=m().data(X(T,M,r)).resource(T),F=w??l;await o.cancelQueries(x.get(b),void 0,{silent:!0});let j=o.getQueriesData(x.get(b));if(F!=="pessimistic"&&(S.list&&o.setQueriesData(x.action("list").params(N??{}).get(b),O=>{if(typeof S.list=="function")return S.list(O,k,P);if(!O)return null;let V=O.data.map(W=>W.id!==void 0&&P.filter(B=>B!==void 0).map(String).includes(W.id.toString())?{...W,...k}:W);return{...O,data:V}}),S.many&&o.setQueriesData(x.action("many").get(b),O=>{if(typeof S.many=="function")return S.many(O,k,P);if(!O)return null;let V=O.data.map(W=>W.id!==void 0&&P.filter(B=>B!==void 0).map(String).includes(W.id.toString())?{...W,...k}:W);return{...O,data:V}}),S.detail))for(let O of P)o.setQueriesData(x.action("one").id(O).params(N??{}).get(b),V=>{if(typeof S.detail=="function")return S.detail(V,k,O);if(!V)return null;let W={...V.data,...k};return{...V,data:W}});return{previousQueries:j,queryKey:A}},onSettled:(C,P,{ids:k,resource:w,dataProviderName:M})=>{let{identifier:R}=a(w);f({resource:R,invalidates:["list","many"],dataProviderName:X(R,M,r)}),k.forEach(D=>f({resource:R,invalidates:["detail"],dataProviderName:X(R,M,r),id:D})),p({type:"REMOVE",payload:{id:k,resource:R}})},onSuccess:(C,{ids:P,resource:k,meta:w,metaData:M,dataProviderName:R,successNotification:D,values:S},T)=>{let{resource:N,identifier:A}=a(k),x=y.singular(A),F=typeof D=="function"?D(C,{ids:P,values:S},A):D;u(F,{key:`${P}-${A}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${A}.${A}`,A)},`Successfully updated ${x}`),type:"success"}),L==null||L({channel:`resources/${N.name}`,type:"updated",payload:{ids:P.map(String)},date:new Date});let j=[];T&&P.forEach(z=>{let _=o.getQueryData(T.queryKey.detail(z));j.push(Object.keys(S||{}).reduce((pe,ge)=>{var Me;return pe[ge]=(Me=_==null?void 0:_.data)==null?void 0:Me[ge],pe},{}))});let O=g({resource:N,meta:$(w,M)}),{fields:V,operation:W,variables:B,...Q}=O||{};h==null||h.mutate({action:"updateMany",resource:N.name,data:S,previousData:j,meta:{ids:P,dataProviderName:X(A,R,r),...Q}})},onError:(C,{ids:P,resource:k,errorNotification:w,values:M},R)=>{let{identifier:D}=a(k);if(R)for(let S of R.previousQueries)o.setQueryData(S[0],S[1]);if(C.message!=="mutationCancelled"){v==null||v(C);let S=y.singular(D),T=typeof w=="function"?w(C,{ids:P,values:M},D):w;u(T,{key:`${P}-${D}-updateMany-error-notification`,message:n("notifications.editError",{resource:S,statusCode:C.statusCode},`Error when updating ${S} (status code: ${C.statusCode})`),description:C.message,type:"error"})}},mutationKey:m().data().mutation("updateMany").get(b),...e,meta:{...e==null?void 0:e.meta,...(0,gs.getXRay)("useUpdateMany",b)}}),{elapsedTime:I}=ve({isLoading:q.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...q,overtime:{elapsedTime:I}}},"useUpdateMany"),za=E("@tanstack/react-query"),hs=Y(),Ps=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=ce(),{mutate:a}=Ce({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),{mutationMode:o,undoableTimeout:i}=Ct(),n=ye(),{notificationDispatch:l}=Et(),c=ae(),d=dt(),v=qe(),p=Be(),{log:L}=mt(),{resources:u,select:f}=G(),h=(0,za.useQueryClient)(),g=ue(),{options:{textTransformers:y}}=be(),{keys:m,preferLegacyKeys:b}=J(),q=(0,za.useMutation)(({resource:C,ids:P,mutationMode:k,undoableTimeout:w,onCancel:M,meta:R,metaData:D,dataProviderName:S,values:T})=>{let{resource:N,identifier:A}=f(C),x=g({resource:N,meta:$(R,D)}),F=k??o,j=w??i,O=n(X(A,S,u)),V=s(()=>O.deleteMany?O.deleteMany({resource:N.name,ids:P,meta:x,metaData:x,variables:T}):Jt(P.map(W=>O.deleteOne({resource:N.name,id:W,meta:x,metaData:x,variables:T}))),"mutationFn");return F!=="undoable"?V():new Promise((W,B)=>{let Q=s(()=>{V().then(_=>W(_)).catch(_=>B(_))},"doMutation"),z=s(()=>{B({message:"mutationCancelled"})},"cancelMutation");M&&M(z),l({type:"ADD",payload:{id:P,resource:A,cancelMutation:z,doMutation:Q,seconds:j,isSilent:!!M}})})},{onMutate:async({ids:C,resource:P,mutationMode:k,dataProviderName:w,meta:M,metaData:R})=>{let{identifier:D}=f(P),S=$(M,R),T=Yt(b)(D,X(D,w,u),S),N=m().data(X(D,w,u)).resource(D),A=k??o;await h.cancelQueries(N.get(b),void 0,{silent:!0});let x=h.getQueriesData(N.get(b));if(A!=="pessimistic"){h.setQueriesData(N.action("list").params(S??{}).get(b),F=>F?{data:F.data.filter(j=>j.id&&!C.map(String).includes(j.id.toString())),total:F.total-1}:null),h.setQueriesData(N.action("many").get(b),F=>{if(!F)return null;let j=F.data.filter(O=>O.id?!C.map(String).includes(O.id.toString()):!1);return{...F,data:j}});for(let F of C)h.setQueriesData(N.action("one").id(F).params(S).get(b),j=>!j||j.data.id==F?null:{...j})}return{previousQueries:x,queryKey:T}},onSettled:(C,P,{resource:k,ids:w,dataProviderName:M,invalidates:R=["list","many"]})=>{let{identifier:D}=f(k);p({resource:D,dataProviderName:X(D,M,u),invalidates:R}),l({type:"REMOVE",payload:{id:w,resource:D}})},onSuccess:(C,{ids:P,resource:k,meta:w,metaData:M,dataProviderName:R,successNotification:D},S)=>{let{resource:T,identifier:N}=f(k);P.forEach(W=>h.removeQueries(S==null?void 0:S.queryKey.detail(W)));let A=typeof D=="function"?D(C,P,N):D;v(A,{key:`${P}-${N}-notification`,description:c("notifications.success","Success"),message:c("notifications.deleteSuccess",{resource:c(`${N}.${N}`,N)},`Successfully deleted ${N}`),type:"success"}),d==null||d({channel:`resources/${T.name}`,type:"deleted",payload:{ids:P},date:new Date});let x=g({resource:T,meta:$(w,M)}),{fields:F,operation:j,variables:O,...V}=x||{};L==null||L.mutate({action:"deleteMany",resource:T.name,meta:{ids:P,dataProviderName:X(N,R,u),...V}}),P.forEach(W=>h.removeQueries(S==null?void 0:S.queryKey.detail(W)))},onError:(C,{ids:P,resource:k,errorNotification:w},M)=>{let{identifier:R}=f(k);if(M)for(let D of M.previousQueries)h.setQueryData(D[0],D[1]);if(C.message!=="mutationCancelled"){a(C);let D=y.singular(R),S=typeof w=="function"?w(C,P,R):w;v(S,{key:`${P}-${R}-notification`,message:c("notifications.deleteError",{resource:D,statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}},mutationKey:m().data().mutation("deleteMany").get(b),...e,meta:{...e==null?void 0:e.meta,...(0,hs.getXRay)("useDeleteMany",b)}}),{elapsedTime:I}=ve({isLoading:q.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...q,overtime:{elapsedTime:I}}},"useDeleteMany"),bs=s(e=>{var t;let r=ye(),{resource:a}=G(),{getApiUrl:o}=r(e??((t=$(a==null?void 0:a.meta,a==null?void 0:a.options))==null?void 0:t.dataProviderName));return o()},"useApiUrl"),Cs=E("@tanstack/react-query"),Es=Y(),Ls=s(({url:e,method:t,config:r,queryOptions:a,successNotification:o,errorNotification:i,meta:n,metaData:l,dataProviderName:c,overtimeOptions:d})=>{let v=ye(),p=ce(),{mutate:L}=Ce({v3LegacyAuthProviderCompatible:!!(p!=null&&p.isLegacy)}),u=ae(),f=qe(),h=ue(),{keys:g,preferLegacyKeys:y}=J(),m=$(n,l),{custom:b}=v(c),q=h({meta:m});if(b){let I=(0,Cs.useQuery)({queryKey:g().data(c).mutation("custom").params({method:t,url:e,...r,...m||{}}).get(y),queryFn:({queryKey:P,pageParam:k,signal:w})=>b({url:e,method:t,...r,meta:{...q,queryContext:{queryKey:P,pageParam:k,signal:w}},metaData:{...q,queryContext:{queryKey:P,pageParam:k,signal:w}}}),...a,onSuccess:P=>{var k;(k=a==null?void 0:a.onSuccess)==null||k.call(a,P);let w=typeof o=="function"?o(P,{...r,...q}):o;f(w)},onError:P=>{var k;L(P),(k=a==null?void 0:a.onError)==null||k.call(a,P);let w=typeof i=="function"?i(P,{...r,...q}):i;f(w,{key:`${t}-notification`,message:u("notifications.error",{statusCode:P.statusCode},`Error (status code: ${P.statusCode})`),description:P.message,type:"error"})},meta:{...a==null?void 0:a.meta,...(0,Es.getXRay)("useCustom",y)}}),{elapsedTime:C}=ve({isLoading:I.isFetching,interval:d==null?void 0:d.interval,onInterval:d==null?void 0:d.onInterval});return{...I,overtime:{elapsedTime:C}}}else throw Error("Not implemented custom on data provider.")},"useCustom"),ws=E("@tanstack/react-query"),Ss=Y(),Ds=s(({mutationOptions:e,overtimeOptions:t}={})=>{let r=ce(),{mutate:a}=Ce({v3LegacyAuthProviderCompatible:!!(r!=null&&r.isLegacy)}),o=qe(),i=ye(),n=ae(),l=ue(),{keys:c,preferLegacyKeys:d}=J(),v=(0,ws.useMutation)(({url:L,method:u,values:f,meta:h,metaData:g,dataProviderName:y,config:m})=>{let b=l({meta:$(h,g)}),{custom:q}=i(y);if(q)return q({url:L,method:u,payload:f,meta:b,metaData:b,headers:{...m==null?void 0:m.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(L,{successNotification:u,config:f,meta:h,metaData:g})=>{let y=typeof u=="function"?u(L,{...f,...$(h,g)||{}}):u;o(y)},onError:(L,{errorNotification:u,method:f,config:h,meta:g,metaData:y})=>{a(L);let m=typeof u=="function"?u(L,{...h,...$(g,y)||{}}):u;o(m,{key:`${f}-notification`,message:n("notifications.error",{statusCode:L.statusCode},`Error (status code: ${L.statusCode})`),description:L.message,type:"error"})},mutationKey:c().data().mutation("customMutation").get(d),...e,meta:{...e==null?void 0:e.meta,...(0,Ss.getXRay)("useCustomMutation",d)}}),{elapsedTime:p}=ve({isLoading:v.isLoading,interval:t==null?void 0:t.interval,onInterval:t==null?void 0:t.onInterval});return{...v,overtime:{elapsedTime:p}}},"useCustomMutation"),Wa=E("react"),Xo=U(E("react")),qs=s(()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),"defaultDataProvider"),jr=Xo.default.createContext(qs()),ks=s(({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Xo.default.createElement(jr.Provider,{value:r},e)},"DataContextProvider"),ye=s(()=>{let e=(0,Wa.useContext)(jr);return(0,Wa.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},"useDataProvider"),Ms=E("@tanstack/react-query"),Ns=Y(),xs=s(({resource:e,config:t,filters:r,hasPagination:a,pagination:o,sorters:i,queryOptions:n,successNotification:l,errorNotification:c,meta:d,metaData:v,liveMode:p,onLiveEvent:L,liveParams:u,dataProviderName:f,overtimeOptions:h})=>{let{resources:g,resource:y,identifier:m}=G(e),b=ye(),q=ae(),I=ce(),{mutate:C}=Ce({v3LegacyAuthProviderCompatible:!!(I!=null&&I.isLegacy)}),P=qe(),k=ue(),{keys:w,preferLegacyKeys:M}=J(),R=X(m,f,g),D=$(d,v),S=$(r,t==null?void 0:t.filters),T=$(i,t==null?void 0:t.sort),N=$(a,t==null?void 0:t.hasPagination),A=Fo({pagination:o,configPagination:t==null?void 0:t.pagination,hasPagination:N}),x=A.mode==="server",F={meta:D,metaData:D,filters:S,hasPagination:x,pagination:A,sorters:T,config:{...t,sort:T}},j=(n==null?void 0:n.enabled)===void 0||(n==null?void 0:n.enabled)===!0,O=k({resource:y,meta:D}),{getList:V}=b(R);Tt({resource:m,types:["*"],params:{meta:O,metaData:O,pagination:A,hasPagination:x,sort:T,sorters:T,filters:S,subscriptionType:"useList",...u},channel:`resources/${y.name}`,enabled:j,liveMode:p,onLiveEvent:L});let W=(0,Ms.useInfiniteQuery)(w().data(R).resource(m).action("infinite").params({...D||{},filters:S,hasPagination:x,...x&&{pagination:A},...i&&{sorters:i},...(t==null?void 0:t.sort)&&{sort:t==null?void 0:t.sort}}).get(M),({queryKey:Q,pageParam:z,signal:_})=>{let pe={...A,current:z};return V({resource:y.name,pagination:pe,hasPagination:x,filters:S,sort:T,sorters:T,meta:{...O,queryContext:{queryKey:Q,pageParam:z,signal:_}},metaData:{...O,queryContext:{queryKey:Q,pageParam:z,signal:_}}}).then(({data:ge,total:Me,...at})=>({data:ge,total:Me,pagination:pe,...at}))},{getNextPageParam:Q=>Ro(Q),getPreviousPageParam:Q=>To(Q),...n,onSuccess:Q=>{var z;(z=n==null?void 0:n.onSuccess)==null||z.call(n,Q);let _=typeof l=="function"?l(Q,F,m):l;P(_)},onError:Q=>{var z;C(Q),(z=n==null?void 0:n.onError)==null||z.call(n,Q);let _=typeof c=="function"?c(Q,F,m):c;P(_,{key:`${m}-useInfiniteList-notification`,message:q("notifications.error",{statusCode:Q.statusCode},`Error (status code: ${Q.statusCode})`),description:Q.message,type:"error"})},meta:{...n==null?void 0:n.meta,...(0,Ns.getXRay)("useInfiniteList",M)}}),{elapsedTime:B}=ve({isLoading:W.isFetching,interval:h==null?void 0:h.interval,onInterval:h==null?void 0:h.onInterval});return{...W,overtime:{elapsedTime:B}}},"useInfiniteList"),Pr=E("react"),Ho=U(E("react")),Nt=Ho.default.createContext(void 0),Rs=s(({liveProvider:e,children:t})=>Ho.default.createElement(Nt.Provider,{value:e},t),"LiveContextProvider"),Ts=E("react"),Go=U(E("react")),Os=E("react"),As=E("react"),Is=U(E("lodash/isEqual")),Fs=s(e=>{let t=(0,As.useRef)(e);return(0,Is.default)(t.current,e)||(t.current=e),t.current},"useMemoized"),Zo=s((e,t)=>{let r=Fs(t);return(0,Os.useMemo)(e,r)},"useDeepMemo"),xt=Go.default.createContext({resources:[]}),$s=s(({resources:e,children:t})=>{let r=Zo(()=>Oo(e??[]),[e]);return Go.default.createElement(xt.Provider,{value:{resources:r}},t)},"ResourceContextProvider"),Yo=U(E("react")),Jo=Yo.default.createContext("new"),Us=Jo.Provider,me=s(()=>Yo.default.useContext(Jo),"useRouterType"),Ks=U(E("react")),en=U(E("react")),tn={},Rt=(0,en.createContext)(tn),Qs=s(({children:e,router:t})=>en.default.createElement(Rt.Provider,{value:t??tn},e),"RouterBindingsProvider"),_a=U(E("react")),rn=s(()=>{let e=(0,_a.useContext)(Rt);return _a.default.useMemo(()=>(e==null?void 0:e.parse)??(()=>()=>({})),[e==null?void 0:e.parse])()},"useParse"),Ke=s(()=>{let e=rn();return Ks.default.useMemo(()=>e(),[e])},"useParsed");function G(e){let{resources:t}=(0,Ts.useContext)(xt),r=me(),a=Ke(),o={resourceName:e&&typeof e!="string"?e.resourceName:e,resourceNameOrRouteName:e&&typeof e!="string"?e.resourceNameOrRouteName:e,recordItemId:e&&typeof e!="string"?e.recordItemId:void 0},i=s((p,L=!0)=>{let u=fe(p,t,r==="legacy");if(u)return{resource:u,identifier:u.identifier??u.name};if(L){let f={name:p,identifier:p},h=f.identifier??f.name;return{resource:f,identifier:h}}},"select"),n=an(),{useParams:l}=ke(),c=l();if(r==="legacy"){let p=o.resourceNameOrRouteName?o.resourceNameOrRouteName:c.resource,L=p?n(p):void 0,u=(o==null?void 0:o.recordItemId)??c.id,f=c.action,h=(o==null?void 0:o.resourceName)??(L==null?void 0:L.name),g=(L==null?void 0:L.identifier)??(L==null?void 0:L.name);return{resources:t,resource:L,resourceName:h,id:u,action:f,select:i,identifier:g}}let d,v=typeof e=="string"?e:o==null?void 0:o.resourceNameOrRouteName;if(v){let p=fe(v,t);p?d=p:d={name:v}}else a!=null&&a.resource&&(d=a.resource);return{resources:t,resource:d,resourceName:d==null?void 0:d.name,id:a.id,action:a.action,select:i,identifier:(d==null?void 0:d.identifier)??(d==null?void 0:d.name)}}s(G,"useResource");var ja=E("react"),an=s(()=>{let{resources:e}=(0,ja.useContext)(xt);return(0,ja.useCallback)(t=>fe(t,e,!0)||{name:t,route:t},[e])},"useResourceWithRoute"),zs=E("react"),Ws=E("@tanstack/react-query"),Be=s(()=>{let{resources:e}=G(),t=(0,Ws.useQueryClient)(),{keys:r,preferLegacyKeys:a}=J();return(0,zs.useCallback)(async({resource:o,dataProviderName:i,invalidates:n,id:l,invalidationFilters:c={type:"all",refetchType:"active"},invalidationOptions:d={cancelRefetch:!1}})=>{if(n===!1)return;let v=X(o,i,e),p=r().data(v).resource(o??"");await Promise.all(n.map(L=>{switch(L){case"all":return t.invalidateQueries(r().data(v).get(a),c,d);case"list":return t.invalidateQueries(p.action("list").get(a),c,d);case"many":return t.invalidateQueries(p.action("many").get(a),c,d);case"resourceAll":return t.invalidateQueries(p.get(a),c,d);case"detail":return t.invalidateQueries(p.action("one").id(l||"").get(a),c,d);default:return}}))},[])},"useInvalidate"),Tt=s(({resource:e,params:t,channel:r,types:a,enabled:o=!0,liveMode:i,onLiveEvent:n})=>{let{resource:l,identifier:c}=G(e),d=(0,Pr.useContext)(Nt),{liveMode:v,onLiveEvent:p}=(0,Pr.useContext)(tt),L=i??v,u=Be();(0,Pr.useEffect)(()=>{let f,h=s(g=>{var y;L==="auto"&&u({resource:c,dataProviderName:(y=l==null?void 0:l.meta)==null?void 0:y.dataProviderName,invalidates:["resourceAll"],invalidationFilters:{type:"active",refetchType:"active"},invalidationOptions:{cancelRefetch:!1}}),n==null||n(g),p==null||p(g)},"callback");return L&&L!=="off"&&o&&(f=d==null?void 0:d.subscribe({channel:r,params:{resource:l==null?void 0:l.name,...t},types:a,callback:h})),()=>{f&&(d==null||d.unsubscribe(f))}},[o])},"useResourceSubscription"),_s=E("react"),on=s(e=>{let{liveMode:t}=(0,_s.useContext)(tt);return e??t},"useLiveMode"),Va=E("react"),js=s(({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:o})=>{let i=(0,Va.useContext)(Nt);(0,Va.useEffect)(()=>{let n;return a&&(n=i==null?void 0:i.subscribe({channel:t,params:e,types:r,callback:o})),()=>{n&&(i==null||i.unsubscribe(n))}},[a])},"useSubscription"),Vs=E("react"),dt=s(()=>{let e=(0,Vs.useContext)(Nt);return e==null?void 0:e.publish},"usePublish"),Bs=E("react"),Et=s(()=>{let{notifications:e,notificationDispatch:t}=(0,Bs.useContext)(Vo);return{notifications:e,notificationDispatch:t}},"useCancelNotification"),Xs=E("react"),nn=U(E("react")),Vr=(0,nn.createContext)({}),Hs=s(({open:e,close:t,children:r})=>nn.default.createElement(Vr.Provider,{value:{open:e,close:t}},r),"NotificationContextProvider"),rt=s(()=>{let{open:e,close:t}=(0,Xs.useContext)(Vr);return{open:e,close:t}},"useNotification"),Gs=E("react"),qe=s(()=>{let{open:e}=rt();return(0,Gs.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},"useHandleNotification"),Ba=E("react"),sn=U(E("react")),ct=sn.default.createContext({}),Zs=s(({children:e,i18nProvider:t})=>sn.default.createElement(ct.Provider,{value:{i18nProvider:t}},e),"TranslationContextProvider"),Ys=s(()=>{let{i18nProvider:e}=(0,Ba.useContext)(ct);return(0,Ba.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},"useSetLocale"),Xa=E("react"),ae=s(()=>{let{i18nProvider:e}=(0,Xa.useContext)(ct);return(0,Xa.useMemo)(()=>{function t(r,a,o){return(e==null?void 0:e.translate(r,a,o))??o??(typeof a=="string"&&typeof o>"u"?a:r)}return s(t,"translate"),t},[e])},"useTranslate"),Ha=E("react"),Js=s(()=>{let{i18nProvider:e}=(0,Ha.useContext)(ct);return(0,Ha.useCallback)(()=>e==null?void 0:e.getLocale(),[])},"useGetLocale"),eu=E("react"),tu=E("export-to-csv-fix-source-map"),ru=s(({resourceName:e,resource:t,sorter:r,sorters:a,filters:o,maxItemCount:i,pageSize:n=20,mapData:l=s(u=>u,"mapData"),exportOptions:c,meta:d,metaData:v,dataProviderName:p,onError:L}={})=>{let[u,f]=(0,eu.useState)(!1),h=ye(),g=ue(),{resource:y,resources:m,identifier:b}=G($(t,e)),q=`${Ar()(b,"plural")}-${new Date().toLocaleString()}`,{getList:I}=h(X(b,p,m)),C=g({resource:y,meta:$(d,v)});return{isLoading:u,triggerExport:s(async()=>{f(!0);let P=[],k=1,w=!0;for(;w;)try{let{data:M,total:R}=await I({resource:(y==null?void 0:y.name)??"",filters:o,sort:$(a,r),sorters:$(a,r),pagination:{current:k,pageSize:n,mode:"server"},meta:C,metaData:C});k++,P.push(...M),i&&P.length>=i&&(P=P.slice(0,i),w=!1),R===P.length&&(w=!1)}catch(M){f(!1),w=!1,L==null||L(M);return}new tu.ExportToCsv({filename:q,useKeysAsHeaders:!0,...c}).generateCsv(P.map(l)),f(!1)},"triggerExport")}},"useExport"),br=U(E("react")),au=U(E("warn-once")),ou=U(E("lodash/debounce")),nu=s(({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:o,redirect:i,successNotification:n,errorNotification:l,meta:c,metaData:d,queryMeta:v,mutationMeta:p,mutationMode:L,liveMode:u,onLiveEvent:f,liveParams:h,undoableTimeout:g,dataProviderName:y,invalidates:m,queryOptions:b,createMutationOptions:q,updateMutationOptions:I,overtimeOptions:C,autoSave:P,optimisticUpdateMap:k}={})=>{let w=Be(),{options:M}=be(),R=ue(),{resource:D,id:S,action:T,identifier:N}=G(e),{identifier:A}=G(),x=s(()=>e&&e!==A?r:r??S,"getDefaultId")(),[F,j]=br.default.useState(x);br.default.useEffect(()=>{j(x)},[x]);let O=s(()=>t||(T==="edit"||T==="clone"?T:"create"),"getAction")(),V=R({resource:D,meta:$(c,d)}),{mutationMode:W}=Ct(),B=L??W,Q=O==="create",z=O==="edit",_=O==="clone";(0,au.default)((_||z)&&!!e&&!r&&(b==null?void 0:b.enabled)!==!1,`[useForm]: action: "${O}", resource: "${N}", id: ${F} 

If you don't use the \`setId\` method to set the \`id\`, you should pass the \`id\` prop to \`useForm\`. Otherwise, \`useForm\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/useForm/#resource`);let pe=Ri({redirectFromProps:i,action:O,redirectOptions:M.redirect}),ge=Wr({resource:N,id:F??"",queryOptions:{enabled:F!==void 0&&(z||_),...b},liveMode:u,onLiveEvent:f,liveParams:h,meta:{...V,...v},metaData:{...V,...v},dataProviderName:y}),{isFetching:Me}=ge,at=_r({mutationOptions:q}),{mutate:At,isLoading:It}=at,Ae=Nr({mutationOptions:I}),{mutate:Ft,isLoading:He}=Ae,Ge=Nr({}),{setWarnWhen:ot}=Or(),Ze=un(),pt=s(async oe=>{ot(!1);let Ie=s(ie=>{Ze({redirect:pe,resource:D,id:ie,meta:$(c,d)})},"onSuccess");return B!=="pessimistic"&&setTimeout(()=>{Ie()}),new Promise((ie,ze)=>{if(B!=="pessimistic"&&ie(),!!D)return At({values:oe,resource:N??D.name,successNotification:n,errorNotification:l,meta:{...V,...p},metaData:{...V,...p},dataProviderName:y,invalidates:m},{onSuccess:(le,Fe,$e)=>{var We;a&&a(le,oe,$e);let _e=(We=le==null?void 0:le.data)==null?void 0:We.id;Ie(_e),ie(le)},onError:(le,Fe,$e)=>{if(o)return o(le,oe,$e);ze()}})})},"onFinishCreate");br.default.useEffect(()=>()=>{P!=null&&P.invalidateOnUnmount&&Ge.status==="success"&&w({id:F,invalidates:m||["list","many","detail"],dataProviderName:y,resource:N})},[P==null?void 0:P.invalidateOnUnmount,Ge.status]);let ft=s(oe=>{if(!D||!z)return;let Ie={id:F??"",values:oe,resource:N??D.name,successNotification:!1,errorNotification:!1,meta:{...V,...p},metaData:{...V,...p},dataProviderName:y,invalidates:[],mutationMode:"pessimistic"};return Ge.mutate(Ie,{onSuccess:(ie,ze,le)=>{a&&a(ie,oe,le,!0)},onError:(ie,ze,le)=>{if(o)return o(ie,oe,le,!0)}})},"onFinishAutoSaveMutation"),$t=(0,ou.default)(oe=>ft(oe),(P==null?void 0:P.debounce)||1e3),St=Q||_?{formLoading:Me||It,mutationResult:at,onFinish:pt}:{formLoading:Me||He,mutationResult:Ae,onFinish:s(async oe=>{if(ot(!1),!D)return;let Ie={id:F??"",values:oe,resource:N??D.name,mutationMode:B,undoableTimeout:g,successNotification:n,errorNotification:l,meta:{...V,...p},metaData:{...V,...p},dataProviderName:y,invalidates:m,optimisticUpdateMap:k},ie=s(()=>{Ze({redirect:pe,resource:D,id:F,meta:$(c,d)})},"onSuccess");return B!=="pessimistic"&&setTimeout(()=>{ie()}),new Promise((ze,le)=>(B!=="pessimistic"&&ze(),setTimeout(()=>{Ft(Ie,{onSuccess:(Fe,$e,We)=>{a&&a(Fe,oe,We),B==="pessimistic"&&ie(),ze(Fe)},onError:(Fe,$e,We)=>{if(o)return o(Fe,oe,We);le()}})})))},"onFinishUpdate")},{elapsedTime:ir}=ve({isLoading:St.mutationResult.isLoading||ge.isFetching,interval:C==null?void 0:C.interval,onInterval:C==null?void 0:C.onInterval});return{...St,queryResult:ge,onFinishAutoSave:$t,autoSaveProps:{status:Ge.status,data:Ge.data,error:Ge.error},id:F,setId:j,redirect:(oe,Ie)=>{Ze({redirect:oe!==void 0?oe:z?"list":"edit",resource:D,id:Ie??F,meta:$(c,d)})},overtime:{elapsedTime:ir}}},"useForm"),iu=E("react"),un=s(()=>{let{show:e,edit:t,list:r,create:a}=Oe();return(0,iu.useCallback)(({redirect:o,resource:i,id:n,meta:l={}})=>{if(o&&i)return i.show&&o==="show"&&n?e(i,n,void 0,l):i.edit&&o==="edit"&&n?t(i,n,void 0,l):i.create&&o==="create"?a(i,void 0,l):r(i,"push",l)},[])},"useRedirectionAfterSubmission"),Ga=U(E("react")),Te=s(()=>{let e=(0,Ga.useContext)(Rt);return Ga.default.useMemo(()=>(e==null?void 0:e.go)??(()=>()=>{}),[e==null?void 0:e.go])()},"useGo"),Za=U(E("react")),ln=s(()=>{let e=(0,Za.useContext)(Rt);return Za.default.useMemo(()=>(e==null?void 0:e.back)??(()=>()=>{}),[e==null?void 0:e.back])()},"useBack"),Oe=s(()=>{let{resources:e}=G(),t=me(),{useHistory:r}=ke(),a=r(),o=Ke(),i=Te(),n=ln(),l=s((u,f="push")=>{t==="legacy"?a[f](u):i({to:u,type:f})},"handleUrl"),c=s((u,f={})=>{var h;if(t==="legacy"){let g=typeof u=="string"?fe(u,e,!0)??{name:u,route:u}:u,y=we(g,e,!0).find(m=>m.action==="create");return y?xe(y.route,g==null?void 0:g.meta,o,f):""}else{let g=typeof u=="string"?fe(u,e)??{name:u}:u,y=(h=we(g,e).find(m=>m.action==="create"))==null?void 0:h.route;return y?i({to:xe(y,g==null?void 0:g.meta,o,f),type:"path"}):""}},"createUrl"),d=s((u,f,h={})=>{var g;let y=encodeURIComponent(f);if(t==="legacy"){let m=typeof u=="string"?fe(u,e,!0)??{name:u,route:u}:u,b=we(m,e,!0).find(q=>q.action==="edit");return b?xe(b.route,m==null?void 0:m.meta,o,{...h,id:y}):""}else{let m=typeof u=="string"?fe(u,e)??{name:u}:u,b=(g=we(m,e).find(q=>q.action==="edit"))==null?void 0:g.route;return b?i({to:xe(b,m==null?void 0:m.meta,o,{...h,id:y}),type:"path"}):""}},"editUrl"),v=s((u,f,h={})=>{var g;let y=encodeURIComponent(f);if(t==="legacy"){let m=typeof u=="string"?fe(u,e,!0)??{name:u,route:u}:u,b=we(m,e,!0).find(q=>q.action==="clone");return b?xe(b.route,m==null?void 0:m.meta,o,{...h,id:y}):""}else{let m=typeof u=="string"?fe(u,e)??{name:u}:u,b=(g=we(m,e).find(q=>q.action==="clone"))==null?void 0:g.route;return b?i({to:xe(b,m==null?void 0:m.meta,o,{...h,id:y}),type:"path"}):""}},"cloneUrl"),p=s((u,f,h={})=>{var g;let y=encodeURIComponent(f);if(t==="legacy"){let m=typeof u=="string"?fe(u,e,!0)??{name:u,route:u}:u,b=we(m,e,!0).find(q=>q.action==="show");return b?xe(b.route,m==null?void 0:m.meta,o,{...h,id:y}):""}else{let m=typeof u=="string"?fe(u,e)??{name:u}:u,b=(g=we(m,e).find(q=>q.action==="show"))==null?void 0:g.route;return b?i({to:xe(b,m==null?void 0:m.meta,o,{...h,id:y}),type:"path"}):""}},"showUrl"),L=s((u,f={})=>{var h;if(t==="legacy"){let g=typeof u=="string"?fe(u,e,!0)??{name:u,route:u}:u,y=we(g,e,!0).find(m=>m.action==="list");return y?xe(y.route,g==null?void 0:g.meta,o,f):""}else{let g=typeof u=="string"?fe(u,e)??{name:u}:u,y=(h=we(g,e).find(m=>m.action==="list"))==null?void 0:h.route;return y?i({to:xe(y,g==null?void 0:g.meta,o,f),type:"path"}):""}},"listUrl");return{create:s((u,f="push",h={})=>{l(c(u,h),f)},"create"),createUrl:c,edit:s((u,f,h="push",g={})=>{l(d(u,f,g),h)},"edit"),editUrl:d,clone:s((u,f,h="push",g={})=>{l(v(u,f,g),h)},"clone"),cloneUrl:v,show:s((u,f,h="push",g={})=>{l(p(u,f,g),h)},"show"),showUrl:p,list:s((u,f="push",h={})=>{l(L(u,h),f)},"list"),listUrl:L,push:s((u,...f)=>{t==="legacy"?a.push(u,...f):i({to:u,type:"push"})},"push"),replace:s((u,...f)=>{t==="legacy"?a.replace(u,...f):i({to:u,type:"replace"})},"replace"),goBack:s(()=>{t==="legacy"?a.goBack():n()},"goBack")}},"useNavigation"),Ya=U(E("react")),su=U(E("warn-once")),uu=s(({resource:e,id:t,successNotification:r,errorNotification:a,meta:o,metaData:i,liveMode:n,onLiveEvent:l,dataProviderName:c,queryOptions:d,overtimeOptions:v}={})=>{let{resource:p,id:L,identifier:u}=G(e),{identifier:f}=G(),h=ue(),g=s(()=>e&&e!==f?t:t??L,"getDefaultId")(),[y,m]=(0,Ya.useState)(g);Ya.default.useEffect(()=>{m(g)},[g]);let b=h({resource:p,meta:$(o,i)});(0,su.default)(!!e&&!t,`[useShow]: resource: "${u}", id: ${t} 

If you don't use the \`setShowId\` method to set the \`showId\`, you should pass the \`id\` prop to \`useShow\`. Otherwise, \`useShow\` will not be able to infer the \`id\` from the current URL. 

See https://refine.dev/docs/api-reference/core/hooks/show/useShow/#resource`);let q=Wr({resource:u,id:y??"",queryOptions:{enabled:y!==void 0,...d},successNotification:r,errorNotification:a,meta:b,metaData:b,liveMode:n,onLiveEvent:l,dataProviderName:c}),{elapsedTime:I}=ve({isLoading:q.isFetching,interval:v==null?void 0:v.interval,onInterval:v==null?void 0:v.onInterval});return{queryResult:q,showId:y,setShowId:m,overtime:{elapsedTime:I}}},"useShow"),_t=E("react"),lu=E("papaparse"),du=U(E("lodash/chunk")),cu=s(({resourceName:e,resource:t,mapData:r=s(v=>v,"mapData"),paparseOptions:a,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:i,meta:n,metaData:l,onProgress:c,dataProviderName:d}={})=>{let[v,p]=(0,_t.useState)(0),[L,u]=(0,_t.useState)(0),[f,h]=(0,_t.useState)(!1),{resource:g,identifier:y}=G(t??e),m=ue(),b=Bo(),q=_r(),I=m({resource:g,meta:$(n,l)}),C;o===1?C=q:C=b;let P=s(()=>{u(0),p(0),h(!1)},"handleCleanup"),k=s(M=>{let R={succeeded:M.filter(D=>D.type==="success"),errored:M.filter(D=>D.type==="error")};i==null||i(R),h(!1)},"handleFinish");(0,_t.useEffect)(()=>{c==null||c({totalAmount:L,processedAmount:v})},[L,v]);let w=s(({file:M})=>(P(),new Promise(R=>{h(!0),(0,lu.parse)(M,{complete:async({data:D})=>{let S=fo(D,r);if(u(S.length),o===1){let T=S.map(A=>s(async()=>({response:await q.mutateAsync({resource:y??"",values:A,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:I,metaData:I}),value:A}),"fn")),N=await Pa(T,({response:A,value:x})=>(p(F=>F+1),{response:[A.data],type:"success",request:[x]}),(A,x)=>({response:[A],type:"error",request:[S[x]]}));R(N)}else{let T=(0,du.default)(S,o),N=T.map(x=>s(async()=>({response:await b.mutateAsync({resource:y??"",values:x,successNotification:!1,errorNotification:!1,dataProviderName:d,meta:I,metaData:I}),value:x,currentBatchLength:x.length}),"fn")),A=await Pa(N,({response:x,currentBatchLength:F,value:j})=>(p(O=>O+F),{response:x.data,type:"success",request:j}),(x,F)=>({response:[x],type:"error",request:T[F]}));R(A)}},...a})}).then(R=>(k(R),R))),"handleChange");return{inputProps:{type:"file",accept:".csv",onChange:M=>{M.target.files&&M.target.files.length>0&&w({file:M.target.files[0]})}},mutationResult:C,isLoading:f,handleChange:w}},"useImport"),Cr=E("react"),mu=s(({defaultVisible:e=!1}={})=>{let[t,r]=(0,Cr.useState)(e),a=(0,Cr.useCallback)(()=>r(!0),[t]),o=(0,Cr.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:o}},"useModal"),vu=U(E("react")),Br=s(()=>{let e=me(),{resource:t,resources:r}=G(),a=Ke();return vu.default.useCallback(({resource:o,action:i,meta:n})=>{var l;let c=o||t;if(!c)return;let d=(l=we(c,r,e==="legacy").find(v=>v.action===i))==null?void 0:l.route;return d?xe(d,c==null?void 0:c.meta,a,n):void 0},[r,t,a])},"useGetToPath"),pu=s(({resource:e,action:t,meta:r,legacy:a})=>Br()({resource:e,action:t,meta:r,legacy:a}),"useToPath"),Ja=U(E("react")),rr=s(()=>{let e=(0,Ja.useContext)(Rt);return e!=null&&e.Link?e.Link:s(({to:t,...r})=>Ja.default.createElement("a",{href:t,...r}),"FallbackLink")},"useLink"),fu=E("react"),dn=U(E("react")),Je={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},gu=dn.default.createContext(Je),Xr=gu,yu=s(({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:i,routes:n})=>dn.default.createElement(Xr.Provider,{value:{useHistory:t??Je.useHistory,useLocation:r??Je.useLocation,useParams:a??Je.useParams,Prompt:o??Je.Prompt,Link:i??Je.Link,routes:n??Je.routes}},e),"LegacyRouterContextProvider"),ke=s(()=>{let e=(0,fu.useContext)(Xr),{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:i,routes:n}=e??Je;return{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:i,routes:n}},"useRouterContext"),hu=E("@tanstack/react-query"),Pu=E("react"),cn=U(E("react")),Ot=cn.default.createContext({options:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}),bu=s(({can:e,children:t,options:r})=>cn.default.createElement(Ot.Provider,{value:{can:e,options:r?{...r,buttons:{enableAccessControl:!0,hideIfUnauthorized:!1,...r.buttons}}:{buttons:{enableAccessControl:!0,hideIfUnauthorized:!1}}}},t),"AccessControlContextProvider"),Hr=s(e=>{if(!e)return;let{icon:t,list:r,edit:a,create:o,show:i,clone:n,children:l,meta:c,options:d,...v}=e,{icon:p,...L}=c??{},{icon:u,...f}=d??{};return{...v,...c?{meta:L}:{},...d?{options:f}:{}}},"sanitizeResource"),Cu=Y(),mn=s(({action:e,resource:t,params:r,queryOptions:a})=>{let{can:o}=(0,Pu.useContext)(Ot),{keys:i,preferLegacyKeys:n}=J(),{resource:l,...c}=r??{},d=Hr(l),v=(0,hu.useQuery)(i().access().resource(t).action(e).params({params:{...c,resource:d},enabled:a==null?void 0:a.enabled}).get(n),()=>(o==null?void 0:o({action:e,resource:t,params:{...c,resource:d}}))??Promise.resolve({can:!0}),{enabled:typeof o<"u",...a,meta:{...a==null?void 0:a.meta,...(0,Cu.getXRay)("useCan",n)},retry:!1});return typeof o>"u"?{data:{can:!0}}:v},"useCan"),eo=U(E("react")),Eu=s(()=>{let{can:e}=eo.default.useContext(Ot);return{can:eo.default.useMemo(()=>e?s(async({params:t,...r})=>{let a=t!=null&&t.resource?Hr(t.resource):void 0;return e({...r,...t?{params:{...t,resource:a}}:{}})},"canWithSanitizedResource"):void 0,[e])}},"useCanWithoutCache"),yt=E("react"),Lu=U(E("lodash/uniqBy")),wu=U(E("lodash/debounce")),jt=U(E("lodash/get")),Su=s(e=>{let[t,r]=(0,yt.useState)([]),[a,o]=(0,yt.useState)([]),[i,n]=(0,yt.useState)([]),{resource:l,sort:c,sorters:d,filters:v=[],optionLabel:p="title",optionValue:L="id",debounce:u=300,successNotification:f,errorNotification:h,defaultValueQueryOptions:g,queryOptions:y,fetchSize:m,pagination:b,hasPagination:q=!1,liveMode:I,defaultValue:C=[],onLiveEvent:P,onSearch:k,liveParams:w,meta:M,metaData:R,dataProviderName:D,overtimeOptions:S}=e,{resource:T,identifier:N}=G(l),A=ue()({resource:T,meta:$(M,R)}),x=Array.isArray(C)?C:[C],F=(0,yt.useCallback)(z=>{n(z.data.map(_=>({label:(0,jt.default)(_,p),value:(0,jt.default)(_,L)})))},[p,L]),j=g??y,O=jo({resource:N,ids:x,queryOptions:{...j,enabled:x.length>0&&((j==null?void 0:j.enabled)??!0),onSuccess:z=>{var _;F(z),(_=j==null?void 0:j.onSuccess)==null||_.call(j,z)}},meta:A,metaData:A,liveMode:"off",dataProviderName:D}),V=(0,yt.useCallback)(z=>{o(z.data.map(_=>({label:(0,jt.default)(_,p),value:(0,jt.default)(_,L)})))},[p,L]),W=zr({resource:N,sorters:$(d,c),filters:v.concat(t),pagination:{current:b==null?void 0:b.current,pageSize:(b==null?void 0:b.pageSize)??m,mode:b==null?void 0:b.mode},hasPagination:q,queryOptions:{...y,onSuccess:z=>{var _;V(z),(_=y==null?void 0:y.onSuccess)==null||_.call(y,z)}},successNotification:f,errorNotification:h,meta:A,metaData:A,liveMode:I,liveParams:w,onLiveEvent:P,dataProviderName:D}),B=s(z=>{if(k){r(k(z));return}if(z)r([{field:p,operator:"contains",value:z}]);else{r([]);return}},"onSearch"),{elapsedTime:Q}=ve({isLoading:W.isFetching||O.isFetching,interval:S==null?void 0:S.interval,onInterval:S==null?void 0:S.onInterval});return{queryResult:W,defaultValueQueryResult:O,options:(0,yt.useMemo)(()=>(0,Lu.default)([...a,...i],"value"),[a,i]),onSearch:(0,wu.default)(B,u),overtime:{elapsedTime:Q}}},"useSelect"),it=U(E("react")),to=U(E("qs")),Vt=U(E("lodash/differenceWith")),Bt=U(E("lodash/isEqual")),Du=U(E("warn-once")),ro=[],ao=[];function vn({initialCurrent:e,initialPageSize:t,hasPagination:r=!0,pagination:a,initialSorter:o,permanentSorter:i=ao,defaultSetFilterBehavior:n,initialFilter:l,permanentFilter:c=ro,filters:d,sorters:v,syncWithLocation:p,resource:L,successNotification:u,errorNotification:f,queryOptions:h,liveMode:g,onLiveEvent:y,liveParams:m,meta:b,metaData:q,dataProviderName:I,overtimeOptions:C}={}){var P,k,w,M,R;let{syncWithLocation:D}=Ko(),S=p??D,T=on(g),N=me(),{useLocation:A}=ke(),{search:x,pathname:F}=A(),j=ue(),O=Ke(),V=((d==null?void 0:d.mode)||"server")==="server",W=((v==null?void 0:v.mode)||"server")==="server",B=r===!1?"off":"server",Q=((a==null?void 0:a.mode)??B)!=="off",z=$(a==null?void 0:a.current,e),_=$(a==null?void 0:a.pageSize,t),pe=$(b,q),{parsedCurrent:ge,parsedPageSize:Me,parsedSorter:at,parsedFilters:At}=Ir(x??"?"),It=$(d==null?void 0:d.initial,l),Ae=$(d==null?void 0:d.permanent,c)??ro,Ft=$(v==null?void 0:v.initial,o),He=$(v==null?void 0:v.permanent,i)??ao,Ge=$(d==null?void 0:d.defaultBehavior,n)??"merge",ot,Ze,pt,ft;S?(ot=((P=O==null?void 0:O.params)==null?void 0:P.current)||ge||z||1,Ze=((k=O==null?void 0:O.params)==null?void 0:k.pageSize)||Me||_||10,pt=((w=O==null?void 0:O.params)==null?void 0:w.sorters)||(at.length?at:Ft),ft=((M=O==null?void 0:O.params)==null?void 0:M.filters)||(At.length?At:It)):(ot=z||1,Ze=_||10,pt=Ft,ft=It);let{replace:$t}=Oe(),St=Te(),{resource:ir,identifier:oe}=G(L),Ie=j({resource:ir,meta:pe});it.default.useEffect(()=>{(0,Du.default)(typeof oe>"u","useTable: `resource` is not defined.")},[oe]);let[ie,ze]=(0,it.useState)(Mr(He,pt??[])),[le,Fe]=(0,it.useState)(kr(Ae,ft??[])),[$e,We]=(0,it.useState)(ot),[_e,Zr]=(0,it.useState)(Ze),Dn=s(({pagination:{current:se,pageSize:Ne},sorter:Ut,filters:Kt})=>{if(N==="new")return St({type:"path",options:{keepHash:!0,keepQuery:!0},query:{...Q?{current:se,pageSize:Ne}:{},sorters:Ut,filters:Kt,...Yr()}})??"";{let Dt=to.default.parse(x==null?void 0:x.substring(1)),Rn=Dr({pagination:{pageSize:Ne,current:se},sorters:ie??Ut,filters:Kt,...Dt});return`${F??""}?${Rn??""}`}},"createLinkForSyncWithLocation");(0,it.useEffect)(()=>{x===""&&(We(ot),Zr(Ze),ze(Mr(He,pt??[])),Fe(kr(Ae,ft??[])))},[x]);let Yr=s(()=>{if(N==="new"){let{sorters:se,filters:Ne,pageSize:Ut,current:Kt,...Dt}=(O==null?void 0:O.params)??{};return Dt}else{let{sorter:se,filters:Ne,pageSize:Ut,current:Kt,...Dt}=to.default.parse(x,{ignoreQueryPrefix:!0});return Dt}},"currentQueryParams");(0,it.useEffect)(()=>{if(S){let se=Yr();if(N==="new")St({type:"replace",options:{keepQuery:!0},query:{...Q?{pageSize:_e,current:$e}:{},sorters:(0,Vt.default)(ie,He,Bt.default),filters:(0,Vt.default)(le,Ae,Bt.default)}});else{let Ne=Dr({...Q?{pagination:{pageSize:_e,current:$e}}:{},sorters:(0,Vt.default)(ie,He,Bt.default),filters:(0,Vt.default)(le,Ae,Bt.default),...se});return $t==null?void 0:$t(`${F}?${Ne}`,void 0,{shallow:!0})}}},[S,$e,_e,ie,le]);let sr=zr({resource:oe,hasPagination:r,pagination:{current:$e,pageSize:_e,mode:a==null?void 0:a.mode},filters:V?kt(Ae,le):void 0,sorters:W?qr(He,ie):void 0,queryOptions:h,successNotification:u,errorNotification:f,meta:Ie,metaData:Ie,liveMode:T,liveParams:m,onLiveEvent:y,dataProviderName:I}),qn=s(se=>{Fe(Ne=>kt(Ae,se,Ne))},"setFiltersAsMerge"),kn=s(se=>{Fe(kt(Ae,se))},"setFiltersAsReplace"),Mn=s(se=>{Fe(Ne=>kt(Ae,se(Ne)))},"setFiltersWithSetter"),Nn=s((se,Ne=Ge)=>{typeof se=="function"?Mn(se):Ne==="replace"?kn(se):qn(se)},"setFiltersFn"),Jr=s(se=>{ze(()=>qr(He,se))},"setSortWithUnion"),{elapsedTime:xn}=ve({isLoading:sr.isFetching,interval:C==null?void 0:C.interval,onInterval:C==null?void 0:C.onInterval});return{tableQueryResult:sr,sorters:ie,setSorters:Jr,sorter:ie,setSorter:Jr,filters:le,setFilters:Nn,current:$e,setCurrent:We,pageSize:_e,setPageSize:Zr,pageCount:_e?Math.ceil((((R=sr.data)==null?void 0:R.total)??0)/_e):1,createLinkForSyncWithLocation:Dn,overtime:{elapsedTime:xn}}}s(vn,"useTable");var oo=E("react"),Er=E("@tanstack/react-query"),pn=U(E("react")),ar=pn.default.createContext({}),qu=s(({create:e,get:t,update:r,children:a})=>pn.default.createElement(ar.Provider,{value:{create:e,get:t,update:r}},a),"AuditLogContextProvider"),no=Y(),mt=s(({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,Er.useQueryClient)(),a=(0,oo.useContext)(ar),{keys:o,preferLegacyKeys:i}=J(),n=ce(),{resources:l}=(0,oo.useContext)(xt),{data:c,refetch:d,isLoading:v}=Fr({v3LegacyAuthProviderCompatible:!!(n!=null&&n.isLegacy),queryOptions:{enabled:!!a}}),p=(0,Er.useMutation)(async u=>{var f,h,g,y,m;let b=fe(u.resource,l),q=$((f=b==null?void 0:b.meta)==null?void 0:f.audit,(h=b==null?void 0:b.options)==null?void 0:h.audit,(y=(g=b==null?void 0:b.options)==null?void 0:g.auditLog)==null?void 0:y.permissions);if(q&&!Ei(q,u.action))return;let I;return v&&(I=await d()),await((m=a.create)==null?void 0:m.call(a,{...u,author:c??(I==null?void 0:I.data)}))},{mutationKey:o().audit().action("log").get(),...e,meta:{...e==null?void 0:e.meta,...(0,no.getXRay)("useLog",i)}}),L=(0,Er.useMutation)(async u=>{var f;return await((f=a.update)==null?void 0:f.call(a,u))},{onSuccess:u=>{u!=null&&u.resource&&r.invalidateQueries(o().audit().resource((u==null?void 0:u.resource)??"").action("list").get(i))},mutationKey:o().audit().action("rename").get(),...t,meta:{...t==null?void 0:t.meta,...(0,no.getXRay)("useLog",i)}});return{log:p,rename:L}},"useLog"),ku=E("react"),Mu=E("@tanstack/react-query"),Nu=Y(),xu=s(({resource:e,action:t,meta:r,author:a,metaData:o,queryOptions:i})=>{let{get:n}=(0,ku.useContext)(ar),{keys:l,preferLegacyKeys:c}=J();return(0,Mu.useQuery)(l().audit().resource(e).action("list").params(r).get(c),()=>(n==null?void 0:n({resource:e,action:t,author:a,meta:r,metaData:o}))??Promise.resolve([]),{enabled:typeof n<"u",...i,retry:!1,meta:{...i==null?void 0:i.meta,...(0,Nu.getXRay)("useLogList",c)}})},"useLogList"),Ru=E("react"),Tu=U(E("warn-once")),Ou=s(({meta:e={}}={})=>{let t=me(),{i18nProvider:r}=(0,Ru.useContext)(ct),a=Ke(),o=ae(),{resources:i,resource:n,action:l}=G(),{options:{textTransformers:c}}=be(),d=[];if(!(n!=null&&n.name))return{breadcrumbs:d};let v=s(p=>{var L,u,f,h,g,y;let m=typeof p=="string"?fe(p,i,t==="legacy")??{name:p}:p;if(m){let b=$((L=m==null?void 0:m.meta)==null?void 0:L.parent,m==null?void 0:m.parentName);b&&v(b);let q=we(m,i,t==="legacy").find(P=>P.action==="list"),I=(u=q==null?void 0:q.resource)!=null&&u.list?q==null?void 0:q.route:void 0,C=I?t==="legacy"?I:xe(I,m==null?void 0:m.meta,a,e):void 0;d.push({label:$((f=m.meta)==null?void 0:f.label,(h=m.options)==null?void 0:h.label)??o(`${m.name}.${m.name}`,c.humanize(m.name)),href:C,icon:$((g=m.meta)==null?void 0:g.icon,(y=m.options)==null?void 0:y.icon,m.icon)})}},"addBreadcrumb");if(v(n),l&&l!=="list"){let p=`actions.${l}`,L=o(p);typeof r<"u"&&L===p?((0,Tu.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${l}" action. Please add "actions.${l}" key to your translation file.
For more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`),d.push({label:o(`buttons.${l}`,c.humanize(l))})):d.push({label:o(p,c.humanize(l))})}return{breadcrumbs:d}},"useBreadcrumb"),Lr=U(E("react")),Ht=s((e,t,r=!1)=>{let a=[],o=et(e,t);for(;o;)a.push(o),o=et(o,t);return a.reverse(),`/${[...a,e].map(i=>je((r?i.route:void 0)??i.identifier??i.name)).join("/").replace(/^\//,"")}`},"createResourceKey"),Au=s((e,t=!1)=>{let r={item:{name:"__root__"},children:{}};e.forEach(o=>{let i=[],n=et(o,e);for(;n;)i.push(n),n=et(n,e);i.reverse();let l=r;i.forEach(d=>{let v=(t?d.route:void 0)??d.identifier??d.name;l.children[v]||(l.children[v]={item:d,children:{}}),l=l.children[v]});let c=(t?o.route:void 0)??o.identifier??o.name;l.children[c]||(l.children[c]={item:o,children:{}})});let a=s(o=>{let i=[];return Object.keys(o.children).forEach(n=>{let l=Ht(o.children[n].item,e,t),c={...o.children[n].item,key:l,children:a(o.children[n])};i.push(c)}),i},"flatten");return a(r)},"createTree"),io=s(e=>e.split("?")[0].split("#")[0].replace(/(.+)(\/$)/,"$1"),"getCleanPath"),Iu=s(({meta:e,hideOnMissingParameter:t}={hideOnMissingParameter:!0})=>{let r=ae(),a=Br(),o=me(),{resource:i,resources:n}=G(),{pathname:l}=Ke(),{useLocation:c}=ke(),{pathname:d}=c(),v=Ar(),p=`/${((o==="legacy"?io(d):l?io(l):void 0)??"").replace(/^\//,"")}`,L=i?Ht(i,n,o==="legacy"):p??"",u=Lr.default.useMemo(()=>{if(!i)return[];let g=et(i,n),y=[Ht(i,n)];for(;g;)y.push(Ht(g,n)),g=et(g,n);return y},[]),f=Lr.default.useCallback(g=>{var y,m,b,q,I,C;if((((y=g==null?void 0:g.meta)==null?void 0:y.hide)??((m=g==null?void 0:g.options)==null?void 0:m.hide))||!(g!=null&&g.list)&&g.children.length===0)return;let P=g.list?a({resource:g,action:"list",legacy:o==="legacy",meta:e}):void 0;if(!(t&&P&&P.match(/(\/|^):(.+?)(\/|$){1}/)))return{...g,route:P,icon:$((b=g.meta)==null?void 0:b.icon,(q=g.options)==null?void 0:q.icon,g.icon),label:$((I=g==null?void 0:g.meta)==null?void 0:I.label,(C=g==null?void 0:g.options)==null?void 0:C.label)??r(`${g.name}.${g.name}`,v(g.name,"plural"))}},[o,e,r,t]),h=Lr.default.useMemo(()=>{let g=Au(n,o==="legacy"),y=s(m=>m.flatMap(b=>{let q=y(b.children),I=f({...b,children:q});return I?[I]:[]}),"prepare");return y(g)},[n,o,f]);return{defaultOpenKeys:u,selectedKey:L,menuItems:h}},"useMenu"),ue=s(()=>{let{params:e}=Ke();return s(({resource:t,meta:r}={})=>{let{meta:a}=Hr(t)??{meta:{}},{filters:o,sorters:i,current:n,pageSize:l,...c}=e??{};return{...a,...c,...r}},"getMetaFn")},"useMeta"),Fu=s(()=>{let[e,t]=(0,nt.useState)(),r=ae(),{push:a}=Oe(),o=Te(),i=me(),{resource:n,action:l}=G();return(0,nt.useEffect)(()=>{n&&l&&t(r("pages.error.info",{action:l,resource:n.name},`You may have forgotten to add the "${l}" component to "${n.name}" resource.`))},[n,l]),nt.default.createElement(nt.default.Fragment,null,nt.default.createElement("h1",null,r("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&nt.default.createElement("p",null,e),nt.default.createElement("button",{onClick:()=>{i==="legacy"?a("/"):o({to:"/"})}},r("pages.error.backHome",void 0,"Back Home")))},"ErrorComponent"),de=U(E("react")),fn=s(()=>{let[e,t]=(0,de.useState)(""),[r,a]=(0,de.useState)(""),o=ae(),i=ce(),{mutate:n}=er({v3LegacyAuthProviderCompatible:!!(i!=null&&i.isLegacy)});return de.default.createElement(de.default.Fragment,null,de.default.createElement("h1",null,o("pages.login.title","Sign in your account")),de.default.createElement("form",{onSubmit:l=>{l.preventDefault(),n({username:e,password:r})}},de.default.createElement("table",null,de.default.createElement("tbody",null,de.default.createElement("tr",null,de.default.createElement("td",null,o("pages.login.username",void 0,"username"),":"),de.default.createElement("td",null,de.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:l=>t(l.target.value)}))),de.default.createElement("tr",null,de.default.createElement("td",null,o("pages.login.password",void 0,"password"),":"),de.default.createElement("td",null,de.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:l=>a(l.target.value)}))))),de.default.createElement("br",null),de.default.createElement("input",{type:"submit",value:"login"})))},"LoginPage"),ht=U(E("react")),ee=U(E("react")),$u=s(({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:o,wrapperProps:i,renderContent:n,formProps:l,title:c=void 0})=>{let d=me(),v=rr(),{Link:p}=ke(),L=d==="legacy"?p:v,[u,f]=(0,ee.useState)(""),[h,g]=(0,ee.useState)(""),[y,m]=(0,ee.useState)(!1),b=ae(),q=ce(),{mutate:I}=er({v3LegacyAuthProviderCompatible:!!(q!=null&&q.isLegacy)}),C=s((w,M)=>ee.default.createElement(L,{to:w},M),"renderLink"),P=s(()=>e?e.map(w=>ee.default.createElement("div",{key:w.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ee.default.createElement("button",{onClick:()=>I({providerName:w.name}),style:{display:"flex",alignItems:"center"}},w==null?void 0:w.icon,w.label??ee.default.createElement("label",null,w.label)))):null,"renderProviders"),k=ee.default.createElement("div",{...o},ee.default.createElement("h1",{style:{textAlign:"center"}},b("pages.login.title","Sign in to your account")),P(),ee.default.createElement("hr",null),ee.default.createElement("form",{onSubmit:w=>{w.preventDefault(),I({email:u,password:h,remember:y})},...l},ee.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ee.default.createElement("label",{htmlFor:"email-input"},b("pages.login.fields.email","Email")),ee.default.createElement("input",{id:"email-input",name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:w=>f(w.target.value)}),ee.default.createElement("label",{htmlFor:"password-input"},b("pages.login.fields.password","Password")),ee.default.createElement("input",{id:"password-input",type:"password",name:"password",required:!0,size:20,value:h,onChange:w=>g(w.target.value)}),a??ee.default.createElement(ee.default.Fragment,null,ee.default.createElement("label",{htmlFor:"remember-me-input"},b("pages.login.buttons.rememberMe","Remember me"),ee.default.createElement("input",{id:"remember-me-input",name:"remember",type:"checkbox",size:20,checked:y,value:y.toString(),onChange:()=>{m(!y)}}))),ee.default.createElement("br",null),r??C("/forgot-password",b("pages.login.buttons.forgotPassword","Forgot password?")),ee.default.createElement("input",{type:"submit",value:b("pages.login.signin","Sign in")}),t??ee.default.createElement("span",null,b("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",C("/register",b("pages.login.register","Sign up"))))));return ee.default.createElement("div",{...i},n?n(k,c):k)},"LoginPage"),ne=U(E("react")),Uu=s(({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:o,formProps:i,title:n=void 0})=>{let l=me(),c=rr(),{Link:d}=ke(),v=l==="legacy"?d:c,[p,L]=(0,ne.useState)(""),[u,f]=(0,ne.useState)(""),h=ae(),g=ce(),{mutate:y,isLoading:m}=Ur({v3LegacyAuthProviderCompatible:!!(g!=null&&g.isLegacy)}),b=s((C,P)=>ne.default.createElement(v,{to:C},P),"renderLink"),q=s(()=>e?e.map(C=>ne.default.createElement("div",{key:C.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},ne.default.createElement("button",{onClick:()=>y({providerName:C.name}),style:{display:"flex",alignItems:"center"}},C==null?void 0:C.icon,C.label??ne.default.createElement("label",null,C.label)))):null,"renderProviders"),I=ne.default.createElement("div",{...a},ne.default.createElement("h1",{style:{textAlign:"center"}},h("pages.register.title","Sign up for your account")),q(),ne.default.createElement("hr",null),ne.default.createElement("form",{onSubmit:C=>{C.preventDefault(),y({email:p,password:u})},...i},ne.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ne.default.createElement("label",{htmlFor:"email-input"},h("pages.register.fields.email","Email")),ne.default.createElement("input",{id:"email-input",name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:p,onChange:C=>L(C.target.value)}),ne.default.createElement("label",{htmlFor:"password-input"},h("pages.register.fields.password","Password")),ne.default.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:u,onChange:C=>f(C.target.value)}),ne.default.createElement("input",{type:"submit",value:h("pages.register.buttons.submit","Sign up"),disabled:m}),t??ne.default.createElement(ne.default.Fragment,null,ne.default.createElement("span",null,h("pages.login.buttons.haveAccount","Have an account?")," ",b("/login",h("pages.login.signin","Sign in")))))));return ne.default.createElement("div",{...r},o?o(I,n):I)},"RegisterPage"),Ee=U(E("react")),Ku=s(({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:o,title:i=void 0})=>{let n=ae(),l=me(),c=rr(),{Link:d}=ke(),v=l==="legacy"?d:c,[p,L]=(0,Ee.useState)(""),{mutate:u,isLoading:f}=Kr(),h=s((y,m)=>Ee.default.createElement(v,{to:y},m),"renderLink"),g=Ee.default.createElement("div",{...r},Ee.default.createElement("h1",{style:{textAlign:"center"}},n("pages.forgotPassword.title","Forgot your password?")),Ee.default.createElement("hr",null),Ee.default.createElement("form",{onSubmit:y=>{y.preventDefault(),u({email:p})},...o},Ee.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Ee.default.createElement("label",{htmlFor:"email-input"},n("pages.forgotPassword.fields.email","Email")),Ee.default.createElement("input",{id:"email-input",name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:p,onChange:y=>L(y.target.value)}),Ee.default.createElement("input",{type:"submit",disabled:f,value:n("pages.forgotPassword.buttons.submit","Send reset instructions")}),Ee.default.createElement("br",null),e??Ee.default.createElement("span",null,n("pages.register.buttons.haveAccount","Have an account? ")," ",h("/login",n("pages.login.signin","Sign in"))))));return Ee.default.createElement("div",{...t},a?a(g,i):g)},"ForgotPasswordPage"),Le=U(E("react")),Qu=s(({wrapperProps:e,contentProps:t,renderContent:r,formProps:a,title:o=void 0})=>{let i=ae(),n=ce(),{mutate:l,isLoading:c}=Qr({v3LegacyAuthProviderCompatible:!!(n!=null&&n.isLegacy)}),[d,v]=(0,Le.useState)(""),[p,L]=(0,Le.useState)(""),u=Le.default.createElement("div",{...t},Le.default.createElement("h1",{style:{textAlign:"center"}},i("pages.updatePassword.title","Update Password")),Le.default.createElement("hr",null),Le.default.createElement("form",{onSubmit:f=>{f.preventDefault(),l({password:d,confirmPassword:p})},...a},Le.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Le.default.createElement("label",{htmlFor:"password-input"},i("pages.updatePassword.fields.password","New Password")),Le.default.createElement("input",{id:"password-input",name:"password",type:"password",required:!0,size:20,value:d,onChange:f=>v(f.target.value)}),Le.default.createElement("label",{htmlFor:"confirm-password-input"},i("pages.updatePassword.fields.confirmPassword","Confirm New Password")),Le.default.createElement("input",{id:"confirm-password-input",name:"confirmPassword",type:"password",required:!0,size:20,value:p,onChange:f=>L(f.target.value)}),Le.default.createElement("input",{type:"submit",disabled:c,value:i("pages.updatePassword.buttons.submit","Update")}))));return Le.default.createElement("div",{...e},r?r(u,o):u)},"UpdatePasswordPage"),zu=s(e=>{let{type:t}=e;return ht.default.createElement(ht.default.Fragment,null,s(()=>{switch(t){case"register":return ht.default.createElement(Uu,{...e});case"forgotPassword":return ht.default.createElement(Ku,{...e});case"updatePassword":return ht.default.createElement(Qu,{...e});default:return ht.default.createElement($u,{...e})}},"renderView")())},"AuthPage"),he=U(E("react")),gn=s(()=>he.default.createElement(he.default.Fragment,null,he.default.createElement("h1",null,"Welcome on board"),he.default.createElement("p",null,"Your configuration is completed."),he.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",he.default.createElement("code",null,"`resources`")," property of ",he.default.createElement("code",null,"`<Refine>`")),he.default.createElement("div",{style:{display:"flex",gap:8}},he.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},he.default.createElement("button",null,"Documentation")),he.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},he.default.createElement("button",null,"Examples")),he.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},he.default.createElement("button",null,"Community")))),"ReadyPage"),Z=U(E("react")),Wu=[{title:"Documentation",description:"Learn about the technical details of using refine in your projects.",link:"https://refine.dev/",icon:Z.default.createElement("svg",{width:"14",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a1 1 0 0 0-1-1H3a1 1 0 0 1 0-2h10a1 1 0 1 0 0-2H2Z",fill:"#fff"}))},{title:"Tutorial",description:"Learn how to use refine by building a fully-functioning CRUD app, from scratch to full launch.",link:"https://refine.dev/docs/tutorial/introduction/index/",icon:Z.default.createElement("svg",{width:"16",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{d:"M0 4.573c0-.475.163-.948.53-1.25a4.57 4.57 0 0 1 .854-.553L5.956.485a4.571 4.571 0 0 1 4.088 0l4.572 2.285c.308.154.594.34.853.553.306.251.47.62.517 1.01.01.055.014.112.014.169v6.5a1 1 0 0 1-2 0V6.684l-3.956 1.978a4.571 4.571 0 0 1-4.088 0L1.384 6.376a4.57 4.57 0 0 1-.853-.553C.163 5.522 0 5.05 0 4.573Z",fill:"#fff"}),Z.default.createElement("path",{d:"M5.061 13.305 3 12.274V9.42l2.061 1.031a6.571 6.571 0 0 0 5.878 0L13 9.421v2.853l-2.061 1.03a6.571 6.571 0 0 1-5.878 0Z",fill:"#fff"}))},{title:"Examples",description:"A collection of reference applications you can use as a starting point.",link:"https://refine.dev/examples",icon:Z.default.createElement("svg",{width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4H0V2Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm2 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",fill:"#fff"}),Z.default.createElement("path",{d:"M0 14V8h16v6a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2Z",fill:"#fff"}))},{title:"Community",description:"Join our Discord community and keep up with the latest news.",link:"https://discord.gg/refine",icon:Z.default.createElement("svg",{width:"16",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{d:"M13.553 1.005A13.334 13.334 0 0 0 10.253 0c-.156.276-.298.56-.423.85a12.42 12.42 0 0 0-3.664 0A8.975 8.975 0 0 0 5.744 0 13.43 13.43 0 0 0 2.44 1.007C.351 4.066-.215 7.05.068 9.99A13.36 13.36 0 0 0 4.116 12c.328-.436.618-.9.867-1.384a8.647 8.647 0 0 1-1.365-.645c.115-.082.227-.167.335-.249a9.594 9.594 0 0 0 8.094 0c.11.089.222.173.335.25-.436.254-.894.47-1.368.646.249.484.539.946.867 1.382a13.3 13.3 0 0 0 4.051-2.01c.332-3.41-.568-6.365-2.379-8.985Zm-8.21 7.176c-.79 0-1.442-.709-1.442-1.58 0-.872.63-1.587 1.439-1.587s1.456.715 1.442 1.586c-.014.872-.636 1.58-1.44 1.58Zm5.315 0c-.79 0-1.44-.709-1.44-1.58 0-.872.63-1.587 1.44-1.587.81 0 1.452.715 1.438 1.586-.014.872-.634 1.58-1.438 1.58Z",fill:"#fff"}))}],_u=s(()=>{let e=Ca("(max-width: 1010px)"),t=Ca("(max-width: 650px)"),r=s(()=>t?"1, 280px":e?"2, 280px":"4, 208px","getGridTemplateColumns"),a=s(()=>t?"32px":e?"40px":"48px","getHeaderFontSize"),o=s(()=>t?"16px":e?"20px":"24px","getSubHeaderFontSize");return Z.default.createElement("div",{style:{backgroundImage:"url(https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-page.webp)",backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat",minHeight:"100vh",backgroundColor:"#0D0D12",fontFamily:"Arial",color:"#FFFFFF"}},Z.default.createElement("div",{style:{height:"89px"}}),Z.default.createElement("div",{style:{display:"flex",justifyContent:"center"}},Z.default.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/welcome-page/welcome-logo.webp",width:"198",height:"54"})),Z.default.createElement("div",{style:{height:e?"270px":"22vw",minHeight:e?"270px":"313px"}}),Z.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px",textAlign:"center"}},Z.default.createElement("h1",{style:{fontSize:a(),fontWeight:700,margin:"0px"}},"Welcome Aboard!"),Z.default.createElement("h4",{style:{fontSize:o(),fontWeight:400,margin:"0px"}},"Your configuration is completed.")),Z.default.createElement("div",{style:{height:"64px"}}),Z.default.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${r()})`,justifyContent:"center",gap:"48px",paddingRight:"16px",paddingLeft:"16px",maxWidth:"976px",margin:"auto"}},Wu.map(i=>Z.default.createElement(ju,{key:`welcome-page-${i.title}`,card:i}))),Z.default.createElement("div",{style:{height:"64px"}}))},"WelcomePage"),ju=s(({card:e})=>{let{title:t,description:r,icon:a,link:o}=e,[i,n]=(0,Z.useState)(!1);return Z.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"16px"}},Z.default.createElement("div",{style:{display:"flex",alignItems:"center"}},Z.default.createElement("a",{onPointerEnter:()=>n(!0),onPointerLeave:()=>n(!1),style:{display:"flex",alignItems:"center",color:"#fff",textDecoration:"none"},href:o},a,Z.default.createElement("span",{style:{fontSize:"16px",fontWeight:700,marginLeft:"13px",marginRight:"14px"}},t),Z.default.createElement("svg",{style:{transition:"transform 0.5s ease-in-out, opacity 0.2s ease-in-out",...i&&{transform:"translateX(4px)",opacity:1}},width:"12",height:"8",fill:"none",opacity:"0.5",xmlns:"http://www.w3.org/2000/svg"},Z.default.createElement("path",{d:"M7.293.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L8.586 5H1a1 1 0 0 1 0-2h7.586L7.293 1.707a1 1 0 0 1 0-1.414Z",fill:"#fff"})))),Z.default.createElement("span",{style:{fontSize:"12px",opacity:.5,lineHeight:"16px"}},r))},"Card"),re=U(E("react")),wr=E("@tanstack/react-query"),Vu=Y(),so=U(E("react")),st=E("react"),Bu="4.42.4",Xu=s(()=>{var e;let t=_o(),r=(0,st.useContext)(ar),a=(0,st.useContext)(Nt),o=(0,st.useContext)(Xr),i=(0,st.useContext)(jr),{i18nProvider:n}=(0,st.useContext)(ct),l=(0,st.useContext)(Vr),c=(0,st.useContext)(Ot),{resources:d}=G(),v=be(),p=!!r.create||!!r.get||!!r.update,L=!!(a!=null&&a.publish)||!!(a!=null&&a.subscribe)||!!(a!=null&&a.unsubscribe),u=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,f=!!i,h=!!(n!=null&&n.changeLocale)||!!(n!=null&&n.getLocale)||!!(n!=null&&n.translate),g=!!l.close||!!l.open,y=!!c.can,m=(e=v==null?void 0:v.options)==null?void 0:e.projectId;return{providers:{auth:t,auditLog:p,live:L,router:u,data:f,i18n:h,notification:g,accessControl:y},version:Bu,resourceCount:d.length,projectId:m}},"useTelemetryData"),Hu=s(e=>{try{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")}catch{return}},"encode"),Gu=s(e=>{let t=new Image;t.src=e},"throughImage"),Zu=s(e=>{fetch(e)},"throughFetch"),Yu=s(e=>{typeof Image<"u"?Gu(e):typeof fetch<"u"&&Zu(e)},"transport"),Ju=s(()=>{let e=Xu(),t=so.default.useRef(!1);return so.default.useEffect(()=>{if(t.current)return;let r=Hu(e);r&&(Yu(`https://telemetry.refine.dev/telemetry?payload=${r}`),t.current=!0)},[]),null},"Telemetry"),el=s(e=>{let t=["go","parse","back","Link"],r=Object.keys(e).filter(a=>!t.includes(a));return r.length>0?(console.warn(`Unsupported properties are found in \`routerProvider\` prop. You provided \`${r.join(", ")}\`. Supported properties are \`${t.join(", ")}\`. You may wanted to use \`legacyRouterProvider\` prop instead.`),!0):!1},"checkRouterPropMisuse"),uo=U(E("react")),tl=s(e=>{let t=uo.default.useRef(!1);uo.default.useEffect(()=>{t.current===!1&&e&&el(e)&&(t.current=!0)},[e])},"useRouterMisuseWarning"),rl=s(({legacyAuthProvider:e,authProvider:t,dataProvider:r,legacyRouterProvider:a,routerProvider:o,notificationProvider:i,accessControlProvider:n,auditLogProvider:l,resources:c,DashboardPage:d,ReadyPage:v,LoginPage:p,catchAll:L,children:u,liveProvider:f,i18nProvider:h,Title:g,Layout:y,Sider:m,Header:b,Footer:q,OffLayoutArea:I,onLiveEvent:C,options:P})=>{let{optionsWithDefaults:k,disableTelemetryWithDefault:w,reactQueryWithDefaults:M}=xi({options:P}),R=Zo(()=>{var T;return M.clientConfig instanceof wr.QueryClient?M.clientConfig:new wr.QueryClient({...M.clientConfig,defaultOptions:{...M.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(T=M.clientConfig.defaultOptions)==null?void 0:T.queries}}})},[M.clientConfig]);(0,Vu.useQuerySubscription)(R);let D=re.default.useMemo(()=>typeof i=="function"?i:()=>i??{},[i])();if(tl(o),a&&!o&&(c??[]).length===0)return v?re.default.createElement(v,null):re.default.createElement(gn,null);let{RouterComponent:S=re.default.Fragment}=o?{}:a??{};return re.default.createElement(wr.QueryClientProvider,{client:R},re.default.createElement(Hs,{...D},re.default.createElement(Ai,{...e??{},isProvided:!!e},re.default.createElement(Ii,{...t??{},isProvided:!!t},re.default.createElement(ks,{...r},re.default.createElement(Rs,{liveProvider:f},re.default.createElement(Us,{value:a&&!o?"legacy":"new"},re.default.createElement(Qs,{router:o},re.default.createElement(yu,{...a},re.default.createElement($s,{resources:c??[]},re.default.createElement(Zs,{i18nProvider:h},re.default.createElement(bu,{...n??{}},re.default.createElement(qu,{...l??{}},re.default.createElement(ls,null,re.default.createElement(Ni,{mutationMode:k.mutationMode,warnWhenUnsavedChanges:k.warnWhenUnsavedChanges,syncWithLocation:k.syncWithLocation,Title:g,undoableTimeout:k.undoableTimeout,catchAll:L,DashboardPage:d,LoginPage:p,Layout:y,Sider:m,Footer:q,Header:b,OffLayoutArea:I,hasDashboard:!!d,liveMode:k.liveMode,onLiveEvent:C,options:k},re.default.createElement($i,null,re.default.createElement(S,null,u,!w&&re.default.createElement(Ju,null),re.default.createElement(Pn,null))))))))))))))))))},"Refine"),lo=E("react"),yn=s(({notification:e})=>{let t=ae(),{notificationDispatch:r}=Et(),{open:a}=rt(),[o,i]=(0,lo.useState)(),n=s(()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:dr(e.seconds)},`You have ${dr(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:dr(e.seconds)}),e.seconds>0)){o&&clearTimeout(o);let l=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);i(l)}},"cancelNotification");return(0,lo.useEffect)(()=>{n()},[e]),null},"UndoableQueue"),Zt=U(E("react")),al=s(({children:e,Layout:t,Sider:r,Header:a,Title:o,Footer:i,OffLayoutArea:n})=>{let{Layout:l,Footer:c,Header:d,Sider:v,Title:p,OffLayoutArea:L}=be();return Zt.default.createElement(t??l,{Sider:r??v,Header:a??d,Footer:i??c,Title:o??p,OffLayoutArea:n??L},e,Zt.default.createElement(ol,null))},"LayoutWrapper"),ol=s(()=>{let{Prompt:e}=ke(),t=ae(),{warnWhen:r,setWarnWhen:a}=Or(),o=s(i=>(i.preventDefault(),i.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),i.returnValue),"warnWhenListener");return(0,Zt.useEffect)(()=>(r&&window.addEventListener("beforeunload",o),window.removeEventListener("beforeunload",o)),[r]),Zt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},"UnsavedPrompt"),Se=U(E("react")),nl=s(()=>{let e=Te(),[t,r]=Se.default.useState(void 0);return Se.default.useEffect(()=>{t&&e(t)},[t]),Se.default.useCallback(a=>{t||r(a)},[t])},"useDeferredGo");function hn({redirectOnFail:e=!0,appendCurrentPathToQuery:t=!0,children:r,fallback:a,loading:o}){var i;let n=ce(),l=me(),c=!!(n!=null&&n.isProvided),d=!!(n!=null&&n.isLegacy),v=l==="legacy",p=Ke(),L=Te(),u=nl(),{replace:f}=Oe(),{useLocation:h}=ke(),g=h(),{isLoading:y,isFetching:m,isSuccess:b,data:{authenticated:q,redirectTo:I}={},refetch:C}=tr({v3LegacyAuthProviderCompatible:d});Se.default.useEffect(()=>{C()},[r,a]);let P=Se.default.useRef({status:y?"initial":"pending",content:o??null});m?P.current.status="pending":m||(P.current.status="settled");let k=c?d?b:q:!0;if(P.current.status==="settled")if(k)P.current.content=Se.default.createElement(Se.default.Fragment,null,r??null);else if(typeof a<"u")P.current.content=Se.default.createElement(Se.default.Fragment,null,a);else{let w=`${v?g==null?void 0:g.pathname:p.pathname}`.replace(/(\?.*|#.*)$/,""),M=d?typeof e=="string"?e:"/login":typeof e=="string"?e:I;if(M)if(v){let R=t?`?to=${encodeURIComponent(w)}`:"";f(`${M}${R}`)}else u({to:M,query:t?{to:(i=p.params)!=null&&i.to?p.params.to:L({to:w,options:{keepQuery:!0},type:"path"})}:void 0,type:"replace"})}return c?Se.default.createElement(Se.default.Fragment,null,P.current.content):Se.default.createElement(Se.default.Fragment,null,r??null)}s(hn,"Authenticated");var il=E("react"),Pn=s(()=>{let{useLocation:e}=ke(),{checkAuth:t}=Re(),r=e();return(0,il.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},"RouteChangeHandler"),ut=U(E("react")),sl=s(({resource:e,action:t,params:r,fallback:a,onUnauthorized:o,children:i,...n})=>{let{resource:l,id:c,action:d}=G(e),{identifier:v}=G(),p=s(()=>{let g=(r==null?void 0:r.id)??c;return e&&e!==v?r==null?void 0:r.id:g},"getDefaultId")(),L=e??(l==null?void 0:l.name),u=t??d??"",f=r??{id:p,resource:l},{data:h}=mn({resource:L,action:u,params:f});return(0,ut.useEffect)(()=>{o&&(h==null?void 0:h.can)===!1&&o({resource:L,action:u,reason:h==null?void 0:h.reason,params:f})},[h==null?void 0:h.can]),h!=null&&h.can?ut.default.isValidElement(i)?ut.default.cloneElement(i,n):ut.default.createElement(ut.default.Fragment,null,i):(h==null?void 0:h.can)===!1?ut.default.createElement(ut.default.Fragment,null,a??null):null},"CanAccess"),lt=U(E("react")),ul=[`
    .banner {
        display: flex;
        @media (max-width: 1000px) {
            display: none;
        }
    }`,`
    .banner::before,
    .banner::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    `,`
    .banner::before {
        background-image: linear-gradient(
            270deg,
            rgba(255, 76, 77, 0.35) 0%,
            rgba(255, 153, 51, 0.35) 12.5%,
            rgba(255, 191, 0, 0.35) 25%,
            rgba(38, 217, 127, 0.35) 37.5%,
            rgba(71, 235, 235, 0.35) 50%,
            rgba(0, 128, 255, 0.35) 62.5%,
            rgba(51, 51, 255, 0.35) 75%,
            rgba(128, 0, 255, 0.35) 87.5%,
            rgba(237, 94, 201, 0.35) 100%
        );
        background-position: 0 0;
        background-size: 200% 100%;
        background-repeat: repeat-x;
        animation: bgpos 4s linear infinite;
      }
    `,`
    .banner::after {
        background: linear-gradient(
          180deg,
          rgba(13, 13, 13, 0.85) 0%,
          rgba(13, 13, 13, 0) 100%
        );
    }
    `,`
    @keyframes bgpos {
        0% {
            background-position: 0 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    `,`
    .gh-link, .gh-link:hover, .gh-link:active, .gh-link:visited, .gh-link:focus {
        text-decoration: none;
        z-index: 9;
    }
    `],ll=s(()=>((0,lt.useEffect)(()=>{let e=document.createElement("style");document.head.appendChild(e),ul.forEach(t=>{var r;return(r=e.sheet)==null?void 0:r.insertRule(t,e.sheet.cssRules.length)})},[]),lt.default.createElement("div",{className:"banner",style:{flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",padding:"8px 16px",backgroundColor:"#0d0d0d",borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},lt.default.createElement("div",{style:{width:"200px"}}),lt.default.createElement("a",{className:"gh-link",href:"https://s.refine.dev/github-support",target:"_blank",rel:"noreferrer"},lt.default.createElement("div",{className:"content",style:{position:"relative",zIndex:2,color:"#fff",display:"flex",flexDirection:"row",gap:"8px"}},lt.default.createElement("span",{className:"wizard",style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",fontSize:"32px",lineHeight:"32px"}},"\u{1F9D9}\u200D\u2642\uFE0F"),lt.default.createElement("span",{className:"text",style:{padding:"4px 0",fontSize:"16px",lineHeight:"24px",textShadow:"0px 0px 4px rgba(255, 255, 255, 0.5)"}},"refine grants your wishes! Please give us a \u2B50\uFE0F on GitHub to keep the magic going."))))),"GitHubBanner")});var Sn=qt(Gr()),Xe=E("react-router-dom");var vt=qt(E("react")),Lt=E("react-router-dom");var K=qt(E("react")),te=E("react-router-dom"),H=qt(Gr()),or=({route:e})=>{let{catchAll:t}=(0,H.useRefineContext)(),{useParams:r}=(0,H.useRouterContext)(),{resources:a}=(0,H.useResource)(),{action:o,id:i}=r(),n=a.find(l=>l.route===e);if(n){let{list:l,create:c,edit:d,show:v,name:p,canCreate:L,canEdit:u,canShow:f,canDelete:h,options:g}=n,y=()=>console.error("`string` resource routes are not supported in legacy router. Please switch to the new router or assign Components to the resource routes."),m=()=>console.error("`Object` resource routes are not supported in legacy router. Please switch to the new router or assign Components to the resource routes."),b=(typeof l=="string"?y():typeof l=="object"?m():l)??(()=>null),q=(typeof c=="string"?y():typeof c=="object"?m():c)??(()=>null),I=(typeof d=="string"?y():typeof d=="object"?m():d)??(()=>null),C=(typeof v=="string"?y():typeof v=="object"?m():v)??(()=>null);return(()=>{switch(o){case void 0:return K.default.createElement(H.CanAccess,{resource:p,action:"list",fallback:t??K.default.createElement(H.ErrorComponent,null),params:{resource:n}},l?K.default.createElement(b,{name:p,canCreate:L,canEdit:u,canDelete:h,canShow:f,options:g}):t??K.default.createElement(H.ErrorComponent,null));case"create":case"clone":return K.default.createElement(H.CanAccess,{resource:p,action:"create",fallback:t??K.default.createElement(H.ErrorComponent,null),params:{id:i?decodeURIComponent(i):void 0,resource:n}},c?K.default.createElement(q,{name:p,canCreate:L,canEdit:u,canDelete:h,canShow:f,options:g}):t??K.default.createElement(H.ErrorComponent,null));case"edit":return K.default.createElement(H.CanAccess,{resource:p,action:"edit",params:{id:i?decodeURIComponent(i):void 0,resource:n},fallback:t??K.default.createElement(H.ErrorComponent,null)},d?K.default.createElement(I,{name:p,canCreate:L,canEdit:u,canDelete:h,canShow:f,options:g}):t??K.default.createElement(H.ErrorComponent,null));case"show":return K.default.createElement(H.CanAccess,{resource:p,action:"show",params:{id:i?decodeURIComponent(i):void 0,resource:n},fallback:t??K.default.createElement(H.ErrorComponent,null)},v?K.default.createElement(C,{name:p,canCreate:L,canEdit:u,canDelete:h,canShow:f,options:g}):t??K.default.createElement(H.ErrorComponent,null));default:return K.default.createElement(K.default.Fragment,null,t??K.default.createElement(H.ErrorComponent,null))}})()}return K.default.createElement(K.default.Fragment,null,t??K.default.createElement(H.ErrorComponent,null))},nr=({initialRoute:e})=>{let{resources:t}=(0,H.useResource)(),{catchAll:r,DashboardPage:a,LoginPage:o}=(0,H.useRefineContext)(),{routes:i}=(0,H.useRouterContext)(),n=(0,H.useActiveAuthProvider)(),{isFetching:l,isError:c,data:d}=(0,H.useIsAuthenticated)({v3LegacyAuthProviderCompatible:!!(n!=null&&n.isLegacy),params:{type:"routeProvider"}}),v=(0,K.useMemo)(()=>n!=null&&n.isProvided?n!=null&&n.isLegacy?!(c||(d==null?void 0:d.error)):d==null?void 0:d.authenticated:!0,[d,c,n==null?void 0:n.isLegacy]);if(l)return K.default.createElement(te.Routes,null,K.default.createElement(te.Route,{path:"*",element:null}));let p=()=>{let{pathname:g,search:y}=location,m=`${g}${y}`;return K.default.createElement(te.Navigate,{to:`/login?to=${encodeURIComponent(m)}`})},L=[];t.map(g=>{let y=K.default.createElement(te.Route,{key:`${g.route}`,path:`${g.route}`,element:K.default.createElement(or,{route:g.route})},K.default.createElement(te.Route,{path:":action",element:K.default.createElement(or,{route:g.route})},K.default.createElement(te.Route,{path:":id",element:K.default.createElement(or,{route:g.route})})));L.push(y)});let u=()=>{var g,y;return K.default.createElement(te.Routes,null,[...i||[]].filter(m=>!m.layout).map((m,b)=>K.default.createElement(te.Route,{key:`custom-route-${b}`,...m,element:m.element})),K.default.createElement(te.Route,{path:"/",element:K.default.createElement(H.LayoutWrapper,null,K.default.createElement(te.Outlet,null))},[...i||[]].filter(m=>m.layout).map((m,b)=>K.default.createElement(te.Route,{key:`custom-route-${b}`,...m,element:m.element})),a?K.default.createElement(te.Route,{index:!0,element:K.default.createElement(H.CanAccess,{resource:"dashboard",action:"list",fallback:r??K.default.createElement(H.ErrorComponent,null)},K.default.createElement(a,null))}):K.default.createElement(te.Route,{index:!0,element:K.default.createElement(te.Navigate,{to:e??`/${(y=(g=t.find(m=>m.list))==null?void 0:g.route)==null?void 0:y.replace(/^\//,"")}`})}),...[...L||[]],K.default.createElement(te.Route,{path:"*",element:K.default.createElement(or,{route:""})})))},f=()=>o?K.default.createElement(o,null):K.default.createElement(H.LoginPage,null);return v?u():(()=>K.default.createElement(te.Routes,null,[...i||[]].map((g,y)=>K.default.createElement(te.Route,{key:`custom-route-${y}`,...g})),K.default.createElement(te.Route,{path:"/",element:f()}),K.default.createElement(te.Route,{path:"/login",element:f()}),K.default.createElement(te.Route,{path:"*",element:K.default.createElement(p,null)})))()};function Cn({children:e,...t}){return vt.default.createElement(Lt.BrowserRouter,{...t},vt.default.createElement(nr,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}function dl({children:e,...t}){return vt.default.createElement(Lt.MemoryRouter,{...t},vt.default.createElement(nr,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}function cl({children:e,...t}){return vt.default.createElement(Lt.HashRouter,{...t},vt.default.createElement(nr,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),e)}var wt=qt(E("react")),En=E("react-router-dom");function ml(e,t=!0){let{navigator:r}=wt.default.useContext(En.UNSAFE_NavigationContext);wt.default.useEffect(()=>{if(!t)return;let a=r.go,o=r.push;return r.push=(...i)=>{e()!==!1&&o(...i)},r.go=(...i)=>{e()!==!1&&a(...i)},()=>{r.push=o,r.go=a}},[r,e,t])}function Ln(e,t=!0,r,a=!1){let o=wt.default.useCallback(n=>(n.preventDefault(),n.returnValue=e,n.returnValue),[e]);wt.default.useEffect(()=>(t&&!a&&window.addEventListener("beforeunload",o),()=>{window.removeEventListener("beforeunload",o)}),[o,t,a]);let i=wt.default.useCallback(()=>{let n=window.confirm(e);return n&&r&&r(),n},[e]);ml(i,t)}var wn=({message:e,when:t,setWarnWhen:r})=>(Ln(e,t,()=>{r==null||r(!1)},!0),null);var vl={useHistory:()=>{let e=(0,Xe.useNavigate)();return{push:e,replace:t=>{e(t,{replace:!0})},goBack:()=>{e(-1)}}},useLocation:Xe.useLocation,useParams:()=>{let e=(0,Xe.useParams)(),{pathname:t}=(0,Xe.useLocation)(),r=`/${Object.values(e).join("/")}`;return(0,Sn.handleUseParams)({...e,resource:Object.keys(e).length===0?t.substring(1):decodeURIComponent(t.substring(1)).replace(r,"")})},Prompt:wn,Link:Xe.Link,RouterComponent:Cn},Xl=vl;})();
//# sourceMappingURL=legacy.js.map