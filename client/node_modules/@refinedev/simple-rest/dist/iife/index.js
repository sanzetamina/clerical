(()=>{var j=Object.create;var q=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var B=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var _=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var W=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of I(r))!E.call(e,s)&&s!==t&&q(e,s,{get:()=>r[s],enumerable:!(o=k(r,s))||o.enumerable});return e};var A=(e,r,t)=>(t=e!=null?j(B(e)):{},W(r||!e||!e.__esModule?q(t,"default",{value:e,enumerable:!0}):t,e));var D=_("query-string");var m=_("query-string");var l=e=>{switch(e){case"ne":case"gte":case"lte":return`_${e}`;case"contains":return"_like";case"eq":default:return""}};var h=e=>{if(e&&e.length>0){let r=[],t=[];return e.map(o=>{r.push(o.field),t.push(o.order)}),{_sort:r,_order:t}}};var f=e=>{let r={};return e&&e.map(t=>{if(t.operator==="or"||t.operator==="and")throw new Error(`[@refinedev/simple-rest]: \`operator: ${t.operator}\` is not supported. You can create custom data provider. https://refine.dev/docs/api-reference/core/providers/data-provider/#creating-a-data-provider`);if("field"in t){let{field:o,operator:s,value:n}=t;if(o==="q"){r[o]=n;return}let d=l(s);r[`${o}${d}`]=n}}),r};var O=A(_("axios")),y=O.default.create();y.interceptors.response.use(e=>e,e=>{var t,o,s;let r={...e,message:(o=(t=e.response)==null?void 0:t.data)==null?void 0:o.message,statusCode:(s=e.response)==null?void 0:s.status};return Promise.reject(r)});var F=(e,r=y)=>({getList:async({resource:t,pagination:o,filters:s,sorters:n,meta:d})=>{let i=`${e}/${t}`,{current:c=1,pageSize:a=10,mode:p="server"}=o??{},{headers:$,method:g}=d??{},x=g??"get",M=f(s),u={};p==="server"&&(u._start=(c-1)*a,u._end=c*a);let v=h(n);if(v){let{_sort:P,_order:b}=v;u._sort=P.join(","),u._order=b.join(",")}let{data:w,headers:S}=await r[x](`${i}?${(0,m.stringify)(u)}&${(0,m.stringify)(M)}`,{headers:$}),T=+S["x-total-count"];return{data:w,total:T||w.length}},getMany:async({resource:t,ids:o,meta:s})=>{let{headers:n,method:d}=s??{},i=d??"get",{data:c}=await r[i](`${e}/${t}?${(0,m.stringify)({id:o})}`,{headers:n});return{data:c}},create:async({resource:t,variables:o,meta:s})=>{let n=`${e}/${t}`,{headers:d,method:i}=s??{},c=i??"post",{data:a}=await r[c](n,o,{headers:d});return{data:a}},update:async({resource:t,id:o,variables:s,meta:n})=>{let d=`${e}/${t}/${o}`,{headers:i,method:c}=n??{},a=c??"patch",{data:p}=await r[a](d,s,{headers:i});return{data:p}},getOne:async({resource:t,id:o,meta:s})=>{let n=`${e}/${t}/${o}`,{headers:d,method:i}=s??{},c=i??"get",{data:a}=await r[c](n,{headers:d});return{data:a}},deleteOne:async({resource:t,id:o,variables:s,meta:n})=>{let d=`${e}/${t}/${o}`,{headers:i,method:c}=n??{},a=c??"delete",{data:p}=await r[a](d,{data:s,headers:i});return{data:p}},getApiUrl:()=>e,custom:async({url:t,method:o,filters:s,sorters:n,payload:d,query:i,headers:c})=>{let a=`${t}?`;if(n){let g=h(n);if(g){let{_sort:x,_order:M}=g,u={_sort:x.join(","),_order:M.join(",")};a=`${a}&${(0,m.stringify)(u)}`}}if(s){let g=f(s);a=`${a}&${(0,m.stringify)(g)}`}i&&(a=`${a}&${(0,m.stringify)(i)}`);let p;switch(o){case"put":case"post":case"patch":p=await r[o](t,d,{headers:c});break;case"delete":p=await r.delete(t,{data:d,headers:c});break;default:p=await r.get(a,{headers:c});break}let{data:$}=p;return Promise.resolve({data:$})}});var U=F;})();
//# sourceMappingURL=index.js.map