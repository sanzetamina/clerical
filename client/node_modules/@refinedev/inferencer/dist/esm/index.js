var hr=Object.defineProperty;var t=(e,r)=>hr(e,"name",{value:r,configurable:!0});import H,{useContext as Gr}from"react";import{useResource as Fe,TranslationContext as Yr}from"@refinedev/core";var xr=/(image|photo|avatar|url|logo|cover|thumbnail|icon)/i,se=t((e,r)=>{let s=["name","label","title","count","content","username","nickname","login","firstName","lastName","url"];xr.test(e)&&s.unshift("url");let n=s.find(o=>o in r&&!!r[o]);if(n)return n==="firstName"&&"lastName"in r?["firstName","lastName"]:n},"getFieldableKeys");import{pickNotDeprecated as Ir}from"@refinedev/core";function pe(e,r,s){if(r)return r;let n=s==null?void 0:s.find(i=>i.name===e),o=Ir(n==null?void 0:n.meta,n==null?void 0:n.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"}t(pe,"pickDataProvider");var J=t(e=>{var r;return(r=e==null?void 0:e.options)==null?void 0:r.dataProviderName},"dataProviderFromResource");var le=t(e=>{let r=[...e].filter(Boolean).sort((s,n)=>(n.priority||0)-(s.priority||0))[0];return r||null},"pickInferredField");import br from"prettier/standalone";import wr from"prettier/parser-typescript";var fe=t(e=>{try{return br.format(e,{parser:"typescript",plugins:[wr],arrowParens:"always",trailingComma:"all",semi:!0,tabWidth:4,printWidth:80})}catch(r){return console.warn("Formatting error in inferencer",r),e}},"prettierFormat");var Se=t(e=>e.replace(/ {2,}/g," ").replace(/\n{2,}/g,`
`),"prettySpaces");var de=/(-id|-ids|_id|_ids|Id|Ids|ID|IDs)(\[\])?$/,Pe=t((e,r)=>{let s=de.test(e),n=typeof r=="string"||typeof r=="number",o=Array.isArray(r)&&r.every(i=>typeof i=="string"||typeof i=="number");return s&&n||s&&o?{key:e,relation:!0,multiple:!!o,type:"relation",priority:1}:!1},"relationInfer");var C=t(e=>e.replace(de,""),"removeRelationSuffix");var X=t(e=>C(e).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/-/g," ").split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" "),"prettyString");import $e from"pluralize";var K=t((e="")=>$e.isSingular(e)?e:$e.singular(e),"toSingular");import Ne from"pluralize";var _=t((e="")=>Ne.isPlural(e)?e:Ne.plural(e),"toPlural");var ue=t(e=>e.replace(/export\s+(const|let|var|type|interface|function|class)\s+(\w+)\s*(=|:)\s*/g,"$1 $2 = ").split(`
`).filter(o=>!o.trim().startsWith("export default")).join(`
`),"replaceExports");var Re=/import(?:(?:(?:[ \n\t]+([^ *\n\t\{\},]+)[ \n\t]*(?:,|[ \n\t]+))?([ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\})?[ \n\t]*)|[ \n\t]*\*[ \n\t]*as[ \n\t]+([^ \n\t\{\}]+)[ \n\t]+)from[ \n\t]*(?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Fr=/import[ \n\t](?:['"])([^'"\n]+)(?:['"])(?:;?)/g,vr=/((?:\w|\s|_)*)( as )((?:\w|\s|_)*)( |,)?/g,me=t((e,r={})=>{let s=e.matchAll(Re),n=new Set;for(let o of s){let[,i,f,p,l]=o;if(l in r){let u=r[l];if(l==="react")continue;i&&n.add(`const { default: ${i} } = ${u};`),f&&n.add(`const${f.replace(vr,"$1: $3$4")} = ${u};`),p&&n.add(`const ${p} = ${u};`)}}return Se(`
    ${Array.from(n).join(`
`)}
    ${e.replace(Re,"").replace(Fr,"")}
    `)},"replaceImports");import ie from"pluralize";var ge=t((e,r)=>e?r.find(n=>{let o=C(e.key);return n.name===o||n.name===(ie.isPlural(o)?o:ie.plural(o))||n.name===(ie.isSingular(o)?o:ie.singular(o))}):void 0,"resourceFromInferred");import Cr from"pluralize";var ae=t((e,r,s="Inferred")=>{let n=e.replace(/[^a-zA-Z0-9]/g," "),o=Cr.singular(n),f=X(o).replace(/ /g,"")||s,p=r.charAt(0).toUpperCase()+r.slice(1);return/^[a-zA-Z]/.test(f)?`${f}${p}`:`${p}${f}`},"componentName");var kr=t(e=>e?Array.isArray(e)?e.join(""):typeof e=="string"?e:typeof e=="object"||typeof e=="function"?e.toString():typeof e=="number"?String(e):typeof e=="boolean"&&e?"true":e:"","handleExpression"),Te=t((e,...r)=>e.reduce((n,o,i)=>`${n}${o}${kr(r[i])}`,"").trim(),"jsx");var ye=t((e,r)=>`
    ${e??""}
    
    render(typeof ${r} !== "undefined" ? <${r} /> : <></>);
    `,"prepareLiveCode");var he=t(e=>e==null?void 0:e.replace(/(\/\* hidden-start \*\/)(.|\n)*?(\/\* hidden-end \*\/)/g,""),"removeHiddenCode");var Ar=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,ce=t(e=>Ar.test(e),"shouldDotAccess");function xe(e,r,s){let n=`${e}`;return r&&(n+="?.",ce(r)?n+=r:n+=`['${r}']`),s&&(n+="?.",ce(s)?n+=s:n+=`['${s}']`),n}t(xe,"accessorSingle");function Sr(e,r,s){return(s??[]).map(o=>xe(e,r,o))}t(Sr,"accessorMultiple");var Le=t((e,r,s,n=' + " " + ')=>Array.isArray(s)?n?Sr(e,r,s).join(n):xe(e,r,s[0]):xe(e,r,s),"accessor"),Ie=t((e,r,s)=>{let n=e;return r&&(n+=`.${r}`),s&&(Array.isArray(s)?n+=`.${s[0]}`:n+=`.${s}`),n},"dotAccessor"),Me=t(e=>Array.isArray(e.accessor)||e.multiple?`accessorKey: "${e.key}"`:e.accessor?`accessorKey: "${Ie(e.key,void 0,e.accessor)}"`:`accessorKey: "${e.key}"`,"getAccessorKey");var Ee=t(e=>{let r=e.reduce((n,[o,i,f])=>(n[i]||(n[i]=[]),n[i].includes(o)||(f?n[i].push([o,!0]):n[i].push(o)),n),{});return Object.entries(r).map(([n,o])=>{let i=o.find(u=>Array.isArray(u)&&u[1]),f=o.filter(u=>typeof u=="string"),p=i?`${i[0]}`:"",l=f.length?`{ ${f.join(", ")} }`:"";return`import ${p}${p&&l?", ":""}${l} from "${n}";`})},"printImports");var Pr=/^id$/i,Ve=t(e=>Pr.test(e),"isIDKey");var De=t(e=>e.relationInfer&&e.relationInfer.accessor?Array.isArray(e.relationInfer.accessor)?`optionLabel: "${e.relationInfer.accessor[0]}",`:e.relationInfer.accessor!=="title"?`optionLabel: "${e.relationInfer.accessor}",`:"":"","getOptionLabel");var je=t(e=>{},"noOp");var ze=t((e,r="")=>{if(Number.isInteger(Number(e)))return r.charAt(0).toLowerCase()+r.slice(1)+e;let n=e.replace(/^\d+/,"").replace(/[^a-zA-Z0-9]/g,"-"),o=X(n).replace(/ /g,"");return`${o.charAt(0).toLowerCase()+o.slice(1)}${r.charAt(0).toUpperCase()+r.slice(1)}`},"getVariableName");var B=t((e,r,s)=>{if(r&&s&&e){let n=e?r[e]:{},i=[...s,"default"].reduce((f,p)=>f??(n==null?void 0:n[p]),void 0);if(i)return i}},"pickMeta");var Oe=t(e=>e===void 0?e:typeof e=="string"?`"${e}"`:e,"idQuoteWrapper");var He=t(e=>{let r=t((s,n,o,i=r,f)=>{let p=e.map(u=>u(s,n,o,i,f));return le(p)},"fieldInferencer");return r},"composeInferencers");var Ke=t(e=>t((s,n,o,i,f,p)=>e.reduce((l,u)=>u(l,n,o,i,f,p),s),"fieldTransformer"),"composeTransformers");var _e=t((e,r,s,n,o)=>{let i=Array.isArray(r),f=Array.isArray(r)&&r.every(p=>typeof p=="string"||typeof p=="number");if(i){if(!f){let l=n(e,r[0],s,n,o);return l?{...l,key:e,multiple:!0,priority:1}:!1}let p=n(e,r[0],s,n,o)||{type:"string"};return{key:e,multiple:!0,priority:1,type:p==null?void 0:p.type}}return!1},"arrayInfer");var Be=t((e,r)=>typeof r=="boolean"?{key:e,type:"boolean"}:!1,"booleanInfer");import We from"dayjs";var $r=/(_at|_on|At|On|AT|ON)(\[\])?$/,Nr=["/",":","-","."],Ze=t((e,r)=>{let s=$r.test(e)&&We(r).isValid(),n=typeof r=="string"&&We(r).isValid();return typeof r=="string"&&Nr.some(i=>r.includes(i))&&(s||n)?{key:e,type:"date",priority:1}:!1},"dateInfer");var Rr=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ue=t((e,r)=>typeof r=="string"&&Rr.test(r)?{key:e,type:"email",priority:1}:!1,"emailInfer");var Tr=/\.(gif|jpe?g|tiff?|png|webp|bmp|svg)$/i,Ge=t((e,r)=>typeof r=="string"&&Tr.test(r)?{key:e,type:"image",priority:2}:!1,"imageInfer");var Ye=t((e,r)=>typeof r>"u"||r===null?null:!1,"nullishInfer");var Qe=t((e,r)=>{let s=typeof r=="string"&&r.length>0,n=!isNaN(r);return s&&n||typeof r=="number"?{key:e,type:"number"}:!1},"numberInfer");var qe=/id$/i,Je=t((e,r,s,n,o)=>{let i=r!==null,f=!Array.isArray(r);if(i&&f&&typeof r=="object"){let l=Object.keys(r).length===1&&qe.test(Object.keys(r)[0]),u=Object.keys(r).some(y=>qe.test(y));if(l)return{key:e,type:"relation",relation:!0,accessor:"id",priority:1};let g=se(e,r);if((g?g.length>0:!1)&&g){let y=g&&Array.isArray(g)?g[0]:g,d=n(y,r[y],r,n,o);if(d){let v=Array.isArray(g)?g.map($=>d.accessor?`${$}.${Array.isArray(d.accessor)?d.accessor[0]:d.accessor}`:$):d.accessor?Array.isArray(d.accessor)?`${g}.${d.accessor[0]}`:`${g}.${d.accessor}`:g;return(d==null?void 0:d.type)==="text"&&(o==="create"||o==="edit")&&u?{key:e,type:"relation",relation:!0,accessor:"id",priority:1}:{...d,fieldable:!0,key:e,accessor:v,priority:1}}}return{key:e,fieldable:!1,type:"object",priority:1}}return!1},"objectInfer");var Xe=t((e,r)=>typeof r=="string"&&r.length>100?{key:e,type:"richtext",priority:1}:!1,"richtextInfer");var er=t((e,r)=>typeof r=="string"?{key:e,type:"text"}:!1,"textInfer");var Lr=/^(https?|ftp):\/\/(-\.)?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/i,rr=t((e,r)=>typeof r=="string"&&Lr.test(r)?{key:e,type:"url",priority:1}:!1,"urlInfer");var tr=[_e,Be,Ze,Ue,Ge,Ye,Qe,Je,Pe,Xe,er,rr];var nr=t((e,r,s,n)=>e.map(i=>{if(!i.relation&&(i.type==="text"||i.type==="richtext"||i.type==="number")&&!i.canRelation){let f=/^[a-z0-9-]+$/,p=t(y=>f.test(`${y}`),"isValidUUID"),l=i.key.toLowerCase()!=="id";return!(!i.accessor||typeof i.accessor=="string")||!l?i:(i.multiple?n[i.key]:[n[i.key]]).every(y=>p(i.accessor?y[i.accessor]:y))?{...i,canRelation:!0}:i}return i}),"basicToRelation");var Mr=/(image|photo|avatar|cover|thumbnail|icon)/i,or=t(e=>e.map(s=>s.type==="url"&&Mr.test(s.key)?{...s,type:"image"}:s),"imageByKey");var sr=t((e,r)=>e.map(n=>{let o=ge(n,r);return o?{...n,relation:!0,type:"relation",resource:o}:n}),"relationByResource");var ir=t((e,r,s,n,o,i)=>e.map(p=>{if(p.relation&&p.type==="relation"&&!p.resource){let l=p.accessor?n[p.key][p.accessor]:n[p.key],u=o(p.key,l,n,o,i);if(u&&u.type!=="relation")return{...p,fieldable:!0,relation:!1,type:u.type,canRelation:!0}}return p}),"relationToFieldable");var ar=[or,sr,ir,nr];import O from"react";import*as Er from"@refinedev/core";import{LivePreview as Vr,LiveProvider as Dr}from"@aliemir/react-live";var cr=[["react","React",O],["@refinedev/core","RefineCore",Er]],be=O.createContext({}),we=t(({fetchError:e,code:r,additionalScope:s,errorComponent:n})=>{let o=(r&&ue(me(r,[...cr,...s??[]].reduce((p,[l,u,g,A])=>A?p:{...p,[l]:u},{}))))??"",i=O.useMemo(()=>({React:O,...O,...[...cr,...s??[]].reduce((p,[l,u,g])=>({...p,[u]:g}),{})}),[s]),f=O.useMemo(()=>t(()=>{let{error:l}=O.useContext(be);return n?O.createElement(n,{error:l?`<p>An error occured while rendering the generated component.You can check the generated code from the below "Show Code" button and fix the error manually.</p>
                                    <p>If you think this is a bug, please report the issue at <a target="_blank" rel="noopener noreferrer" href="https://github.com/refinedev/refine/issues">https://github.com/refinedev/refine/issues</a></p>
                                    <p>Exception:</p>
                                    <code>${l}</code>`:typeof e=="string"?e:e?`<p>Something went wrong while fetching the resource data.</p>
                                    <p>To learn more about the Inferencer, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`:void 0}):null},"LiveErrorComponent"),[n,e]);return O.createElement(Dr,{Context:be,code:o,scope:i,noInline:!0},!e&&O.createElement(Vr,{Context:be}),O.createElement(f,null))},"LiveComponent");import c from"react";import jr,{defaultProps as zr}from"prism-react-renderer";import Or from"prism-react-renderer/themes/vsDark";var Hr=t(({code:e,loading:r})=>{let s=c.useMemo(()=>fe(e??""),[e]),[n,o]=c.useState(!1),[i,f]=c.useState(!1),[p,l]=c.useState(!1),[u,g]=c.useState(!1),[A,y]=c.useState(!1);return c.useEffect(()=>{if(!r){let d=setTimeout(()=>{o(!0)},300);return()=>{clearTimeout(d)}}return()=>{}},[r]),c.useEffect(()=>{if(typeof window<"u"){let d=window.matchMedia("(max-width: 449px)");d.matches?l(!1):l(!0);let v=t(()=>{d.matches?l(!1):l(!0)},"handleResize");return window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}}return()=>{}},[]),c.useEffect(()=>{if(typeof window<"u"){let d=window.matchMedia("(max-width: 1280px)");d.matches?g(!0):g(!1);let v=t(()=>{d.matches?g(!0):g(!1)},"handleResize");return window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}}return()=>{}},[]),s&&!r?c.createElement(c.Fragment,null,p&&c.createElement("div",{className:"refine-inferencer--code-viewer",style:{position:"sticky",bottom:"24px",paddingTop:"24px",left:0,right:0,width:"100%",zIndex:10,display:"flex",justifyContent:"center",transition:"all 0.2s ease",opacity:n&&!i?1:0,transform:n&&!i?"translateY(0)":"translateY(100px)"}},c.createElement("div",{style:{width:"calc(100% - calc(64px * 2))",maxWidth:"1080px",padding:"20px",backgroundColor:"#1A1A1A",boxShadow:"0px 4px 16px -4px rgba(0, 0, 0, 0.5), 0px 8px 32px -8px rgba(0, 0, 0, 0.35)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:u?"column":"row",gap:"12px"}},c.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"}},c.createElement("div",null,c.createElement(_r,null)),c.createElement("div",{style:{fontSize:"14px",lineHeight:"20px",color:"#ffffff"}},c.createElement("p",{style:{padding:0,margin:0}},"Most of the page code is auto-generated by the"," ",c.createElement("span",{style:{textDecoration:"underline"}},"Inferencer")," ","feature, based on your backend data structure."),c.createElement("p",{style:{padding:0,margin:0}},"While this is an excellent way to experiment with refine,"," ",c.createElement("span",{style:{fontWeight:600}},"it's not intended to be used on production.")))),c.createElement("div",null,c.createElement("button",{onPointerEnter:()=>y(!0),onPointerLeave:()=>y(!1),onClick:()=>f(!0),style:{appearance:"none",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",color:"#ffffff",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:A?"scale(1.025)":void 0,filter:A?"brightness(1.1)":void 0}},c.createElement(lr,{style:{flexShrink:0}}),c.createElement("span",null,"Show the auto-generated code"))))),c.createElement(Kr,{visible:i,onClose:()=>f(!1),code:s})):null},"SharedCodeViewer"),Kr=t(({visible:e,onClose:r,code:s=""})=>{let n=c.useRef(null),[o,i]=c.useState(!1),[f,p]=c.useState(!1),[l,u]=c.useState(!1),[g,A]=c.useState(!1);c.useEffect(()=>{if(typeof document<"u"){let a=t(m=>{n.current&&!n.current.contains(m.target)&&r()},"onOutsideClick");return document.addEventListener("pointerdown",a),()=>{document.removeEventListener("pointerdown",a)}}return()=>{}},[r]);let y=t(()=>{typeof navigator<"u"&&(navigator.clipboard.writeText(s),i(!0),setTimeout(()=>{i(!1)},1e3))},"onCopy"),d=c.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},c.createElement("div",{style:{fontWeight:700,fontSize:"20px",lineHeight:"32px",color:"#0D0D0D"}},"Auto-generated code by Inferencer"),c.createElement("button",{onClick:r,onPointerEnter:()=>u(!0),onPointerLeave:()=>u(!1),style:{flexShrink:0,appearance:"none",border:"none",background:"none",padding:0,margin:0,outline:"none",borderRadius:"50px",width:"32px",height:"32px",cursor:"pointer",transition:"all 0.15s ease",transform:l?"scale(1.05)":void 0,filter:l?"brightness(0.8)":void 0}},c.createElement(Br,null))),v=c.createElement("div",{style:{fontSize:"13px",borderRadius:"8px",flex:"1",overflow:"scroll",background:"#1E1E1E"}},c.createElement(jr,{...zr,theme:Or,code:s,language:"tsx"},({className:a,style:m,tokens:b,getLineProps:D,getTokenProps:j})=>c.createElement("pre",{className:a,style:{...m,padding:"14px 14px 14px 14px",margin:"0",width:"100%",boxSizing:"border-box"}},b.map((S,z)=>c.createElement("div",{key:z,...D({line:S,key:z})},S.map((h,k)=>c.createElement("span",{key:k,...j({token:h,key:k})})))))));return c.createElement("div",{className:"refine-inferencer--code-viewer-modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.5)",transition:"all 0.2s ease",opacity:e?1:0,pointerEvents:e?"all":"none",display:"flex",justifyContent:"center",alignItems:"center"}},c.createElement("div",{ref:n,style:{transform:e?"scale(1) translateY(0px)":"scale(0) translateY(-200px)",transition:"all 0.25s cubic-bezier(.35,1.29,.81,1.08)",transitionDelay:"0.25",width:"calc(100% - calc(32px * 2))",height:"calc(100% - calc(32px * 2))",backgroundColor:"#fff",maxWidth:"640px",maxHeight:"720px",borderRadius:"8px",padding:"16px"}},c.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",gap:"16px"}},d,v,c.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",gap:"16px"}},c.createElement("button",{onPointerEnter:()=>p(!0),onPointerLeave:()=>p(!1),onClick:y,style:{appearance:"none",height:"40px",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",color:"#ffffff",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",position:"relative",overflow:"hidden",transition:"filter 0.2s ease",transform:f?"scale(1.025)":"scale(1)",filter:f?"brightness(1.1)":void 0}},c.createElement(pr,{style:{flexShrink:0,marginTop:"-2px",marginBottom:"-2px"}}),c.createElement("span",null,"Copy Generated Code"),c.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",transition:"all 0.2s ease",transform:o?"translateY(0)":"translateY(40px)"}},c.createElement(pr,{style:{flexShrink:0,marginTop:"-2px",marginBottom:"-2px"}}),c.createElement("span",null,"Copied!"))),c.createElement("a",{onPointerEnter:()=>A(!0),onPointerLeave:()=>A(!1),href:"https://refine.dev/docs/packages/documentation/inferencer",target:"_blank",rel:"noreferrer",style:{appearance:"none",textDecoration:"none",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 128, 255, 0.1)",color:"#0080FF",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:g?"scale(1.025)":void 0,filter:g?"brightness(1.1)":void 0}},c.createElement(lr,{style:{flexShrink:0}}),c.createElement("span",null,"Learn more about inferencer"))))))},"CodeModal"),_r=t(e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",...e},c.createElement("path",{fill:"#0080FF",fillRule:"evenodd",d:"M10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10Zm0-15a1.25 1.25 0 1 0 0 2.5A1.25 1.25 0 0 0 10 5Zm0 10c.69 0 1.25-.56 1.25-1.25V10a1.25 1.25 0 1 0-2.5 0v3.75c0 .69.56 1.25 1.25 1.25Z",clipRule:"evenodd"})),"InfoIcon"),lr=t(e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},c.createElement("path",{fill:"currentColor",d:"M5 2a1 1 0 0 1 0 2H4v8h8v-1a1 1 0 1 1 2 0v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1Z"}),c.createElement("path",{fill:"currentColor",d:"M9 2a1 1 0 0 0 0 2h1.586L6.293 8.293a1 1 0 0 0 1.414 1.414L12 5.414V7a1 1 0 1 0 2 0V3a1 1 0 0 0-1-1H9Z"})),"OpenIcon"),Br=t(e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",...e},c.createElement("path",{fill:"#A6A6A6",fillRule:"evenodd",d:"M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16Zm-2.586-21.414a2 2 0 1 0-2.828 2.828L13.172 16l-2.586 2.586a2 2 0 1 0 2.828 2.828L16 18.828l2.586 2.586a2 2 0 1 0 2.828-2.828L18.828 16l2.586-2.586a2 2 0 1 0-2.828-2.828L16 13.172l-2.586-2.586Z",clipRule:"evenodd"})),"CloseIcon"),pr=t(e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",fill:"none",...e},c.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 5a3 3 0 0 0 3 3h2a3 3 0 0 0 3-3h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h1Zm0 7a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm1 3a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H9Z",clipRule:"evenodd"}),c.createElement("path",{fill:"currentColor",d:"M13 4a1 1 0 1 1 0 2h-2a1 1 0 1 1 0-2h2Z"})),"ClipboardIcon");import Q from"react";import{useDataProvider as Wr,useResource as Zr}from"@refinedev/core";var fr=t((e,r,s,n)=>{let{resource:o,id:i,resources:f}=Zr(r),p=s??i,l=Wr(),[u,g]=Q.useState(void 0),[A,y]=Q.useState(void 0),[d,v]=Q.useState(void 0),[$,a]=Q.useState(!0),[m,b]=Q.useState(!1),D=Q.useCallback(async j=>{var h;let S=J(o)??pe(o==null?void 0:o.name,void 0,f),z=l(S);b(!0),g(void 0);try{if((e==="list"||e==="create")&&o){let k=await z.getList({resource:o==null?void 0:o.name,meta:B((o==null?void 0:o.identifier)??(o==null?void 0:o.name),n,["getList"])}),P=(h=k.data)==null?void 0:h[0];P||g(`<p>No records/data found for resource "${o==null?void 0:o.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),y(P),v(k.data),setTimeout(()=>{b(!1)},500)}if((e==="edit"||e==="show")&&j&&o){let P=(await z.getOne({resource:o==null?void 0:o.name,id:j,meta:B((o==null?void 0:o.identifier)??(o==null?void 0:o.name),n,["getOne"])})).data;P||g(`<p>No records/data found for resource "${o==null?void 0:o.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),y(P),setTimeout(()=>{b(!1)},500)}}catch(k){console.warn("An error occured while fetching the resource data. Please check the error message below:",k),g(`<p>Something went wrong while fetching the resource data.</p>
                    <p>Please check your data provider and API for resource "${o==null?void 0:o.name}".</p>
                    <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),setTimeout(()=>{b(!1)},500)}},[e,l,o,f]);return Q.useEffect(()=>{a(!1),!m&&!A&&D(p)},[D,p]),{data:A,datas:d,loading:m,initial:$,error:u}},"useInferFetch");import te from"react";import{useDataProvider as Ur}from"@refinedev/core";import{get as dr}from"lodash-es";var ur=t(({record:e,fields:r,infer:s,meta:n})=>{let o=Ur(),[i,f]=te.useState([]),[p,l]=te.useState(!0),[u,g]=te.useState(!1),A=te.useCallback(async y=>{console.groupCollapsed("@refinedev/inferencer is trying to detect relations");let d=[];g(!0);try{let v=y.map(async a=>{var m,b,D,j,S;if(a&&(a.relation||a.canRelation)&&e){if(a.relationInfer)return a;let z=J(a.resource),h=o(z),k=a.multiple,P=Array.isArray(a.accessor)?void 0:a.multiple?e[a.key].map(N=>a.accessor?dr(N,a.accessor):N)[0]:a.accessor?dr(e[a.key],a.accessor):e[a.key];if(P&&a.resource)try{let N={};if(k&&h.getMany){let{data:W}=await h.getMany({resource:a.resource.name,ids:[P],meta:B(((m=a.resource)==null?void 0:m.identifier)??((b=a.resource)==null?void 0:b.name),n,["getMany"])});N=W==null?void 0:W[0]}else{let{data:W}=await h.getOne({resource:a.resource.name,id:P,meta:B(((D=a.resource)==null?void 0:D.identifier)??((j=a.resource)==null?void 0:j.name),n,k?["getMany","getOne"]:["getOne"])});N=W}d.push({status:"success",resource:a.resource.name,field:a.key});let Y=s("__",N,{},s);return{...a,relationInfer:Y}}catch{return d.push({status:"error",resource:a.resource.name,field:a.key}),{...a,relationInfer:null}}if(P){let N,Y;try{let q={};if(k&&h.getMany){let{data:T}=await((S=h.getMany)==null?void 0:S.call(h,{resource:_(C(a.key)),ids:[P],meta:B(_(C(a.key)),n,["getMany"])}));q=T==null?void 0:T[0]}else{let{data:T}=await h.getOne({resource:_(C(a.key)),id:P,meta:B(_(C(a.key)),n,k?["getMany","getOne"]:["getOne"])});q=T}d.push({status:"success",resource:_(C(a.key)),field:a.key}),N=q,Y=!0}catch{d.push({status:"error",resource:_(C(a.key)),field:a.key});let T={};try{if(k&&h.getMany){let{data:L}=await h.getMany({resource:K(C(a.key)),meta:B(K(C(a.key)),n,["getMany"]),ids:[P]});T=L==null?void 0:L[0]}else{let{data:L}=await h.getOne({resource:K(C(a.key)),meta:B(K(C(a.key)),n,k?["getMany","getOne"]:["getOne"]),id:P});T=L}d.push({status:"success",resource:K(C(a.key)),field:a.key}),N=T,Y=!1}catch{return d.push({status:"error",resource:K(C(a.key)),field:a.key}),{...a,relationInfer:null}}}let W=s("__",N,{},s),ne=C(a.key);return{...a,relation:!0,type:"relation",resource:{name:Y?_(ne):K(ne)},fieldable:!1,canRelation:void 0,relationInfer:W}}return{...a,relationInfer:null}}return a}),$=await Promise.all(v);f($.filter(a=>a)),setTimeout(()=>{g(!1)},500)}catch{setTimeout(()=>{g(!1)},500)}setTimeout(()=>{console.log(`Tried to detect relations with ${d.length} attempts and succeeded with ${d.filter(v=>v.status==="success").length} attempts.`),console.groupEnd(),console.info("@refinedev/inferencer may send multiple requests to your API for nonexistent resources when trying to detect relations. To learn more about how the inferencer works, visit https://s.refine.dev/how-inferencer-works")},500)},[o,e]);return te.useEffect(()=>{l(!1),!u&&r&&r.length>0&&i.length===0&&A(r)},[A,u,r,A]),{fields:i,loading:u,initial:p}},"useRelationFetch");var Qr=t(({type:e,additionalScope:r=[],customElements:s=[],fieldTransformers:n=[],renderer:o,loadingComponent:i,errorComponent:f,codeViewerComponent:p})=>{let l=He([...tr,...s]),u=Ke([...ar,...n]),g=t(({resourceName:y,fieldTransformer:d,hideCodeViewerInProduction:v,meta:$,id:a})=>{var ke,Ae;let{resource:m,resources:b}=Fe(y),{i18nProvider:D}=Gr(Yr),{resource:j}=Fe(),{data:S,datas:z,loading:h,initial:k,error:P}=fr(e,y??(m==null?void 0:m.name),a,$),N=t((x,I,M)=>{let E=l(x,I,M,l,e);if(E&&m){let V=u([E],b,m,M,l,e),F=d?V.flatMap(w=>{let R=d(w);return R?[R]:[]}):V;return F==null?void 0:F[0]}},"inferSingleField"),Y=t(x=>Object.keys(x).map(M=>{let E=x[M];return N(M,E,x)}).filter(Boolean),"inferSingleRecord"),W=t(x=>{let I=x.map(w=>Y(w)),M=x.flatMap(w=>Object.keys(w)).filter((w,R,ee)=>ee.indexOf(w)===R),E={},V=M.map(w=>{let R=I.map(U=>U.find(Z=>Z.key===w));return R.reduce((U,Z,oe)=>{if(!Z)return U;let re=R.filter(G=>(G==null?void 0:G.key)===Z.key&&(G==null?void 0:G.type)===Z.type).length;return re>U.count?(E[w]=x[oe][w],{count:re,field:Z}):U},{count:0,field:void 0}).field});return{commonRecord:E,inferredFields:V}},"inferMultipleRecords"),[ne,q]=H.useMemo(()=>{if(z&&(e==="list"||e==="create")){let x=W(z);return[x.inferredFields,x.commonRecord]}if(S){let x=Object.keys(S).map(I=>{let M=S[I];return l(I,M,S,l,e)}).filter(Boolean);if(m){let I=u(x,b,m,S,l,e);return[d?I.flatMap(E=>{let V=d(E);return V?[V]:[]}):I,S]}return[[],S]}return[[],void 0]},[S,z,b,m,d]),{fields:T,loading:L}=ur({record:q,fields:ne,infer:l,meta:$}),ve=H.useMemo(()=>{let x=[];return T.forEach((I,M,E)=>{if(I.resource){if(x.findIndex(F=>{var w,R;return((w=F.resource)==null?void 0:w.name)===((R=I.resource)==null?void 0:R.name)})>-1)return;let V=E.filter((F,w)=>{var R,ee,U,Z,oe,re;if(w!==M){let G=I.resource,gr=F.resource,yr=((R=F.resource)==null?void 0:R.identifier)||((ee=I.resource)==null?void 0:ee.identifier)?((U=F.resource)==null?void 0:U.identifier)===((Z=I.resource)==null?void 0:Z.identifier):((oe=F.resource)==null?void 0:oe.name)===((re=I.resource)==null?void 0:re.name);return G&&gr&&yr}else return!1});if(V.length>0)if(e==="create"||e==="edit"){let F;[I,...V].find(w=>{w.fieldable!==!0&&F===void 0&&(F=w)}),F?x.push(F):x.push(I)}else{let F;[I,...V].find(w=>{w.fieldable!==!1&&F===void 0&&(F=w)}),F?x.push(F):x.push(I)}else x.push(I)}else x.push(I)}),x},[T,e]),Ce=H.useMemo(()=>!h&&!L&&!k&&m?o({resource:m,resources:b,fields:ve,infer:l,meta:$,isCustomPage:m.name!==(j==null?void 0:j.name),id:a,i18n:!!D}):"",[m,b,ve,h,L]),mr=v;return H.createElement(H.Fragment,null,i&&(h||L)&&H.createElement(i,null),!h&&!L&&H.createElement(H.Fragment,null,H.createElement(we,{fetchError:!h&&P?P:!h&&!k&&!S,code:ye(Ce,ae(((ke=m==null?void 0:m.meta)==null?void 0:ke.label)??((Ae=m==null?void 0:m.options)==null?void 0:Ae.label)??(m==null?void 0:m.label)??(m==null?void 0:m.name)??"Resource",e)),errorComponent:f,additionalScope:r}),typeof p<"u"&&!mr?H.createElement(p,{code:he(Ce),loading:h||L}):null))},"Inferencer");return t(({name:y,resource:d,fieldTransformer:v,meta:$,hideCodeViewerInProduction:a,id:m})=>{let{resource:b}=Fe(d??y),D=`${(b==null?void 0:b.identifier)??(b==null?void 0:b.name)}-${e}-${m}`;return H.createElement(g,{hideCodeViewerInProduction:a,fieldTransformer:v,resourceName:d??y,meta:$??{},key:D,id:m})},"InferencerComponent")},"createInferencer");export{Hr as SharedCodeViewer,Le as accessor,ae as componentName,Qr as createInferencer,J as dataProviderFromResource,Ie as dotAccessor,Me as getAccessorKey,se as getFieldableKeys,De as getOptionLabel,ze as getVariableName,Oe as idQuoteWrapper,Ve as isIDKey,Te as jsx,je as noOp,X as prettyString,Ee as printImports,C as removeRelationSuffix,ce as shouldDotAccess,_ as toPlural,K as toSingular};
//# sourceMappingURL=index.js.map