var Rr=Object.create;var se=Object.defineProperty;var Tr=Object.getOwnPropertyDescriptor;var Lr=Object.getOwnPropertyNames;var Mr=Object.getPrototypeOf,Er=Object.prototype.hasOwnProperty;var t=(e,r)=>se(e,"name",{value:r,configurable:!0});var Vr=(e,r)=>{for(var s in r)se(e,s,{get:r[s],enumerable:!0})},We=(e,r,s,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Lr(r))!Er.call(e,o)&&o!==s&&se(e,o,{get:()=>r[o],enumerable:!(n=Tr(r,o))||n.enumerable});return e};var $=(e,r,s)=>(s=e!=null?Rr(Mr(e)):{},We(r||!e||!e.__esModule?se(s,"default",{value:e,enumerable:!0}):s,e)),Dr=e=>We(se({},"__esModule",{value:!0}),e);var rt={};Vr(rt,{SharedCodeViewer:()=>Fr,accessor:()=>$e,componentName:()=>ce,createInferencer:()=>Sr,dataProviderFromResource:()=>J,dotAccessor:()=>de,getAccessorKey:()=>Ne,getFieldableKeys:()=>ie,getOptionLabel:()=>Le,getVariableName:()=>Ee,idQuoteWrapper:()=>Ve,isIDKey:()=>Te,jsx:()=>ke,noOp:()=>Me,prettyString:()=>X,printImports:()=>Re,removeRelationSuffix:()=>v,shouldDotAccess:()=>pe,toPlural:()=>B,toSingular:()=>_});module.exports=Dr(rt);var N=$(require("react")),te=require("@refinedev/core");var jr=/(image|photo|avatar|url|logo|cover|thumbnail|icon)/i,ie=t((e,r)=>{let s=["name","label","title","count","content","username","nickname","login","firstName","lastName","url"];jr.test(e)&&s.unshift("url");let n=s.find(o=>o in r&&!!r[o]);if(n)return n==="firstName"&&"lastName"in r?["firstName","lastName"]:n},"getFieldableKeys");var Ze=require("@refinedev/core");function ye(e,r,s){if(r)return r;let n=s==null?void 0:s.find(i=>i.name===e),o=(0,Ze.pickNotDeprecated)(n==null?void 0:n.meta,n==null?void 0:n.options);return o!=null&&o.dataProviderName?o.dataProviderName:"default"}t(ye,"pickDataProvider");var J=t(e=>{var r;return(r=e==null?void 0:e.options)==null?void 0:r.dataProviderName},"dataProviderFromResource");var he=t(e=>{let r=[...e].filter(Boolean).sort((s,n)=>(n.priority||0)-(s.priority||0))[0];return r||null},"pickInferredField");var Ue=$(require("prettier/standalone")),Ge=$(require("prettier/parser-typescript"));var xe=t(e=>{try{return Ue.default.format(e,{parser:"typescript",plugins:[Ge.default],arrowParens:"always",trailingComma:"all",semi:!0,tabWidth:4,printWidth:80})}catch(r){return console.warn("Formatting error in inferencer",r),e}},"prettierFormat");var Ye=t(e=>e.replace(/ {2,}/g," ").replace(/\n{2,}/g,`
`),"prettySpaces");var Ie=/(-id|-ids|_id|_ids|Id|Ids|ID|IDs)(\[\])?$/,Qe=t((e,r)=>{let s=Ie.test(e),n=typeof r=="string"||typeof r=="number",o=Array.isArray(r)&&r.every(i=>typeof i=="string"||typeof i=="number");return s&&n||s&&o?{key:e,relation:!0,multiple:!!o,type:"relation",priority:1}:!1},"relationInfer");var v=t(e=>e.replace(Ie,""),"removeRelationSuffix");var X=t(e=>v(e).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/-/g," ").split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" "),"prettyString");var be=$(require("pluralize"));var _=t((e="")=>be.default.isSingular(e)?e:be.default.singular(e),"toSingular");var we=$(require("pluralize"));var B=t((e="")=>we.default.isPlural(e)?e:we.default.plural(e),"toPlural");var Fe=t(e=>e.replace(/export\s+(const|let|var|type|interface|function|class)\s+(\w+)\s*(=|:)\s*/g,"$1 $2 = ").split(`
`).filter(o=>!o.trim().startsWith("export default")).join(`
`),"replaceExports");var qe=/import(?:(?:(?:[ \n\t]+([^ *\n\t\{\},]+)[ \n\t]*(?:,|[ \n\t]+))?([ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\})?[ \n\t]*)|[ \n\t]*\*[ \n\t]*as[ \n\t]+([^ \n\t\{\}]+)[ \n\t]+)from[ \n\t]*(?:['"])([^'"\n]+)(?:['"])(?:;?)/g,zr=/import[ \n\t](?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Or=/((?:\w|\s|_)*)( as )((?:\w|\s|_)*)( |,)?/g,ve=t((e,r={})=>{let s=e.matchAll(qe),n=new Set;for(let o of s){let[,i,f,p,l]=o;if(l in r){let u=r[l];if(l==="react")continue;i&&n.add(`const { default: ${i} } = ${u};`),f&&n.add(`const${f.replace(Or,"$1: $3$4")} = ${u};`),p&&n.add(`const ${p} = ${u};`)}}return Ye(`
    ${Array.from(n).join(`
`)}
    ${e.replace(qe,"").replace(zr,"")}
    `)},"replaceImports");var ae=$(require("pluralize"));var Ce=t((e,r)=>e?r.find(n=>{let o=v(e.key);return n.name===o||n.name===(ae.default.isPlural(o)?o:ae.default.plural(o))||n.name===(ae.default.isSingular(o)?o:ae.default.singular(o))}):void 0,"resourceFromInferred");var Je=$(require("pluralize"));var ce=t((e,r,s="Inferred")=>{let n=e.replace(/[^a-zA-Z0-9]/g," "),o=Je.default.singular(n),f=X(o).replace(/ /g,"")||s,p=r.charAt(0).toUpperCase()+r.slice(1);return/^[a-zA-Z]/.test(f)?`${f}${p}`:`${p}${f}`},"componentName");var Hr=t(e=>e?Array.isArray(e)?e.join(""):typeof e=="string"?e:typeof e=="object"||typeof e=="function"?e.toString():typeof e=="number"?String(e):typeof e=="boolean"&&e?"true":e:"","handleExpression"),ke=t((e,...r)=>e.reduce((n,o,i)=>`${n}${o}${Hr(r[i])}`,"").trim(),"jsx");var Ae=t((e,r)=>`
    ${e??""}
    
    render(typeof ${r} !== "undefined" ? <${r} /> : <></>);
    `,"prepareLiveCode");var Se=t(e=>e==null?void 0:e.replace(/(\/\* hidden-start \*\/)(.|\n)*?(\/\* hidden-end \*\/)/g,""),"removeHiddenCode");var Kr=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,pe=t(e=>Kr.test(e),"shouldDotAccess");function Pe(e,r,s){let n=`${e}`;return r&&(n+="?.",pe(r)?n+=r:n+=`['${r}']`),s&&(n+="?.",pe(s)?n+=s:n+=`['${s}']`),n}t(Pe,"accessorSingle");function _r(e,r,s){return(s??[]).map(o=>Pe(e,r,o))}t(_r,"accessorMultiple");var $e=t((e,r,s,n=' + " " + ')=>Array.isArray(s)?n?_r(e,r,s).join(n):Pe(e,r,s[0]):Pe(e,r,s),"accessor"),de=t((e,r,s)=>{let n=e;return r&&(n+=`.${r}`),s&&(Array.isArray(s)?n+=`.${s[0]}`:n+=`.${s}`),n},"dotAccessor"),Ne=t(e=>Array.isArray(e.accessor)||e.multiple?`accessorKey: "${e.key}"`:e.accessor?`accessorKey: "${de(e.key,void 0,e.accessor)}"`:`accessorKey: "${e.key}"`,"getAccessorKey");var Re=t(e=>{let r=e.reduce((n,[o,i,f])=>(n[i]||(n[i]=[]),n[i].includes(o)||(f?n[i].push([o,!0]):n[i].push(o)),n),{});return Object.entries(r).map(([n,o])=>{let i=o.find(u=>Array.isArray(u)&&u[1]),f=o.filter(u=>typeof u=="string"),p=i?`${i[0]}`:"",l=f.length?`{ ${f.join(", ")} }`:"";return`import ${p}${p&&l?", ":""}${l} from "${n}";`})},"printImports");var Br=/^id$/i,Te=t(e=>Br.test(e),"isIDKey");var Le=t(e=>e.relationInfer&&e.relationInfer.accessor?Array.isArray(e.relationInfer.accessor)?`optionLabel: "${e.relationInfer.accessor[0]}",`:e.relationInfer.accessor!=="title"?`optionLabel: "${e.relationInfer.accessor}",`:"":"","getOptionLabel");var Me=t(e=>{},"noOp");var Ee=t((e,r="")=>{if(Number.isInteger(Number(e)))return r.charAt(0).toLowerCase()+r.slice(1)+e;let n=e.replace(/^\d+/,"").replace(/[^a-zA-Z0-9]/g,"-"),o=X(n).replace(/ /g,"");return`${o.charAt(0).toLowerCase()+o.slice(1)}${r.charAt(0).toUpperCase()+r.slice(1)}`},"getVariableName");var W=t((e,r,s)=>{if(r&&s&&e){let n=e?r[e]:{},i=[...s,"default"].reduce((f,p)=>f??(n==null?void 0:n[p]),void 0);if(i)return i}},"pickMeta");var Ve=t(e=>e===void 0?e:typeof e=="string"?`"${e}"`:e,"idQuoteWrapper");var Xe=t(e=>{let r=t((s,n,o,i=r,f)=>{let p=e.map(u=>u(s,n,o,i,f));return he(p)},"fieldInferencer");return r},"composeInferencers");var er=t(e=>t((s,n,o,i,f,p)=>e.reduce((l,u)=>u(l,n,o,i,f,p),s),"fieldTransformer"),"composeTransformers");var rr=t((e,r,s,n,o)=>{let i=Array.isArray(r),f=Array.isArray(r)&&r.every(p=>typeof p=="string"||typeof p=="number");if(i){if(!f){let l=n(e,r[0],s,n,o);return l?{...l,key:e,multiple:!0,priority:1}:!1}let p=n(e,r[0],s,n,o)||{type:"string"};return{key:e,multiple:!0,priority:1,type:p==null?void 0:p.type}}return!1},"arrayInfer");var tr=t((e,r)=>typeof r=="boolean"?{key:e,type:"boolean"}:!1,"booleanInfer");var De=$(require("dayjs"));var Wr=/(_at|_on|At|On|AT|ON)(\[\])?$/,Zr=["/",":","-","."],nr=t((e,r)=>{let s=Wr.test(e)&&(0,De.default)(r).isValid(),n=typeof r=="string"&&(0,De.default)(r).isValid();return typeof r=="string"&&Zr.some(i=>r.includes(i))&&(s||n)?{key:e,type:"date",priority:1}:!1},"dateInfer");var Ur=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,or=t((e,r)=>typeof r=="string"&&Ur.test(r)?{key:e,type:"email",priority:1}:!1,"emailInfer");var Gr=/\.(gif|jpe?g|tiff?|png|webp|bmp|svg)$/i,sr=t((e,r)=>typeof r=="string"&&Gr.test(r)?{key:e,type:"image",priority:2}:!1,"imageInfer");var ir=t((e,r)=>typeof r>"u"||r===null?null:!1,"nullishInfer");var ar=t((e,r)=>{let s=typeof r=="string"&&r.length>0,n=!isNaN(r);return s&&n||typeof r=="number"?{key:e,type:"number"}:!1},"numberInfer");var cr=/id$/i,pr=t((e,r,s,n,o)=>{let i=r!==null,f=!Array.isArray(r);if(i&&f&&typeof r=="object"){let l=Object.keys(r).length===1&&cr.test(Object.keys(r)[0]),u=Object.keys(r).some(y=>cr.test(y));if(l)return{key:e,type:"relation",relation:!0,accessor:"id",priority:1};let g=ie(e,r);if((g?g.length>0:!1)&&g){let y=g&&Array.isArray(g)?g[0]:g,d=n(y,r[y],r,n,o);if(d){let C=Array.isArray(g)?g.map(R=>d.accessor?`${R}.${Array.isArray(d.accessor)?d.accessor[0]:d.accessor}`:R):d.accessor?Array.isArray(d.accessor)?`${g}.${d.accessor[0]}`:`${g}.${d.accessor}`:g;return(d==null?void 0:d.type)==="text"&&(o==="create"||o==="edit")&&u?{key:e,type:"relation",relation:!0,accessor:"id",priority:1}:{...d,fieldable:!0,key:e,accessor:C,priority:1}}}return{key:e,fieldable:!1,type:"object",priority:1}}return!1},"objectInfer");var lr=t((e,r)=>typeof r=="string"&&r.length>100?{key:e,type:"richtext",priority:1}:!1,"richtextInfer");var fr=t((e,r)=>typeof r=="string"?{key:e,type:"text"}:!1,"textInfer");var Yr=/^(https?|ftp):\/\/(-\.)?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/i,dr=t((e,r)=>typeof r=="string"&&Yr.test(r)?{key:e,type:"url",priority:1}:!1,"urlInfer");var ur=[rr,tr,nr,or,sr,ir,ar,pr,Qe,lr,fr,dr];var mr=t((e,r,s,n)=>e.map(i=>{if(!i.relation&&(i.type==="text"||i.type==="richtext"||i.type==="number")&&!i.canRelation){let f=/^[a-z0-9-]+$/,p=t(y=>f.test(`${y}`),"isValidUUID"),l=i.key.toLowerCase()!=="id";return!(!i.accessor||typeof i.accessor=="string")||!l?i:(i.multiple?n[i.key]:[n[i.key]]).every(y=>p(i.accessor?y[i.accessor]:y))?{...i,canRelation:!0}:i}return i}),"basicToRelation");var Qr=/(image|photo|avatar|cover|thumbnail|icon)/i,gr=t(e=>e.map(s=>s.type==="url"&&Qr.test(s.key)?{...s,type:"image"}:s),"imageByKey");var yr=t((e,r)=>e.map(n=>{let o=Ce(n,r);return o?{...n,relation:!0,type:"relation",resource:o}:n}),"relationByResource");var hr=t((e,r,s,n,o,i)=>e.map(p=>{if(p.relation&&p.type==="relation"&&!p.resource){let l=p.accessor?n[p.key][p.accessor]:n[p.key],u=o(p.key,l,n,o,i);if(u&&u.type!=="relation")return{...p,fieldable:!0,relation:!1,type:u.type,canRelation:!0}}return p}),"relationToFieldable");var xr=[gr,yr,hr,mr];var z=$(require("react")),qr=$(require("@refinedev/core")),ue=require("@aliemir/react-live");var Ir=[["react","React",z.default],["@refinedev/core","RefineCore",qr]],je=z.default.createContext({}),ze=t(({fetchError:e,code:r,additionalScope:s,errorComponent:n})=>{let o=(r&&Fe(ve(r,[...Ir,...s??[]].reduce((p,[l,u,g,A])=>A?p:{...p,[l]:u},{}))))??"",i=z.default.useMemo(()=>({React:z.default,...z.default,...[...Ir,...s??[]].reduce((p,[l,u,g])=>({...p,[u]:g}),{})}),[s]),f=z.default.useMemo(()=>t(()=>{let{error:l}=z.default.useContext(je);return n?z.default.createElement(n,{error:l?`<p>An error occured while rendering the generated component.You can check the generated code from the below "Show Code" button and fix the error manually.</p>
                                    <p>If you think this is a bug, please report the issue at <a target="_blank" rel="noopener noreferrer" href="https://github.com/refinedev/refine/issues">https://github.com/refinedev/refine/issues</a></p>
                                    <p>Exception:</p>
                                    <code>${l}</code>`:typeof e=="string"?e:e?`<p>Something went wrong while fetching the resource data.</p>
                                    <p>To learn more about the Inferencer, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`:void 0}):null},"LiveErrorComponent"),[n,e]);return z.default.createElement(ue.LiveProvider,{Context:je,code:o,scope:i,noInline:!0},!e&&z.default.createElement(ue.LivePreview,{Context:je}),z.default.createElement(f,null))},"LiveComponent");var a=$(require("react")),me=$(require("prism-react-renderer")),wr=$(require("prism-react-renderer/themes/vsDark"));var Fr=t(({code:e,loading:r})=>{let s=a.default.useMemo(()=>xe(e??""),[e]),[n,o]=a.default.useState(!1),[i,f]=a.default.useState(!1),[p,l]=a.default.useState(!1),[u,g]=a.default.useState(!1),[A,y]=a.default.useState(!1);return a.default.useEffect(()=>{if(!r){let d=setTimeout(()=>{o(!0)},300);return()=>{clearTimeout(d)}}return()=>{}},[r]),a.default.useEffect(()=>{if(typeof window<"u"){let d=window.matchMedia("(max-width: 449px)");d.matches?l(!1):l(!0);let C=t(()=>{d.matches?l(!1):l(!0)},"handleResize");return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}}return()=>{}},[]),a.default.useEffect(()=>{if(typeof window<"u"){let d=window.matchMedia("(max-width: 1280px)");d.matches?g(!0):g(!1);let C=t(()=>{d.matches?g(!0):g(!1)},"handleResize");return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}}return()=>{}},[]),s&&!r?a.default.createElement(a.default.Fragment,null,p&&a.default.createElement("div",{className:"refine-inferencer--code-viewer",style:{position:"sticky",bottom:"24px",paddingTop:"24px",left:0,right:0,width:"100%",zIndex:10,display:"flex",justifyContent:"center",transition:"all 0.2s ease",opacity:n&&!i?1:0,transform:n&&!i?"translateY(0)":"translateY(100px)"}},a.default.createElement("div",{style:{width:"calc(100% - calc(64px * 2))",maxWidth:"1080px",padding:"20px",backgroundColor:"#1A1A1A",boxShadow:"0px 4px 16px -4px rgba(0, 0, 0, 0.5), 0px 8px 32px -8px rgba(0, 0, 0, 0.35)",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:u?"column":"row",gap:"12px"}},a.default.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"}},a.default.createElement("div",null,a.default.createElement(Xr,null)),a.default.createElement("div",{style:{fontSize:"14px",lineHeight:"20px",color:"#ffffff"}},a.default.createElement("p",{style:{padding:0,margin:0}},"Most of the page code is auto-generated by the"," ",a.default.createElement("span",{style:{textDecoration:"underline"}},"Inferencer")," ","feature, based on your backend data structure."),a.default.createElement("p",{style:{padding:0,margin:0}},"While this is an excellent way to experiment with refine,"," ",a.default.createElement("span",{style:{fontWeight:600}},"it's not intended to be used on production.")))),a.default.createElement("div",null,a.default.createElement("button",{onPointerEnter:()=>y(!0),onPointerLeave:()=>y(!1),onClick:()=>f(!0),style:{appearance:"none",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",color:"#ffffff",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:A?"scale(1.025)":void 0,filter:A?"brightness(1.1)":void 0}},a.default.createElement(vr,{style:{flexShrink:0}}),a.default.createElement("span",null,"Show the auto-generated code"))))),a.default.createElement(Jr,{visible:i,onClose:()=>f(!1),code:s})):null},"SharedCodeViewer"),Jr=t(({visible:e,onClose:r,code:s=""})=>{let n=a.default.useRef(null),[o,i]=a.default.useState(!1),[f,p]=a.default.useState(!1),[l,u]=a.default.useState(!1),[g,A]=a.default.useState(!1);a.default.useEffect(()=>{if(typeof document<"u"){let c=t(m=>{n.current&&!n.current.contains(m.target)&&r()},"onOutsideClick");return document.addEventListener("pointerdown",c),()=>{document.removeEventListener("pointerdown",c)}}return()=>{}},[r]);let y=t(()=>{typeof navigator<"u"&&(navigator.clipboard.writeText(s),i(!0),setTimeout(()=>{i(!1)},1e3))},"onCopy"),d=a.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},a.default.createElement("div",{style:{fontWeight:700,fontSize:"20px",lineHeight:"32px",color:"#0D0D0D"}},"Auto-generated code by Inferencer"),a.default.createElement("button",{onClick:r,onPointerEnter:()=>u(!0),onPointerLeave:()=>u(!1),style:{flexShrink:0,appearance:"none",border:"none",background:"none",padding:0,margin:0,outline:"none",borderRadius:"50px",width:"32px",height:"32px",cursor:"pointer",transition:"all 0.15s ease",transform:l?"scale(1.05)":void 0,filter:l?"brightness(0.8)":void 0}},a.default.createElement(et,null))),C=a.default.createElement("div",{style:{fontSize:"13px",borderRadius:"8px",flex:"1",overflow:"scroll",background:"#1E1E1E"}},a.default.createElement(me.default,{...me.defaultProps,theme:wr.default,code:s,language:"tsx"},({className:c,style:m,tokens:b,getLineProps:O,getTokenProps:H})=>a.default.createElement("pre",{className:c,style:{...m,padding:"14px 14px 14px 14px",margin:"0",width:"100%",boxSizing:"border-box"}},b.map((S,K)=>a.default.createElement("div",{key:K,...O({line:S,key:K})},S.map((h,k)=>a.default.createElement("span",{key:k,...H({token:h,key:k})})))))));return a.default.createElement("div",{className:"refine-inferencer--code-viewer-modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.5)",transition:"all 0.2s ease",opacity:e?1:0,pointerEvents:e?"all":"none",display:"flex",justifyContent:"center",alignItems:"center"}},a.default.createElement("div",{ref:n,style:{transform:e?"scale(1) translateY(0px)":"scale(0) translateY(-200px)",transition:"all 0.25s cubic-bezier(.35,1.29,.81,1.08)",transitionDelay:"0.25",width:"calc(100% - calc(32px * 2))",height:"calc(100% - calc(32px * 2))",backgroundColor:"#fff",maxWidth:"640px",maxHeight:"720px",borderRadius:"8px",padding:"16px"}},a.default.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",gap:"16px"}},d,C,a.default.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",gap:"16px"}},a.default.createElement("button",{onPointerEnter:()=>p(!0),onPointerLeave:()=>p(!1),onClick:y,style:{appearance:"none",height:"40px",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",color:"#ffffff",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",position:"relative",overflow:"hidden",transition:"filter 0.2s ease",transform:f?"scale(1.025)":"scale(1)",filter:f?"brightness(1.1)":void 0}},a.default.createElement(br,{style:{flexShrink:0,marginTop:"-2px",marginBottom:"-2px"}}),a.default.createElement("span",null,"Copy Generated Code"),a.default.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#0080FF",transition:"all 0.2s ease",transform:o?"translateY(0)":"translateY(40px)"}},a.default.createElement(br,{style:{flexShrink:0,marginTop:"-2px",marginBottom:"-2px"}}),a.default.createElement("span",null,"Copied!"))),a.default.createElement("a",{onPointerEnter:()=>A(!0),onPointerLeave:()=>A(!1),href:"https://refine.dev/docs/packages/documentation/inferencer",target:"_blank",rel:"noreferrer",style:{appearance:"none",textDecoration:"none",border:"none",padding:"10px 16px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 128, 255, 0.1)",color:"#0080FF",fontSize:"14px",lineHeight:"20px",fontWeight:600,gap:"8px",cursor:"pointer",transition:"all 0.2s ease",transform:g?"scale(1.025)":void 0,filter:g?"brightness(1.1)":void 0}},a.default.createElement(vr,{style:{flexShrink:0}}),a.default.createElement("span",null,"Learn more about inferencer"))))))},"CodeModal"),Xr=t(e=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",...e},a.default.createElement("path",{fill:"#0080FF",fillRule:"evenodd",d:"M10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10Zm0-15a1.25 1.25 0 1 0 0 2.5A1.25 1.25 0 0 0 10 5Zm0 10c.69 0 1.25-.56 1.25-1.25V10a1.25 1.25 0 1 0-2.5 0v3.75c0 .69.56 1.25 1.25 1.25Z",clipRule:"evenodd"})),"InfoIcon"),vr=t(e=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},a.default.createElement("path",{fill:"currentColor",d:"M5 2a1 1 0 0 1 0 2H4v8h8v-1a1 1 0 1 1 2 0v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1Z"}),a.default.createElement("path",{fill:"currentColor",d:"M9 2a1 1 0 0 0 0 2h1.586L6.293 8.293a1 1 0 0 0 1.414 1.414L12 5.414V7a1 1 0 1 0 2 0V3a1 1 0 0 0-1-1H9Z"})),"OpenIcon"),et=t(e=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",...e},a.default.createElement("path",{fill:"#A6A6A6",fillRule:"evenodd",d:"M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16Zm-2.586-21.414a2 2 0 1 0-2.828 2.828L13.172 16l-2.586 2.586a2 2 0 1 0 2.828 2.828L16 18.828l2.586 2.586a2 2 0 1 0 2.828-2.828L18.828 16l2.586-2.586a2 2 0 1 0-2.828-2.828L16 13.172l-2.586-2.586Z",clipRule:"evenodd"})),"CloseIcon"),br=t(e=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",fill:"none",...e},a.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 5a3 3 0 0 0 3 3h2a3 3 0 0 0 3-3h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h1Zm0 7a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm1 3a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2H9Z",clipRule:"evenodd"}),a.default.createElement("path",{fill:"currentColor",d:"M13 4a1 1 0 1 1 0 2h-2a1 1 0 1 1 0-2h2Z"})),"ClipboardIcon");var Q=$(require("react")),ge=require("@refinedev/core");var Cr=t((e,r,s,n)=>{let{resource:o,id:i,resources:f}=(0,ge.useResource)(r),p=s??i,l=(0,ge.useDataProvider)(),[u,g]=Q.default.useState(void 0),[A,y]=Q.default.useState(void 0),[d,C]=Q.default.useState(void 0),[R,c]=Q.default.useState(!0),[m,b]=Q.default.useState(!1),O=Q.default.useCallback(async H=>{var h;let S=J(o)??ye(o==null?void 0:o.name,void 0,f),K=l(S);b(!0),g(void 0);try{if((e==="list"||e==="create")&&o){let k=await K.getList({resource:o==null?void 0:o.name,meta:W((o==null?void 0:o.identifier)??(o==null?void 0:o.name),n,["getList"])}),P=(h=k.data)==null?void 0:h[0];P||g(`<p>No records/data found for resource "${o==null?void 0:o.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),y(P),C(k.data),setTimeout(()=>{b(!1)},500)}if((e==="edit"||e==="show")&&H&&o){let P=(await K.getOne({resource:o==null?void 0:o.name,id:H,meta:W((o==null?void 0:o.identifier)??(o==null?void 0:o.name),n,["getOne"])})).data;P||g(`<p>No records/data found for resource "${o==null?void 0:o.name}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),y(P),setTimeout(()=>{b(!1)},500)}}catch(k){console.warn("An error occured while fetching the resource data. Please check the error message below:",k),g(`<p>Something went wrong while fetching the resource data.</p>
                    <p>Please check your data provider and API for resource "${o==null?void 0:o.name}".</p>
                    <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),setTimeout(()=>{b(!1)},500)}},[e,l,o,f]);return Q.default.useEffect(()=>{c(!1),!m&&!A&&O(p)},[O,p]),{data:A,datas:d,loading:m,initial:R,error:u}},"useInferFetch");var re=$(require("react")),kr=require("@refinedev/core");var Oe=require("lodash");var Ar=t(({record:e,fields:r,infer:s,meta:n})=>{let o=(0,kr.useDataProvider)(),[i,f]=re.default.useState([]),[p,l]=re.default.useState(!0),[u,g]=re.default.useState(!1),A=re.default.useCallback(async y=>{console.groupCollapsed("@refinedev/inferencer is trying to detect relations");let d=[];g(!0);try{let C=y.map(async c=>{var m,b,O,H,S;if(c&&(c.relation||c.canRelation)&&e){if(c.relationInfer)return c;let K=J(c.resource),h=o(K),k=c.multiple,P=Array.isArray(c.accessor)?void 0:c.multiple?e[c.key].map(T=>c.accessor?(0,Oe.get)(T,c.accessor):T)[0]:c.accessor?(0,Oe.get)(e[c.key],c.accessor):e[c.key];if(P&&c.resource)try{let T={};if(k&&h.getMany){let{data:Z}=await h.getMany({resource:c.resource.name,ids:[P],meta:W(((m=c.resource)==null?void 0:m.identifier)??((b=c.resource)==null?void 0:b.name),n,["getMany"])});T=Z==null?void 0:Z[0]}else{let{data:Z}=await h.getOne({resource:c.resource.name,id:P,meta:W(((O=c.resource)==null?void 0:O.identifier)??((H=c.resource)==null?void 0:H.name),n,k?["getMany","getOne"]:["getOne"])});T=Z}d.push({status:"success",resource:c.resource.name,field:c.key});let q=s("__",T,{},s);return{...c,relationInfer:q}}catch{return d.push({status:"error",resource:c.resource.name,field:c.key}),{...c,relationInfer:null}}if(P){let T,q;try{let ee={};if(k&&h.getMany){let{data:M}=await((S=h.getMany)==null?void 0:S.call(h,{resource:B(v(c.key)),ids:[P],meta:W(B(v(c.key)),n,["getMany"])}));ee=M==null?void 0:M[0]}else{let{data:M}=await h.getOne({resource:B(v(c.key)),id:P,meta:W(B(v(c.key)),n,k?["getMany","getOne"]:["getOne"])});ee=M}d.push({status:"success",resource:B(v(c.key)),field:c.key}),T=ee,q=!0}catch{d.push({status:"error",resource:B(v(c.key)),field:c.key});let M={};try{if(k&&h.getMany){let{data:E}=await h.getMany({resource:_(v(c.key)),meta:W(_(v(c.key)),n,["getMany"]),ids:[P]});M=E==null?void 0:E[0]}else{let{data:E}=await h.getOne({resource:_(v(c.key)),meta:W(_(v(c.key)),n,k?["getMany","getOne"]:["getOne"]),id:P});M=E}d.push({status:"success",resource:_(v(c.key)),field:c.key}),T=M,q=!1}catch{return d.push({status:"error",resource:_(v(c.key)),field:c.key}),{...c,relationInfer:null}}}let Z=s("__",T,{},s),le=v(c.key);return{...c,relation:!0,type:"relation",resource:{name:q?B(le):_(le)},fieldable:!1,canRelation:void 0,relationInfer:Z}}return{...c,relationInfer:null}}return c}),R=await Promise.all(C);f(R.filter(c=>c)),setTimeout(()=>{g(!1)},500)}catch{setTimeout(()=>{g(!1)},500)}setTimeout(()=>{console.log(`Tried to detect relations with ${d.length} attempts and succeeded with ${d.filter(C=>C.status==="success").length} attempts.`),console.groupEnd(),console.info("@refinedev/inferencer may send multiple requests to your API for nonexistent resources when trying to detect relations. To learn more about how the inferencer works, visit https://s.refine.dev/how-inferencer-works")},500)},[o,e]);return re.default.useEffect(()=>{l(!1),!u&&r&&r.length>0&&i.length===0&&A(r)},[A,u,r,A]),{fields:i,loading:u,initial:p}},"useRelationFetch");var Sr=t(({type:e,additionalScope:r=[],customElements:s=[],fieldTransformers:n=[],renderer:o,loadingComponent:i,errorComponent:f,codeViewerComponent:p})=>{let l=Xe([...ur,...s]),u=er([...xr,...n]),g=t(({resourceName:y,fieldTransformer:d,hideCodeViewerInProduction:C,meta:R,id:c})=>{var _e,Be;let{resource:m,resources:b}=(0,te.useResource)(y),{i18nProvider:O}=(0,N.useContext)(te.TranslationContext),{resource:H}=(0,te.useResource)(),{data:S,datas:K,loading:h,initial:k,error:P}=Cr(e,y??(m==null?void 0:m.name),c,R),T=t((x,I,V)=>{let D=l(x,I,V,l,e);if(D&&m){let j=u([D],b,m,V,l,e),F=d?j.flatMap(w=>{let L=d(w);return L?[L]:[]}):j;return F==null?void 0:F[0]}},"inferSingleField"),q=t(x=>Object.keys(x).map(V=>{let D=x[V];return T(V,D,x)}).filter(Boolean),"inferSingleRecord"),Z=t(x=>{let I=x.map(w=>q(w)),V=x.flatMap(w=>Object.keys(w)).filter((w,L,ne)=>ne.indexOf(w)===L),D={},j=V.map(w=>{let L=I.map(G=>G.find(U=>U.key===w));return L.reduce((G,U,fe)=>{if(!U)return G;let oe=L.filter(Y=>(Y==null?void 0:Y.key)===U.key&&(Y==null?void 0:Y.type)===U.type).length;return oe>G.count?(D[w]=x[fe][w],{count:oe,field:U}):G},{count:0,field:void 0}).field});return{commonRecord:D,inferredFields:j}},"inferMultipleRecords"),[le,ee]=N.default.useMemo(()=>{if(K&&(e==="list"||e==="create")){let x=Z(K);return[x.inferredFields,x.commonRecord]}if(S){let x=Object.keys(S).map(I=>{let V=S[I];return l(I,V,S,l,e)}).filter(Boolean);if(m){let I=u(x,b,m,S,l,e);return[d?I.flatMap(D=>{let j=d(D);return j?[j]:[]}):I,S]}return[[],S]}return[[],void 0]},[S,K,b,m,d]),{fields:M,loading:E}=Ar({record:ee,fields:le,infer:l,meta:R}),He=N.default.useMemo(()=>{let x=[];return M.forEach((I,V,D)=>{if(I.resource){if(x.findIndex(F=>{var w,L;return((w=F.resource)==null?void 0:w.name)===((L=I.resource)==null?void 0:L.name)})>-1)return;let j=D.filter((F,w)=>{var L,ne,G,U,fe,oe;if(w!==V){let Y=I.resource,$r=F.resource,Nr=((L=F.resource)==null?void 0:L.identifier)||((ne=I.resource)==null?void 0:ne.identifier)?((G=F.resource)==null?void 0:G.identifier)===((U=I.resource)==null?void 0:U.identifier):((fe=F.resource)==null?void 0:fe.name)===((oe=I.resource)==null?void 0:oe.name);return Y&&$r&&Nr}else return!1});if(j.length>0)if(e==="create"||e==="edit"){let F;[I,...j].find(w=>{w.fieldable!==!0&&F===void 0&&(F=w)}),F?x.push(F):x.push(I)}else{let F;[I,...j].find(w=>{w.fieldable!==!1&&F===void 0&&(F=w)}),F?x.push(F):x.push(I)}else x.push(I)}else x.push(I)}),x},[M,e]),Ke=N.default.useMemo(()=>!h&&!E&&!k&&m?o({resource:m,resources:b,fields:He,infer:l,meta:R,isCustomPage:m.name!==(H==null?void 0:H.name),id:c,i18n:!!O}):"",[m,b,He,h,E]),Pr=C;return N.default.createElement(N.default.Fragment,null,i&&(h||E)&&N.default.createElement(i,null),!h&&!E&&N.default.createElement(N.default.Fragment,null,N.default.createElement(ze,{fetchError:!h&&P?P:!h&&!k&&!S,code:Ae(Ke,ce(((_e=m==null?void 0:m.meta)==null?void 0:_e.label)??((Be=m==null?void 0:m.options)==null?void 0:Be.label)??(m==null?void 0:m.label)??(m==null?void 0:m.name)??"Resource",e)),errorComponent:f,additionalScope:r}),typeof p<"u"&&!Pr?N.default.createElement(p,{code:Se(Ke),loading:h||E}):null))},"Inferencer");return t(({name:y,resource:d,fieldTransformer:C,meta:R,hideCodeViewerInProduction:c,id:m})=>{let{resource:b}=(0,te.useResource)(d??y),O=`${(b==null?void 0:b.identifier)??(b==null?void 0:b.name)}-${e}-${m}`;return N.default.createElement(g,{hideCodeViewerInProduction:c,fieldTransformer:C,resourceName:d??y,meta:R??{},key:O,id:m})},"InferencerComponent")},"createInferencer");
//# sourceMappingURL=index.js.map